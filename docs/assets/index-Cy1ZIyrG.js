const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pglite-IPxksoss.js","assets/monaco-editor-BxywP6eC.js","assets/monaco-editor-BhaLMqXS.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{r as n,_ as r,F as a,R as s}from"./monaco-editor-BxywP6eC.js";import{SelectQueryParser as i,SqlFormatter as l,WithClauseParser as o,DynamicQueryBuilder as c,SelectableColumnCollector as u,DuplicateDetectionMode as d,CTEDependencyAnalyzer as f,SchemaCollector as p}from"./rawsql-Bg5WWB2o.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var m={exports:{}},h={},y=n,g=Symbol.for("react.element"),b=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,x=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,a={},s=null,i=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(i=t.ref),t)v.call(t,r)&&!w.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:g,type:e,key:s,ref:i,props:a,_owner:x.current}}h.Fragment=b,h.jsx=k,h.jsxs=k,m.exports=h;var S=m.exports,C={},E={exports:{}},N={},j={exports:{}},T={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var l=2*(r+1)-1,o=e[l],c=l+1,u=e[c];if(0>a(o,n))c<s&&0>a(u,o)?(e[r]=u,e[c]=n,r=c):(e[r]=o,e[l]=n,r=l);else{if(!(c<s&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var o=[],c=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,y="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var a=n(c);null!==a;){if(null===a.callback)r(c);else{if(!(a.startTime<=e))break;r(c),a.sortIndex=a.expirationTime,t(o,a)}a=n(c)}}function x(e){if(h=!1,v(e),!m)if(null!==n(o))m=!0,q(w);else{var t=n(c);null!==t&&O(x,t.startTime-e)}}function w(t,a){m=!1,h&&(h=!1,g(E),E=-1),p=!0;var s=f;try{for(v(a),d=n(o);null!==d&&(!(d.expirationTime>a)||t&&!T());){var i=d.callback;if("function"==typeof i){d.callback=null,f=d.priorityLevel;var l=i(d.expirationTime<=a);a=e.unstable_now(),"function"==typeof l?d.callback=l:d===n(o)&&r(o),v(a)}else r(o);d=n(o)}if(null!==d)var u=!0;else{var y=n(c);null!==y&&O(x,y.startTime-a),u=!1}return u}finally{d=null,f=s,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,C=null,E=-1,N=5,j=-1;function T(){return!(e.unstable_now()-j<N)}function M(){if(null!==C){var t=e.unstable_now();j=t;var n=!0;try{n=C(!0,t)}finally{n?k():(S=!1,C=null)}}else S=!1}if("function"==typeof b)k=function(){b(M)};else if("undefined"!=typeof MessageChannel){var _=new MessageChannel,L=_.port2;_.port1.onmessage=M,k=function(){L.postMessage(null)}}else k=function(){y(M,0)};function q(e){C=e,S||(S=!0,k())}function O(t,n){E=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,q(w))},e.unstable_forceFrameRate=function(e){0>e||125<e||(N=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(o)},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,a,s){var i=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?i+s:i:s=i,r){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return r={id:u++,callback:a,priorityLevel:r,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>i?(r.sortIndex=s,t(c,r),null===n(o)&&r===n(c)&&(h?(g(E),E=-1):h=!0,O(x,s-i))):(r.sortIndex=l,t(o,r),m||p||(m=!0,q(w))),r},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}}(T),j.exports=T;var M=j.exports,_=n,L=M;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O=new Set,F={};function R(e,t){P(e,t),P(e+"Capture",t)}function P(e,t){for(F[e]=t,e=0;e<t.length;e++)O.add(t[e])}var I=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),D=Object.prototype.hasOwnProperty,z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W={},A={};function $(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Q[e]=new $(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Q[t]=new $(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Q[e]=new $(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Q[e]=new $(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Q[e]=new $(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){Q[e]=new $(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){Q[e]=new $(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){Q[e]=new $(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){Q[e]=new $(e,5,!1,e.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function U(e){return e[1].toUpperCase()}function B(e,t,n,r){var a=Q.hasOwnProperty(t)?Q[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!D.call(A,e)||!D.call(W,e)&&(z.test(e)?A[e]=!0:(W[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(V,U);Q[t]=new $(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(V,U);Q[t]=new $(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(V,U);Q[t]=new $(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){Q[e]=new $(e,1,!1,e.toLowerCase(),null,!1,!1)}),Q.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){Q[e]=new $(e,1,!1,e.toLowerCase(),null,!0,!0)});var H=_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),K=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),ee=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),le=Symbol.iterator;function oe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=le&&e[le]||e["@@iterator"])?e:null}var ce,ue=Object.assign;function de(e){if(void 0===ce)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ce=t&&t[1]||""}return"\n"+ce+e}var fe=!1;function pe(e,t){if(!e||fe)return"";fe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,l=s.length-1;1<=i&&0<=l&&a[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==s[l]){if(1!==i||1!==l)do{if(i--,0>--l||a[i]!==s[l]){var o="\n"+a[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{fe=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?de(e):""}function me(e){switch(e.tag){case 5:return de(e.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return e=pe(e.type,!1);case 11:return e=pe(e.type.render,!1);case 1:return e=pe(e.type,!0);default:return""}}function he(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case G:return"Fragment";case K:return"Portal";case X:return"Profiler";case Y:return"StrictMode";case ne:return"Suspense";case re:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ee:return(e.displayName||"Context")+".Consumer";case Z:return(e._context.displayName||"Context")+".Provider";case te:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case ae:return null!==(t=e.displayName||null)?t:he(e.type)||"Memo";case se:t=e._payload,e=e._init;try{return he(e(t))}catch(n){}}return null}function ye(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(t);case 8:return t===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function ge(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ve(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function xe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function we(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ke(e,t){var n=t.checked;return ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Se(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ce(e,t){null!=(t=t.checked)&&B(e,"checked",t,!1)}function Ee(e,t){Ce(e,t);var n=ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?je(e,t.type,n):t.hasOwnProperty("defaultValue")&&je(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ne(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function je(e,t,n){"number"===t&&we(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Te=Array.isArray;function Me(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function _e(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(q(91));return ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(q(92));if(Te(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function qe(e,t){var n=ge(t.value),r=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function Fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Re(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Pe,Ie,De=(Ie=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Pe=Pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return Ie(e,t)})}:Ie);function ze(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var We={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ae=["Webkit","ms","Moz","O"];function $e(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||We.hasOwnProperty(e)&&We[e]?(""+t).trim():t+"px"}function Qe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=$e(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(We).forEach(function(e){Ae.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),We[t]=We[e]})});var Ve=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ue(e,t){if(t){if(Ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(q(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(q(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(q(62))}}function Be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He=null;function Je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ke=null,Ge=null,Ye=null;function Xe(e){if(e=Ba(e)){if("function"!=typeof Ke)throw Error(q(280));var t=e.stateNode;t&&(t=Ja(t),Ke(e.stateNode,e.type,t))}}function Ze(e){Ge?Ye?Ye.push(e):Ye=[e]:Ge=e}function et(){if(Ge){var e=Ge,t=Ye;if(Ye=Ge=null,Xe(e),t)for(e=0;e<t.length;e++)Xe(t[e])}}function tt(e,t){return e(t)}function nt(){}var rt=!1;function at(e,t,n){if(rt)return e(t,n);rt=!0;try{return tt(e,t,n)}finally{rt=!1,(null!==Ge||null!==Ye)&&(nt(),et())}}function st(e,t){var n=e.stateNode;if(null===n)return null;var r=Ja(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(q(231,t,typeof n));return n}var it=!1;if(I)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){it=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch(Ie){it=!1}function ot(e,t,n,r,a,s,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var ct=!1,ut=null,dt=!1,ft=null,pt={onError:function(e){ct=!0,ut=e}};function mt(e,t,n,r,a,s,i,l,o){ct=!1,ut=null,ot.apply(pt,arguments)}function ht(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function yt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function gt(e){if(ht(e)!==e)throw Error(q(188))}function bt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ht(e)))throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return gt(a),e;if(s===r)return gt(a),t;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=a,r=s;else{for(var i=!1,l=a.child;l;){if(l===n){i=!0,n=a,r=s;break}if(l===r){i=!0,r=a,n=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===n){i=!0,n=s,r=a;break}if(l===r){i=!0,r=s,n=a;break}l=l.sibling}if(!i)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(3!==n.tag)throw Error(q(188));return n.stateNode.current===n?e:t}(e))?vt(e):null}function vt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=vt(e);if(null!==t)return t;e=e.sibling}return null}var xt=L.unstable_scheduleCallback,wt=L.unstable_cancelCallback,kt=L.unstable_shouldYield,St=L.unstable_requestPaint,Ct=L.unstable_now,Et=L.unstable_getCurrentPriorityLevel,Nt=L.unstable_ImmediatePriority,jt=L.unstable_UserBlockingPriority,Tt=L.unstable_NormalPriority,Mt=L.unstable_LowPriority,_t=L.unstable_IdlePriority,Lt=null,qt=null;var Ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(Ft(e)/Rt|0)|0},Ft=Math.log,Rt=Math.LN2;var Pt=64,It=4194304;function Dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var l=i&~a;0!==l?r=Dt(l):0!==(s&=i)&&(r=Dt(s))}else 0!==(i=n&~a)?r=Dt(i):0!==s&&(r=Dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Ot(t)),r|=e[n],t&=~a;return r}function Wt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function At(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function $t(){var e=Pt;return!(4194240&(Pt<<=1))&&(Pt=64),e}function Qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-Ot(t)]=n}function Ut(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Bt=0;function Ht(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Jt,Kt,Gt,Yt,Xt,Zt=!1,en=[],tn=null,nn=null,rn=null,an=new Map,sn=new Map,ln=[],on="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cn(e,t){switch(e){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":an.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sn.delete(t.pointerId)}}function un(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=Ba(t))&&Kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function dn(e){var t=Ua(e.target);if(null!==t){var n=ht(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=yt(n)))return e.blockedOn=t,void Xt(e.priority,function(){Gt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function fn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ba(n))&&Kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);He=r,n.target.dispatchEvent(r),He=null,t.shift()}return!0}function pn(e,t,n){fn(e)&&n.delete(t)}function mn(){Zt=!1,null!==tn&&fn(tn)&&(tn=null),null!==nn&&fn(nn)&&(nn=null),null!==rn&&fn(rn)&&(rn=null),an.forEach(pn),sn.forEach(pn)}function hn(e,t){e.blockedOn===t&&(e.blockedOn=null,Zt||(Zt=!0,L.unstable_scheduleCallback(L.unstable_NormalPriority,mn)))}function yn(e){function t(t){return hn(t,e)}if(0<en.length){hn(en[0],e);for(var n=1;n<en.length;n++){var r=en[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==tn&&hn(tn,e),null!==nn&&hn(nn,e),null!==rn&&hn(rn,e),an.forEach(t),sn.forEach(t),n=0;n<ln.length;n++)(r=ln[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ln.length&&null===(n=ln[0]).blockedOn;)dn(n),null===n.blockedOn&&ln.shift()}var gn=H.ReactCurrentBatchConfig,bn=!0;function vn(e,t,n,r){var a=Bt,s=gn.transition;gn.transition=null;try{Bt=1,wn(e,t,n,r)}finally{Bt=a,gn.transition=s}}function xn(e,t,n,r){var a=Bt,s=gn.transition;gn.transition=null;try{Bt=4,wn(e,t,n,r)}finally{Bt=a,gn.transition=s}}function wn(e,t,n,r){if(bn){var a=Sn(e,t,n,r);if(null===a)ga(e,t,r,kn,n),cn(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return tn=un(tn,e,t,n,r,a),!0;case"dragenter":return nn=un(nn,e,t,n,r,a),!0;case"mouseover":return rn=un(rn,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return an.set(s,un(an.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,sn.set(s,un(sn.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(cn(e,r),4&t&&-1<on.indexOf(e)){for(;null!==a;){var s=Ba(a);if(null!==s&&Jt(s),null===(s=Sn(e,t,n,r))&&ga(e,t,r,kn,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else ga(e,t,r,null,n)}}var kn=null;function Sn(e,t,n,r){if(kn=null,null!==(e=Ua(e=Je(r))))if(null===(t=ht(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=yt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return kn=e,null}function Cn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Et()){case Nt:return 1;case jt:return 4;case Tt:case Mt:return 16;case _t:return 536870912;default:return 16}default:return 16}}var En=null,Nn=null,jn=null;function Tn(){if(jn)return jn;var e,t,n=Nn,r=n.length,a="value"in En?En.value:En.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return jn=a.slice(e,1<t?1-t:void 0)}function Mn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function _n(){return!0}function Ln(){return!1}function qn(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?_n:Ln,this.isPropagationStopped=Ln,this}return ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=_n)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=_n)},persist:function(){},isPersistent:_n}),t}var On,Fn,Rn,Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},In=qn(Pn),Dn=ue({},Pn,{view:0,detail:0}),zn=qn(Dn),Wn=ue({},Dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rn&&(Rn&&"mousemove"===e.type?(On=e.screenX-Rn.screenX,Fn=e.screenY-Rn.screenY):Fn=On=0,Rn=e),On)},movementY:function(e){return"movementY"in e?e.movementY:Fn}}),An=qn(Wn),$n=qn(ue({},Wn,{dataTransfer:0})),Qn=qn(ue({},Dn,{relatedTarget:0})),Vn=qn(ue({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0})),Un=ue({},Pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bn=qn(Un),Hn=qn(ue({},Pn,{data:0})),Jn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Gn[e])&&!!t[e]}function Xn(){return Yn}var Zn=ue({},Dn,{key:function(e){if(e.key){var t=Jn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Mn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xn,charCode:function(e){return"keypress"===e.type?Mn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Mn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),er=qn(Zn),tr=qn(ue({},Wn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),nr=qn(ue({},Dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xn})),rr=qn(ue({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0})),ar=ue({},Wn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sr=qn(ar),ir=[9,13,27,32],lr=I&&"CompositionEvent"in window,or=null;I&&"documentMode"in document&&(or=document.documentMode);var cr=I&&"TextEvent"in window&&!or,ur=I&&(!lr||or&&8<or&&11>=or),dr=String.fromCharCode(32),fr=!1;function pr(e,t){switch(e){case"keyup":return-1!==ir.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var hr=!1;var yr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!yr[e.type]:"textarea"===t}function br(e,t,n,r){Ze(r),0<(t=va(t,"onChange")).length&&(n=new In("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var vr=null,xr=null;function wr(e){da(e,0)}function kr(e){if(xe(Ha(e)))return e}function Sr(e,t){if("change"===e)return t}var Cr=!1;if(I){var Er;if(I){var Nr="oninput"in document;if(!Nr){var jr=document.createElement("div");jr.setAttribute("oninput","return;"),Nr="function"==typeof jr.oninput}Er=Nr}else Er=!1;Cr=Er&&(!document.documentMode||9<document.documentMode)}function Tr(){vr&&(vr.detachEvent("onpropertychange",Mr),xr=vr=null)}function Mr(e){if("value"===e.propertyName&&kr(xr)){var t=[];br(t,xr,e,Je(e)),at(wr,t)}}function _r(e,t,n){"focusin"===e?(Tr(),xr=n,(vr=t).attachEvent("onpropertychange",Mr)):"focusout"===e&&Tr()}function Lr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return kr(xr)}function qr(e,t){if("click"===e)return kr(t)}function Or(e,t){if("input"===e||"change"===e)return kr(t)}var Fr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Rr(e,t){if(Fr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!D.call(t,a)||!Fr(e[a],t[a]))return!1}return!0}function Pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ir(e,t){var n,r=Pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Pr(r)}}function Dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function zr(){for(var e=window,t=we();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=we((e=t.contentWindow).document)}return t}function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Ar(e){var t=zr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Dr(n.ownerDocument.documentElement,n)){if(null!==r&&Wr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=Ir(n,s);var i=Ir(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $r=I&&"documentMode"in document&&11>=document.documentMode,Qr=null,Vr=null,Ur=null,Br=!1;function Hr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Br||null==Qr||Qr!==we(r)||("selectionStart"in(r=Qr)&&Wr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Ur&&Rr(Ur,r)||(Ur=r,0<(r=va(Vr,"onSelect")).length&&(t=new In("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qr)))}function Jr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kr={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionend:Jr("Transition","TransitionEnd")},Gr={},Yr={};function Xr(e){if(Gr[e])return Gr[e];if(!Kr[e])return e;var t,n=Kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Yr)return Gr[e]=n[t];return e}I&&(Yr=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);var Zr=Xr("animationend"),ea=Xr("animationiteration"),ta=Xr("animationstart"),na=Xr("transitionend"),ra=new Map,aa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sa(e,t){ra.set(e,t),R(t,[e])}for(var ia=0;ia<aa.length;ia++){var la=aa[ia];sa(la.toLowerCase(),"on"+(la[0].toUpperCase()+la.slice(1)))}sa(Zr,"onAnimationEnd"),sa(ea,"onAnimationIteration"),sa(ta,"onAnimationStart"),sa("dblclick","onDoubleClick"),sa("focusin","onFocus"),sa("focusout","onBlur"),sa(na,"onTransitionEnd"),P("onMouseEnter",["mouseout","mouseover"]),P("onMouseLeave",["mouseout","mouseover"]),P("onPointerEnter",["pointerout","pointerover"]),P("onPointerLeave",["pointerout","pointerover"]),R("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),R("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),R("onBeforeInput",["compositionend","keypress","textInput","paste"]),R("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),R("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),R("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ca=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function ua(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,s,i,l,o){if(mt.apply(this,arguments),ct){if(!ct)throw Error(q(198));var c=ut;ct=!1,ut=null,dt||(dt=!0,ft=c)}}(r,t,void 0,e),e.currentTarget=null}function da(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==s&&a.isPropagationStopped())break e;ua(a,l,c),s=o}else for(i=0;i<r.length;i++){if(o=(l=r[i]).instance,c=l.currentTarget,l=l.listener,o!==s&&a.isPropagationStopped())break e;ua(a,l,c),s=o}}}if(dt)throw e=ft,dt=!1,ft=null,e}function fa(e,t){var n=t[$a];void 0===n&&(n=t[$a]=new Set);var r=e+"__bubble";n.has(r)||(ya(t,e,2,!1),n.add(r))}function pa(e,t,n){var r=0;t&&(r|=4),ya(n,e,r,t)}var ma="_reactListening"+Math.random().toString(36).slice(2);function ha(e){if(!e[ma]){e[ma]=!0,O.forEach(function(t){"selectionchange"!==t&&(ca.has(t)||pa(t,!1,e),pa(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ma]||(t[ma]=!0,pa("selectionchange",!1,t))}}function ya(e,t,n,r){switch(Cn(t)){case 1:var a=vn;break;case 4:a=xn;break;default:a=wn}n=a.bind(null,t,n,e),a=void 0,!it||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ga(e,t,n,r,a){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===a||8===o.nodeType&&o.parentNode===a))return;i=i.return}for(;null!==l;){if(null===(i=Ua(l)))return;if(5===(o=i.tag)||6===o){r=s=i;continue e}l=l.parentNode}}r=r.return}at(function(){var r=s,a=Je(n),i=[];e:{var l=ra.get(e);if(void 0!==l){var o=In,c=e;switch(e){case"keypress":if(0===Mn(n))break e;case"keydown":case"keyup":o=er;break;case"focusin":c="focus",o=Qn;break;case"focusout":c="blur",o=Qn;break;case"beforeblur":case"afterblur":o=Qn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=An;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=$n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=nr;break;case Zr:case ea:case ta:o=Vn;break;case na:o=rr;break;case"scroll":o=zn;break;case"wheel":o=sr;break;case"copy":case"cut":case"paste":o=Bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=tr}var u=!!(4&t),d=!u&&"scroll"===e,f=u?null!==l?l+"Capture":null:l;u=[];for(var p,m=r;null!==m;){var h=(p=m).stateNode;if(5===p.tag&&null!==h&&(p=h,null!==f&&(null!=(h=st(m,f))&&u.push(ba(m,h,p)))),d)break;m=m.return}0<u.length&&(l=new o(l,c,null,n,a),i.push({event:l,listeners:u}))}}if(!(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===He||!(c=n.relatedTarget||n.fromElement)||!Ua(c)&&!c[Aa])&&(o||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ua(c):null)&&(c!==(d=ht(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=r),o!==c)){if(u=An,h="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=tr,h="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==o?l:Ha(o),p=null==c?l:Ha(c),(l=new u(h,m+"leave",o,n,a)).target=d,l.relatedTarget=p,h=null,Ua(a)===r&&((u=new u(f,m+"enter",c,n,a)).target=p,u.relatedTarget=d,h=u),d=h,o&&c)e:{for(f=c,m=0,p=u=o;p;p=xa(p))m++;for(p=0,h=f;h;h=xa(h))p++;for(;0<m-p;)u=xa(u),m--;for(;0<p-m;)f=xa(f),p--;for(;m--;){if(u===f||null!==f&&u===f.alternate)break e;u=xa(u),f=xa(f)}u=null}else u=null;null!==o&&wa(i,l,o,u,!1),null!==c&&null!==d&&wa(i,d,c,u,!0)}if("select"===(o=(l=r?Ha(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var y=Sr;else if(gr(l))if(Cr)y=Or;else{y=Lr;var g=_r}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(y=qr);switch(y&&(y=y(e,r))?br(i,y,n,a):(g&&g(e,l,r),"focusout"===e&&(g=l._wrapperState)&&g.controlled&&"number"===l.type&&je(l,"number",l.value)),g=r?Ha(r):window,e){case"focusin":(gr(g)||"true"===g.contentEditable)&&(Qr=g,Vr=r,Ur=null);break;case"focusout":Ur=Vr=Qr=null;break;case"mousedown":Br=!0;break;case"contextmenu":case"mouseup":case"dragend":Br=!1,Hr(i,n,a);break;case"selectionchange":if($r)break;case"keydown":case"keyup":Hr(i,n,a)}var b;if(lr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else hr?pr(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(ur&&"ko"!==n.locale&&(hr||"onCompositionStart"!==v?"onCompositionEnd"===v&&hr&&(b=Tn()):(Nn="value"in(En=a)?En.value:En.textContent,hr=!0)),0<(g=va(r,v)).length&&(v=new Hn(v,e,null,n,a),i.push({event:v,listeners:g}),b?v.data=b:null!==(b=mr(n))&&(v.data=b))),(b=cr?function(e,t){switch(e){case"compositionend":return mr(t);case"keypress":return 32!==t.which?null:(fr=!0,dr);case"textInput":return(e=t.data)===dr&&fr?null:e;default:return null}}(e,n):function(e,t){if(hr)return"compositionend"===e||!lr&&pr(e,t)?(e=Tn(),jn=Nn=En=null,hr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ur&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=va(r,"onBeforeInput")).length&&(a=new Hn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=b))}da(i,t)})}function ba(e,t,n){return{instance:e,listener:t,currentTarget:n}}function va(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=st(e,n))&&r.unshift(ba(e,s,a)),null!=(s=st(e,t))&&r.push(ba(e,s,a))),e=e.return}return r}function xa(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function wa(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var l=n,o=l.alternate,c=l.stateNode;if(null!==o&&o===r)break;5===l.tag&&null!==c&&(l=c,a?null!=(o=st(n,s))&&i.unshift(ba(n,o,l)):a||null!=(o=st(n,s))&&i.push(ba(n,o,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var ka=/\r\n?/g,Sa=/\u0000|\uFFFD/g;function Ca(e){return("string"==typeof e?e:""+e).replace(ka,"\n").replace(Sa,"")}function Ea(e,t,n){if(t=Ca(t),Ca(e)!==t&&n)throw Error(q(425))}function Na(){}var ja=null,Ta=null;function Ma(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _a="function"==typeof setTimeout?setTimeout:void 0,La="function"==typeof clearTimeout?clearTimeout:void 0,qa="function"==typeof Promise?Promise:void 0,Oa="function"==typeof queueMicrotask?queueMicrotask:void 0!==qa?function(e){return qa.resolve(null).then(e).catch(Fa)}:_a;function Fa(e){setTimeout(function(){throw e})}function Ra(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void yn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);yn(t)}function Pa(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Ia(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Da=Math.random().toString(36).slice(2),za="__reactFiber$"+Da,Wa="__reactProps$"+Da,Aa="__reactContainer$"+Da,$a="__reactEvents$"+Da,Qa="__reactListeners$"+Da,Va="__reactHandles$"+Da;function Ua(e){var t=e[za];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Aa]||n[za]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ia(e);null!==e;){if(n=e[za])return n;e=Ia(e)}return t}n=(e=n).parentNode}return null}function Ba(e){return!(e=e[za]||e[Aa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ha(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(q(33))}function Ja(e){return e[Wa]||null}var Ka=[],Ga=-1;function Ya(e){return{current:e}}function Xa(e){0>Ga||(e.current=Ka[Ga],Ka[Ga]=null,Ga--)}function Za(e,t){Ga++,Ka[Ga]=e.current,e.current=t}var es={},ts=Ya(es),ns=Ya(!1),rs=es;function as(e,t){var n=e.type.contextTypes;if(!n)return es;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ss(e){return null!=(e=e.childContextTypes)}function is(){Xa(ns),Xa(ts)}function ls(e,t,n){if(ts.current!==es)throw Error(q(168));Za(ts,t),Za(ns,n)}function os(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(q(108,ye(e)||"Unknown",a));return ue({},n,r)}function cs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||es,rs=ts.current,Za(ts,e),Za(ns,ns.current),!0}function us(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=os(e,t,rs),r.__reactInternalMemoizedMergedChildContext=e,Xa(ns),Xa(ts),Za(ts,e)):Xa(ns),Za(ns,n)}var ds=null,fs=!1,ps=!1;function ms(e){null===ds?ds=[e]:ds.push(e)}function hs(){if(!ps&&null!==ds){ps=!0;var e=0,t=Bt;try{var n=ds;for(Bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ds=null,fs=!1}catch(a){throw null!==ds&&(ds=ds.slice(e+1)),xt(Nt,hs),a}finally{Bt=t,ps=!1}}return null}var ys=[],gs=0,bs=null,vs=0,xs=[],ws=0,ks=null,Ss=1,Cs="";function Es(e,t){ys[gs++]=vs,ys[gs++]=bs,bs=e,vs=t}function Ns(e,t,n){xs[ws++]=Ss,xs[ws++]=Cs,xs[ws++]=ks,ks=e;var r=Ss;e=Cs;var a=32-Ot(r)-1;r&=~(1<<a),n+=1;var s=32-Ot(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Ss=1<<32-Ot(t)+a|n<<a|r,Cs=s+e}else Ss=1<<s|n<<a|r,Cs=e}function js(e){null!==e.return&&(Es(e,1),Ns(e,1,0))}function Ts(e){for(;e===bs;)bs=ys[--gs],ys[gs]=null,vs=ys[--gs],ys[gs]=null;for(;e===ks;)ks=xs[--ws],xs[ws]=null,Cs=xs[--ws],xs[ws]=null,Ss=xs[--ws],xs[ws]=null}var Ms=null,_s=null,Ls=!1,qs=null;function Os(e,t){var n=ru(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Fs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ms=e,_s=Pa(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ms=e,_s=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ks?{id:Ss,overflow:Cs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=ru(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ms=e,_s=null,!0);default:return!1}}function Rs(e){return!(!(1&e.mode)||128&e.flags)}function Ps(e){if(Ls){var t=_s;if(t){var n=t;if(!Fs(e,t)){if(Rs(e))throw Error(q(418));t=Pa(n.nextSibling);var r=Ms;t&&Fs(e,t)?Os(r,n):(e.flags=-4097&e.flags|2,Ls=!1,Ms=e)}}else{if(Rs(e))throw Error(q(418));e.flags=-4097&e.flags|2,Ls=!1,Ms=e}}}function Is(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ms=e}function Ds(e){if(e!==Ms)return!1;if(!Ls)return Is(e),Ls=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Ma(e.type,e.memoizedProps)),t&&(t=_s)){if(Rs(e))throw zs(),Error(q(418));for(;t;)Os(e,t),t=Pa(t.nextSibling)}if(Is(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){_s=Pa(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}_s=null}}else _s=Ms?Pa(e.stateNode.nextSibling):null;return!0}function zs(){for(var e=_s;e;)e=Pa(e.nextSibling)}function Ws(){_s=Ms=null,Ls=!1}function As(e){null===qs?qs=[e]:qs.push(e)}var $s=H.ReactCurrentBatchConfig;function Qs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var a=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=a.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function Vs(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Us(e){return(0,e._init)(e._payload)}function Bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=su(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=cu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function o(e,t,n,r){var s=n.type;return s===G?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===se&&Us(s)===t.type)?((r=a(t,n.props)).ref=Qs(e,t,n),r.return=e,r):((r=iu(n.type,n.key,n.props,null,e.mode,r)).ref=Qs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=uu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=lu(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=cu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case J:return(n=iu(t.type,t.key,t.props,null,e.mode,n)).ref=Qs(e,null,t),n.return=e,n;case K:return(t=uu(t,e.mode,n)).return=e,t;case se:return d(e,(0,t._init)(t._payload),n)}if(Te(t)||oe(t))return(t=lu(t,e.mode,n,null)).return=e,t;Vs(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==a?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case J:return n.key===a?o(e,t,n,r):null;case K:return n.key===a?c(e,t,n,r):null;case se:return f(e,t,(a=n._init)(n._payload),r)}if(Te(n)||oe(n))return null!==a?null:u(e,t,n,r,null);Vs(e,n)}return null}function p(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case J:return o(t,e=e.get(null===r.key?n:r.key)||null,r,a);case K:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case se:return p(e,t,n,(0,r._init)(r._payload),a)}if(Te(r)||oe(r))return u(t,e=e.get(n)||null,r,a,null);Vs(t,r)}return null}return function l(o,c,u,m){if("object"==typeof u&&null!==u&&u.type===G&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case J:e:{for(var h=u.key,y=c;null!==y;){if(y.key===h){if((h=u.type)===G){if(7===y.tag){n(o,y.sibling),(c=a(y,u.props.children)).return=o,o=c;break e}}else if(y.elementType===h||"object"==typeof h&&null!==h&&h.$$typeof===se&&Us(h)===y.type){n(o,y.sibling),(c=a(y,u.props)).ref=Qs(o,y,u),c.return=o,o=c;break e}n(o,y);break}t(o,y),y=y.sibling}u.type===G?((c=lu(u.props.children,o.mode,m,u.key)).return=o,o=c):((m=iu(u.type,u.key,u.props,null,o.mode,m)).ref=Qs(o,c,u),m.return=o,o=m)}return i(o);case K:e:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(o,c.sibling),(c=a(c,u.children||[])).return=o,o=c;break e}n(o,c);break}t(o,c),c=c.sibling}(c=uu(u,o.mode,m)).return=o,o=c}return i(o);case se:return l(o,c,(y=u._init)(u._payload),m)}if(Te(u))return function(a,i,l,o){for(var c=null,u=null,m=i,h=i=0,y=null;null!==m&&h<l.length;h++){m.index>h?(y=m,m=null):y=m.sibling;var g=f(a,m,l[h],o);if(null===g){null===m&&(m=y);break}e&&m&&null===g.alternate&&t(a,m),i=s(g,i,h),null===u?c=g:u.sibling=g,u=g,m=y}if(h===l.length)return n(a,m),Ls&&Es(a,h),c;if(null===m){for(;h<l.length;h++)null!==(m=d(a,l[h],o))&&(i=s(m,i,h),null===u?c=m:u.sibling=m,u=m);return Ls&&Es(a,h),c}for(m=r(a,m);h<l.length;h++)null!==(y=p(m,a,h,l[h],o))&&(e&&null!==y.alternate&&m.delete(null===y.key?h:y.key),i=s(y,i,h),null===u?c=y:u.sibling=y,u=y);return e&&m.forEach(function(e){return t(a,e)}),Ls&&Es(a,h),c}(o,c,u,m);if(oe(u))return function(a,i,l,o){var c=oe(l);if("function"!=typeof c)throw Error(q(150));if(null==(l=c.call(l)))throw Error(q(151));for(var u=c=null,m=i,h=i=0,y=null,g=l.next();null!==m&&!g.done;h++,g=l.next()){m.index>h?(y=m,m=null):y=m.sibling;var b=f(a,m,g.value,o);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(a,m),i=s(b,i,h),null===u?c=b:u.sibling=b,u=b,m=y}if(g.done)return n(a,m),Ls&&Es(a,h),c;if(null===m){for(;!g.done;h++,g=l.next())null!==(g=d(a,g.value,o))&&(i=s(g,i,h),null===u?c=g:u.sibling=g,u=g);return Ls&&Es(a,h),c}for(m=r(a,m);!g.done;h++,g=l.next())null!==(g=p(m,a,h,g.value,o))&&(e&&null!==g.alternate&&m.delete(null===g.key?h:g.key),i=s(g,i,h),null===u?c=g:u.sibling=g,u=g);return e&&m.forEach(function(e){return t(a,e)}),Ls&&Es(a,h),c}(o,c,u,m);Vs(o,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(o,c.sibling),(c=a(c,u)).return=o,o=c):(n(o,c),(c=cu(u,o.mode,m)).return=o,o=c),i(o)):n(o,c)}}var Hs=Bs(!0),Js=Bs(!1),Ks=Ya(null),Gs=null,Ys=null,Xs=null;function Zs(){Xs=Ys=Gs=null}function ei(e){var t=Ks.current;Xa(Ks),e._currentValue=t}function ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ni(e,t){Gs=e,Xs=Ys=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Vl=!0),e.firstContext=null)}function ri(e){var t=e._currentValue;if(Xs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ys){if(null===Gs)throw Error(q(308));Ys=e,Gs.dependencies={lanes:0,firstContext:e}}else Ys=Ys.next=e;return t}var ai=null;function si(e){null===ai?ai=[e]:ai.push(e)}function ii(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,si(t)):(n.next=a.next,a.next=n),t.interleaved=n,li(e,r)}function li(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var oi=!1;function ci(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ui(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function di(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&ec){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,li(e,n)}return null===(a=r.interleaved)?(t.next=t,si(r)):(t.next=a.next,a.next=t),r.interleaved=t,li(e,n)}function pi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ut(e,n)}}function mi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hi(e,t,n,r){var a=e.updateQueue;oi=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?s=c:i.next=c,i=o;var u=e.alternate;null!==u&&((l=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===l?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=o))}if(null!==s){var d=a.baseState;for(i=0,u=c=o=null,l=s;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,h=l;switch(f=t,p=n,h.tag){case 1:if("function"==typeof(m=h.payload)){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=h.payload)?m.call(p,d,f):m))break e;d=ue({},d,f);break e;case 2:oi=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===u?(c=u=p,o=d):u=u.next=p,i|=f;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(f=l).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===u&&(o=d),a.baseState=o,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);oc|=i,e.lanes=i,e.memoizedState=d}}function yi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!=typeof a)throw Error(q(191,a));a.call(r)}}}var gi={},bi=Ya(gi),vi=Ya(gi),xi=Ya(gi);function wi(e){if(e===gi)throw Error(q(174));return e}function ki(e,t){switch(Za(xi,t),Za(vi,e),Za(bi,gi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Re(null,"");break;default:t=Re(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Xa(bi),Za(bi,t)}function Si(){Xa(bi),Xa(vi),Xa(xi)}function Ci(e){wi(xi.current);var t=wi(bi.current),n=Re(t,e.type);t!==n&&(Za(vi,e),Za(bi,n))}function Ei(e){vi.current===e&&(Xa(bi),Xa(vi))}var Ni=Ya(0);function ji(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ti=[];function Mi(){for(var e=0;e<Ti.length;e++)Ti[e]._workInProgressVersionPrimary=null;Ti.length=0}var _i=H.ReactCurrentDispatcher,Li=H.ReactCurrentBatchConfig,qi=0,Oi=null,Fi=null,Ri=null,Pi=!1,Ii=!1,Di=0,zi=0;function Wi(){throw Error(q(321))}function Ai(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fr(e[n],t[n]))return!1;return!0}function $i(e,t,n,r,a,s){if(qi=s,Oi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_i.current=null===e||null===e.memoizedState?El:Nl,e=n(r,a),Ii){s=0;do{if(Ii=!1,Di=0,25<=s)throw Error(q(301));s+=1,Ri=Fi=null,t.updateQueue=null,_i.current=jl,e=n(r,a)}while(Ii)}if(_i.current=Cl,t=null!==Fi&&null!==Fi.next,qi=0,Ri=Fi=Oi=null,Pi=!1,t)throw Error(q(300));return e}function Qi(){var e=0!==Di;return Di=0,e}function Vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ri?Oi.memoizedState=Ri=e:Ri=Ri.next=e,Ri}function Ui(){if(null===Fi){var e=Oi.alternate;e=null!==e?e.memoizedState:null}else e=Fi.next;var t=null===Ri?Oi.memoizedState:Ri.next;if(null!==t)Ri=t,Fi=e;else{if(null===e)throw Error(q(310));e={memoizedState:(Fi=e).memoizedState,baseState:Fi.baseState,baseQueue:Fi.baseQueue,queue:Fi.queue,next:null},null===Ri?Oi.memoizedState=Ri=e:Ri=Ri.next=e}return Ri}function Bi(e,t){return"function"==typeof t?t(e):t}function Hi(e){var t=Ui(),n=t.queue;if(null===n)throw Error(q(311));n.lastRenderedReducer=e;var r=Fi,a=r.baseQueue,s=n.pending;if(null!==s){if(null!==a){var i=a.next;a.next=s.next,s.next=i}r.baseQueue=a=s,n.pending=null}if(null!==a){s=a.next,r=r.baseState;var l=i=null,o=null,c=s;do{var u=c.lane;if((qi&u)===u)null!==o&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===o?(l=o=d,i=r):o=o.next=d,Oi.lanes|=u,oc|=u}c=c.next}while(null!==c&&c!==s);null===o?i=r:o.next=l,Fr(r,t.memoizedState)||(Vl=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=o,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{s=a.lane,Oi.lanes|=s,oc|=s,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ji(e){var t=Ui(),n=t.queue;if(null===n)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{s=e(s,i.action),i=i.next}while(i!==a);Fr(s,t.memoizedState)||(Vl=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ki(){}function Gi(e,t){var n=Oi,r=Ui(),a=t(),s=!Fr(r.memoizedState,a);if(s&&(r.memoizedState=a,Vl=!0),r=r.queue,ol(Zi.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==Ri&&1&Ri.memoizedState.tag){if(n.flags|=2048,rl(9,Xi.bind(null,n,r,a,t),void 0,null),null===tc)throw Error(q(349));30&qi||Yi(n,t,a)}return a}function Yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Oi.updateQueue)?(t={lastEffect:null,stores:null},Oi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xi(e,t,n,r){t.value=n,t.getSnapshot=r,el(t)&&tl(e)}function Zi(e,t,n){return n(function(){el(t)&&tl(e)})}function el(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fr(e,n)}catch(r){return!0}}function tl(e){var t=li(e,1);null!==t&&Tc(t,e,1,-1)}function nl(e){var t=Vi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:e},t.queue=e,e=e.dispatch=xl.bind(null,Oi,e),[t.memoizedState,e]}function rl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Oi.updateQueue)?(t={lastEffect:null,stores:null},Oi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function al(){return Ui().memoizedState}function sl(e,t,n,r){var a=Vi();Oi.flags|=e,a.memoizedState=rl(1|t,n,void 0,void 0===r?null:r)}function il(e,t,n,r){var a=Ui();r=void 0===r?null:r;var s=void 0;if(null!==Fi){var i=Fi.memoizedState;if(s=i.destroy,null!==r&&Ai(r,i.deps))return void(a.memoizedState=rl(t,n,s,r))}Oi.flags|=e,a.memoizedState=rl(1|t,n,s,r)}function ll(e,t){return sl(8390656,8,e,t)}function ol(e,t){return il(2048,8,e,t)}function cl(e,t){return il(4,2,e,t)}function ul(e,t){return il(4,4,e,t)}function dl(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function fl(e,t,n){return n=null!=n?n.concat([e]):null,il(4,4,dl.bind(null,t,e),n)}function pl(){}function ml(e,t){var n=Ui();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ai(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hl(e,t){var n=Ui();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ai(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function yl(e,t,n){return 21&qi?(Fr(n,t)||(n=$t(),Oi.lanes|=n,oc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vl=!0),e.memoizedState=n)}function gl(e,t){var n=Bt;Bt=0!==n&&4>n?n:4,e(!0);var r=Li.transition;Li.transition={};try{e(!1),t()}finally{Bt=n,Li.transition=r}}function bl(){return Ui().memoizedState}function vl(e,t,n){var r=jc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wl(e))kl(t,n);else if(null!==(n=ii(e,t,n,r))){Tc(n,e,r,Nc()),Sl(n,t,r)}}function xl(e,t,n){var r=jc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wl(e))kl(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=s(i,n);if(a.hasEagerState=!0,a.eagerState=l,Fr(l,i)){var o=t.interleaved;return null===o?(a.next=a,si(t)):(a.next=o.next,o.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=ii(e,t,a,r))&&(Tc(n,e,r,a=Nc()),Sl(n,t,r))}}function wl(e){var t=e.alternate;return e===Oi||null!==t&&t===Oi}function kl(e,t){Ii=Pi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Sl(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ut(e,n)}}var Cl={readContext:ri,useCallback:Wi,useContext:Wi,useEffect:Wi,useImperativeHandle:Wi,useInsertionEffect:Wi,useLayoutEffect:Wi,useMemo:Wi,useReducer:Wi,useRef:Wi,useState:Wi,useDebugValue:Wi,useDeferredValue:Wi,useTransition:Wi,useMutableSource:Wi,useSyncExternalStore:Wi,useId:Wi,unstable_isNewReconciler:!1},El={readContext:ri,useCallback:function(e,t){return Vi().memoizedState=[e,void 0===t?null:t],e},useContext:ri,useEffect:ll,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,sl(4194308,4,dl.bind(null,t,e),n)},useLayoutEffect:function(e,t){return sl(4194308,4,e,t)},useInsertionEffect:function(e,t){return sl(4,2,e,t)},useMemo:function(e,t){var n=Vi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Vi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vl.bind(null,Oi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Vi().memoizedState=e},useState:nl,useDebugValue:pl,useDeferredValue:function(e){return Vi().memoizedState=e},useTransition:function(){var e=nl(!1),t=e[0];return e=gl.bind(null,e[1]),Vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Oi,a=Vi();if(Ls){if(void 0===n)throw Error(q(407));n=n()}else{if(n=t(),null===tc)throw Error(q(349));30&qi||Yi(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,ll(Zi.bind(null,r,s,e),[e]),r.flags|=2048,rl(9,Xi.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Vi(),t=tc.identifierPrefix;if(Ls){var n=Cs;t=":"+t+"R"+(n=(Ss&~(1<<32-Ot(Ss)-1)).toString(32)+n),0<(n=Di++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=zi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nl={readContext:ri,useCallback:ml,useContext:ri,useEffect:ol,useImperativeHandle:fl,useInsertionEffect:cl,useLayoutEffect:ul,useMemo:hl,useReducer:Hi,useRef:al,useState:function(){return Hi(Bi)},useDebugValue:pl,useDeferredValue:function(e){return yl(Ui(),Fi.memoizedState,e)},useTransition:function(){return[Hi(Bi)[0],Ui().memoizedState]},useMutableSource:Ki,useSyncExternalStore:Gi,useId:bl,unstable_isNewReconciler:!1},jl={readContext:ri,useCallback:ml,useContext:ri,useEffect:ol,useImperativeHandle:fl,useInsertionEffect:cl,useLayoutEffect:ul,useMemo:hl,useReducer:Ji,useRef:al,useState:function(){return Ji(Bi)},useDebugValue:pl,useDeferredValue:function(e){var t=Ui();return null===Fi?t.memoizedState=e:yl(t,Fi.memoizedState,e)},useTransition:function(){return[Ji(Bi)[0],Ui().memoizedState]},useMutableSource:Ki,useSyncExternalStore:Gi,useId:bl,unstable_isNewReconciler:!1};function Tl(e,t){if(e&&e.defaultProps){for(var n in t=ue({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function Ml(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:ue({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var _l={isMounted:function(e){return!!(e=e._reactInternals)&&ht(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nc(),a=jc(e),s=di(r,a);s.payload=t,null!=n&&(s.callback=n),null!==(t=fi(e,s,a))&&(Tc(t,e,a,r),pi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nc(),a=jc(e),s=di(r,a);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=fi(e,s,a))&&(Tc(t,e,a,r),pi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nc(),r=jc(e),a=di(n,r);a.tag=2,null!=t&&(a.callback=t),null!==(t=fi(e,a,r))&&(Tc(t,e,r,n),pi(t,e,r))}};function Ll(e,t,n,r,a,s,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!Rr(n,r)||!Rr(a,s))}function ql(e,t,n){var r=!1,a=es,s=t.contextType;return"object"==typeof s&&null!==s?s=ri(s):(a=ss(t)?rs:ts.current,s=(r=null!=(r=t.contextTypes))?as(e,a):es),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_l,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ol(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_l.enqueueReplaceState(t,t.state,null)}function Fl(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},ci(e);var s=t.contextType;"object"==typeof s&&null!==s?a.context=ri(s):(s=ss(t)?rs:ts.current,a.context=as(e,s)),a.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(Ml(e,t,s,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&_l.enqueueReplaceState(a,a.state,null),hi(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function Rl(e,t){try{var n="",r=t;do{n+=me(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function Pl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var Il="function"==typeof WeakMap?WeakMap:Map;function Dl(e,t,n){(n=di(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){yc||(yc=!0,gc=r)},n}function zl(e,t,n){(n=di(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===bc?bc=new Set([this]):bc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Wl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Il;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Yc.bind(null,e,t,n),t.then(e,e))}function Al(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function $l(e,t,n,r,a){return 1&e.mode?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=di(-1,1)).tag=2,fi(n,t,1))),n.lanes|=1),e)}var Ql=H.ReactCurrentOwner,Vl=!1;function Ul(e,t,n,r){t.child=null===e?Js(t,null,n,r):Hs(t,e.child,n,r)}function Bl(e,t,n,r,a){n=n.render;var s=t.ref;return ni(t,a),r=$i(e,t,n,r,s,a),n=Qi(),null===e||Vl?(Ls&&n&&js(t),t.flags|=1,Ul(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,yo(e,t,a))}function Hl(e,t,n,r,a){if(null===e){var s=n.type;return"function"!=typeof s||au(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=iu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Jl(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:Rr)(i,r)&&e.ref===t.ref)return yo(e,t,a)}return t.flags|=1,(e=su(s,r)).ref=t.ref,e.return=t,t.child=e}function Jl(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(Rr(s,r)&&e.ref===t.ref){if(Vl=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,yo(e,t,a);131072&e.flags&&(Vl=!0)}}return Yl(e,t,n,r,a)}function Kl(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Za(sc,ac),ac|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Za(sc,ac),ac|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Za(sc,ac),ac|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Za(sc,ac),ac|=r;return Ul(e,t,a,n),t.child}function Gl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yl(e,t,n,r,a){var s=ss(n)?rs:ts.current;return s=as(t,s),ni(t,a),n=$i(e,t,n,r,s,a),r=Qi(),null===e||Vl?(Ls&&r&&js(t),t.flags|=1,Ul(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,yo(e,t,a))}function Xl(e,t,n,r,a){if(ss(n)){var s=!0;cs(t)}else s=!1;if(ni(t,a),null===t.stateNode)ho(e,t),ql(t,n,r),Fl(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=n.contextType;"object"==typeof c&&null!==c?c=ri(c):c=as(t,c=ss(n)?rs:ts.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(l!==r||o!==c)&&Ol(t,i,r,c),oi=!1;var f=t.memoizedState;i.state=f,hi(t,r,i,a),o=t.memoizedState,l!==r||f!==o||ns.current||oi?("function"==typeof u&&(Ml(t,n,u,r),o=t.memoizedState),(l=oi||Ll(t,n,l,r,f,o,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),i.props=r,i.state=o,i.context=c,r=l):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ui(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Tl(t.type,l),i.props=c,d=t.pendingProps,f=i.context,"object"==typeof(o=n.contextType)&&null!==o?o=ri(o):o=as(t,o=ss(n)?rs:ts.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(l!==d||f!==o)&&Ol(t,i,r,o),oi=!1,f=t.memoizedState,i.state=f,hi(t,r,i,a);var m=t.memoizedState;l!==d||f!==m||ns.current||oi?("function"==typeof p&&(Ml(t,n,p,r),m=t.memoizedState),(c=oi||Ll(t,n,c,r,f,m,o)||!1)?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,o),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,o)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=o,r=c):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Zl(e,t,n,r,s,a)}function Zl(e,t,n,r,a,s){Gl(e,t);var i=!!(128&t.flags);if(!r&&!i)return a&&us(t,n,!1),yo(e,t,s);r=t.stateNode,Ql.current=t;var l=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Hs(t,e.child,null,s),t.child=Hs(t,null,l,s)):Ul(e,t,l,s),t.memoizedState=r.state,a&&us(t,n,!0),t.child}function eo(e){var t=e.stateNode;t.pendingContext?ls(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ls(0,t.context,!1),ki(e,t.containerInfo)}function to(e,t,n,r,a){return Ws(),As(a),t.flags|=256,Ul(e,t,n,r),t.child}var no,ro,ao,so,io={dehydrated:null,treeContext:null,retryLane:0};function lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function oo(e,t,n){var r,a=t.pendingProps,s=Ni.current,i=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Za(Ni,1&s),null===e)return Ps(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,i?(a=t.mode,i=t.child,l={mode:"hidden",children:l},1&a||null===i?i=ou(l,a,0,null):(i.childLanes=0,i.pendingProps=l),e=lu(e,a,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=lo(n),t.memoizedState=io,e):co(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,a,s,i){if(n)return 256&t.flags?(t.flags&=-257,uo(e,t,i,r=Pl(Error(q(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=ou({mode:"visible",children:r.children},a,0,null),(s=lu(s,a,i,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&Hs(t,e.child,null,i),t.child.memoizedState=lo(i),t.memoizedState=io,s);if(!(1&t.mode))return uo(e,t,i,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,uo(e,t,i,r=Pl(s=Error(q(419)),r,void 0))}if(l=0!==(i&e.childLanes),Vl||l){if(null!==(r=tc)){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|i))?0:a)&&a!==s.retryLane&&(s.retryLane=a,li(e,a),Tc(r,e,a,-1))}return Ac(),uo(e,t,i,r=Pl(Error(q(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Zc.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,_s=Pa(a.nextSibling),Ms=t,Ls=!0,qs=null,null!==e&&(xs[ws++]=Ss,xs[ws++]=Cs,xs[ws++]=ks,Ss=e.id,Cs=e.overflow,ks=t),t=co(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,s,n);if(i){i=a.fallback,l=t.mode,r=(s=e.child).sibling;var o={mode:"hidden",children:a.children};return 1&l||t.child===s?(a=su(s,o)).subtreeFlags=14680064&s.subtreeFlags:((a=t.child).childLanes=0,a.pendingProps=o,t.deletions=null),null!==r?i=su(r,i):(i=lu(i,l,n,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,l=null===(l=e.child.memoizedState)?lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=io,a}return e=(i=e.child).sibling,a=su(i,{mode:"visible",children:a.children}),!(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function co(e,t){return(t=ou({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function uo(e,t,n,r){return null!==r&&As(r),Hs(t,e.child,null,n),(e=co(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function fo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ti(e.return,t,n)}function po(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function mo(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(Ul(e,t,r.children,n),2&(r=Ni.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&fo(e,n,t);else if(19===e.tag)fo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Za(Ni,r),1&t.mode)switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ji(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),po(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ji(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}po(t,!0,n,null,s);break;case"together":po(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function ho(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),oc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(q(153));if(null!==t.child){for(n=su(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=su(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function go(e,t){if(!Ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function bo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vo(e,t,n){var r=t.pendingProps;switch(Ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bo(t),null;case 1:case 17:return ss(t.type)&&is(),bo(t),null;case 3:return r=t.stateNode,Si(),Xa(ns),Xa(ts),Mi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==qs&&(qc(qs),qs=null))),ro(e,t),bo(t),null;case 5:Ei(t);var a=wi(xi.current);if(n=t.type,null!==e&&null!=t.stateNode)ao(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(q(166));return bo(t),null}if(e=wi(bi.current),Ds(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[za]=t,r[Wa]=s,e=!!(1&t.mode),n){case"dialog":fa("cancel",r),fa("close",r);break;case"iframe":case"object":case"embed":fa("load",r);break;case"video":case"audio":for(a=0;a<oa.length;a++)fa(oa[a],r);break;case"source":fa("error",r);break;case"img":case"image":case"link":fa("error",r),fa("load",r);break;case"details":fa("toggle",r);break;case"input":Se(r,s),fa("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fa("invalid",r);break;case"textarea":Le(r,s),fa("invalid",r)}for(var i in Ue(n,s),a=null,s)if(s.hasOwnProperty(i)){var l=s[i];"children"===i?"string"==typeof l?r.textContent!==l&&(!0!==s.suppressHydrationWarning&&Ea(r.textContent,l,e),a=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(!0!==s.suppressHydrationWarning&&Ea(r.textContent,l,e),a=["children",""+l]):F.hasOwnProperty(i)&&null!=l&&"onScroll"===i&&fa("scroll",r)}switch(n){case"input":ve(r),Ne(r,s,!0);break;case"textarea":ve(r),Oe(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Na)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{i=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=Fe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),"select"===n&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[za]=t,e[Wa]=r,no(e,t,!1,!1),t.stateNode=e;e:{switch(i=Be(n,r),n){case"dialog":fa("cancel",e),fa("close",e),a=r;break;case"iframe":case"object":case"embed":fa("load",e),a=r;break;case"video":case"audio":for(a=0;a<oa.length;a++)fa(oa[a],e);a=r;break;case"source":fa("error",e),a=r;break;case"img":case"image":case"link":fa("error",e),fa("load",e),a=r;break;case"details":fa("toggle",e),a=r;break;case"input":Se(e,r),a=ke(e,r),fa("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=ue({},r,{value:void 0}),fa("invalid",e);break;case"textarea":Le(e,r),a=_e(e,r),fa("invalid",e)}for(s in Ue(n,a),l=a)if(l.hasOwnProperty(s)){var o=l[s];"style"===s?Qe(e,o):"dangerouslySetInnerHTML"===s?null!=(o=o?o.__html:void 0)&&De(e,o):"children"===s?"string"==typeof o?("textarea"!==n||""!==o)&&ze(e,o):"number"==typeof o&&ze(e,""+o):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(F.hasOwnProperty(s)?null!=o&&"onScroll"===s&&fa("scroll",e):null!=o&&B(e,s,o,i))}switch(n){case"input":ve(e),Ne(e,r,!1);break;case"textarea":ve(e),Oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?Me(e,!!r.multiple,s,!1):null!=r.defaultValue&&Me(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Na)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return bo(t),null;case 6:if(e&&null!=t.stateNode)so(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(q(166));if(n=wi(xi.current),wi(bi.current),Ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[za]=t,(s=r.nodeValue!==n)&&null!==(e=Ms))switch(e.tag){case 3:Ea(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ea(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[za]=t,t.stateNode=r}return bo(t),null;case 13:if(Xa(Ni),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Ls&&null!==_s&&1&t.mode&&!(128&t.flags))zs(),Ws(),t.flags|=98560,s=!1;else if(s=Ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(q(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(q(317));s[za]=t}else Ws(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;bo(t),s=!1}else null!==qs&&(qc(qs),qs=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Ni.current?0===ic&&(ic=3):Ac())),null!==t.updateQueue&&(t.flags|=4),bo(t),null);case 4:return Si(),ro(e,t),null===e&&ha(t.stateNode.containerInfo),bo(t),null;case 10:return ei(t.type._context),bo(t),null;case 19:if(Xa(Ni),null===(s=t.memoizedState))return bo(t),null;if(r=!!(128&t.flags),null===(i=s.rendering))if(r)go(s,!1);else{if(0!==ic||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=ji(e))){for(t.flags|=128,go(s,!1),null!==(r=i.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(i=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Za(Ni,1&Ni.current|2),t.child}e=e.sibling}null!==s.tail&&Ct()>mc&&(t.flags|=128,r=!0,go(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ji(i))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),go(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!Ls)return bo(t),null}else 2*Ct()-s.renderingStartTime>mc&&1073741824!==n&&(t.flags|=128,r=!0,go(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(n=s.last)?n.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ct(),t.sibling=null,n=Ni.current,Za(Ni,r?1&n|2:1&n),t):(bo(t),null);case 22:case 23:return Ic(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&ac)&&(bo(t),6&t.subtreeFlags&&(t.flags|=8192)):bo(t),null;case 24:case 25:return null}throw Error(q(156,t.tag))}function xo(e,t){switch(Ts(t),t.tag){case 1:return ss(t.type)&&is(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Si(),Xa(ns),Xa(ts),Mi(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ei(t),null;case 13:if(Xa(Ni),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(q(340));Ws()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Xa(Ni),null;case 4:return Si(),null;case 10:return ei(t.type._context),null;case 22:case 23:return Ic(),null;default:return null}}no=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ro=function(){},ao=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,wi(bi.current);var s,i=null;switch(n){case"input":a=ke(e,a),r=ke(e,r),i=[];break;case"select":a=ue({},a,{value:void 0}),r=ue({},r,{value:void 0}),i=[];break;case"textarea":a=_e(e,a),r=_e(e,r),i=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=Na)}for(c in Ue(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var l=a[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(F.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var o=r[c];if(l=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&o!==l&&(null!=o||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||o&&o.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in o)o.hasOwnProperty(s)&&l[s]!==o[s]&&(n||(n={}),n[s]=o[s])}else n||(i||(i=[]),i.push(c,n)),n=o;else"dangerouslySetInnerHTML"===c?(o=o?o.__html:void 0,l=l?l.__html:void 0,null!=o&&l!==o&&(i=i||[]).push(c,o)):"children"===c?"string"!=typeof o&&"number"!=typeof o||(i=i||[]).push(c,""+o):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(F.hasOwnProperty(c)?(null!=o&&"onScroll"===c&&fa("scroll",e),i||l===o||(i=[])):(i=i||[]).push(c,o))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},so=function(e,t,n,r){n!==r&&(t.flags|=4)};var wo=!1,ko=!1,So="function"==typeof WeakSet?WeakSet:Set,Co=null;function Eo(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Gc(e,t,r)}else n.current=null}function No(e,t,n){try{n()}catch(r){Gc(e,t,r)}}var jo=!1;function To(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&No(t,n,s)}a=a.next}while(a!==r)}}function Mo(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function _o(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function Lo(e){var t=e.alternate;null!==t&&(e.alternate=null,Lo(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[za],delete t[Wa],delete t[$a],delete t[Qa],delete t[Va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qo(e){return 5===e.tag||3===e.tag||4===e.tag}function Oo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||qo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Fo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Na));else if(4!==r&&null!==(e=e.child))for(Fo(e,t,n),e=e.sibling;null!==e;)Fo(e,t,n),e=e.sibling}function Ro(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ro(e,t,n),e=e.sibling;null!==e;)Ro(e,t,n),e=e.sibling}var Po=null,Io=!1;function Do(e,t,n){for(n=n.child;null!==n;)zo(e,t,n),n=n.sibling}function zo(e,t,n){if(qt&&"function"==typeof qt.onCommitFiberUnmount)try{qt.onCommitFiberUnmount(Lt,n)}catch(l){}switch(n.tag){case 5:ko||Eo(n,t);case 6:var r=Po,a=Io;Po=null,Do(e,t,n),Io=a,null!==(Po=r)&&(Io?(e=Po,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):Po.removeChild(n.stateNode));break;case 18:null!==Po&&(Io?(e=Po,n=n.stateNode,8===e.nodeType?Ra(e.parentNode,n):1===e.nodeType&&Ra(e,n),yn(e)):Ra(Po,n.stateNode));break;case 4:r=Po,a=Io,Po=n.stateNode.containerInfo,Io=!0,Do(e,t,n),Po=r,Io=a;break;case 0:case 11:case 14:case 15:if(!ko&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(2&s||4&s)&&No(n,t,i),a=a.next}while(a!==r)}Do(e,t,n);break;case 1:if(!ko&&(Eo(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Gc(n,t,l)}Do(e,t,n);break;case 21:Do(e,t,n);break;case 22:1&n.mode?(ko=(r=ko)||null!==n.memoizedState,Do(e,t,n),ko=r):Do(e,t,n);break;default:Do(e,t,n)}}function Wo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new So),t.forEach(function(t){var r=eu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function Ao(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:Po=l.stateNode,Io=!1;break e;case 3:case 4:Po=l.stateNode.containerInfo,Io=!0;break e}l=l.return}if(null===Po)throw Error(q(160));zo(s,i,a),Po=null,Io=!1;var o=a.alternate;null!==o&&(o.return=null),a.return=null}catch(c){Gc(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)$o(t,e),t=t.sibling}function $o(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ao(t,e),Qo(e),4&r){try{To(3,e,e.return),Mo(3,e)}catch(h){Gc(e,e.return,h)}try{To(5,e,e.return)}catch(h){Gc(e,e.return,h)}}break;case 1:Ao(t,e),Qo(e),512&r&&null!==n&&Eo(n,n.return);break;case 5:if(Ao(t,e),Qo(e),512&r&&null!==n&&Eo(n,n.return),32&e.flags){var a=e.stateNode;try{ze(a,"")}catch(h){Gc(e,e.return,h)}}if(4&r&&null!=(a=e.stateNode)){var s=e.memoizedProps,i=null!==n?n.memoizedProps:s,l=e.type,o=e.updateQueue;if(e.updateQueue=null,null!==o)try{"input"===l&&"radio"===s.type&&null!=s.name&&Ce(a,s),Be(l,i);var c=Be(l,s);for(i=0;i<o.length;i+=2){var u=o[i],d=o[i+1];"style"===u?Qe(a,d):"dangerouslySetInnerHTML"===u?De(a,d):"children"===u?ze(a,d):B(a,u,d,c)}switch(l){case"input":Ee(a,s);break;case"textarea":qe(a,s);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?Me(a,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?Me(a,!!s.multiple,s.defaultValue,!0):Me(a,!!s.multiple,s.multiple?[]:"",!1))}a[Wa]=s}catch(h){Gc(e,e.return,h)}}break;case 6:if(Ao(t,e),Qo(e),4&r){if(null===e.stateNode)throw Error(q(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(h){Gc(e,e.return,h)}}break;case 3:if(Ao(t,e),Qo(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{yn(t.containerInfo)}catch(h){Gc(e,e.return,h)}break;case 4:default:Ao(t,e),Qo(e);break;case 13:Ao(t,e),Qo(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(pc=Ct())),4&r&&Wo(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(ko=(c=ko)||u,Ao(t,e),ko=c):Ao(t,e),Qo(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Co=e,u=e.child;null!==u;){for(d=Co=u;null!==Co;){switch(p=(f=Co).child,f.tag){case 0:case 11:case 14:case 15:To(4,f,f.return);break;case 1:Eo(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(h){Gc(r,n,h)}}break;case 5:Eo(f,f.return);break;case 22:if(null!==f.memoizedState){Ho(d);continue}}null!==p?(p.return=f,Co=p):Ho(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{a=d.stateNode,c?"function"==typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,i=null!=(o=d.memoizedProps.style)&&o.hasOwnProperty("display")?o.display:null,l.style.display=$e("display",i))}catch(h){Gc(e,e.return,h)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(h){Gc(e,e.return,h)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ao(t,e),Qo(e),4&r&&Wo(e);case 21:}}function Qo(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(qo(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(ze(a,""),r.flags&=-33),Ro(e,Oo(e),a);break;case 3:case 4:var s=r.stateNode.containerInfo;Fo(e,Oo(e),s);break;default:throw Error(q(161))}}catch(i){Gc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Vo(e,t,n){Co=e,Uo(e)}function Uo(e,t,n){for(var r=!!(1&e.mode);null!==Co;){var a=Co,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||wo;if(!i){var l=a.alternate,o=null!==l&&null!==l.memoizedState||ko;l=wo;var c=ko;if(wo=i,(ko=o)&&!c)for(Co=a;null!==Co;)o=(i=Co).child,22===i.tag&&null!==i.memoizedState?Jo(a):null!==o?(o.return=i,Co=o):Jo(a);for(;null!==s;)Co=s,Uo(s),s=s.sibling;Co=a,wo=l,ko=c}Bo(e)}else 8772&a.subtreeFlags&&null!==s?(s.return=a,Co=s):Bo(e)}}function Bo(e){for(;null!==Co;){var t=Co;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:ko||Mo(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!ko)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Tl(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&yi(t,s,r);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}yi(t,i,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&n.focus();break;case"img":o.src&&(n.src=o.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&yn(d)}}}break;default:throw Error(q(163))}ko||512&t.flags&&_o(t)}catch(f){Gc(t,t.return,f)}}if(t===e){Co=null;break}if(null!==(n=t.sibling)){n.return=t.return,Co=n;break}Co=t.return}}function Ho(e){for(;null!==Co;){var t=Co;if(t===e){Co=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Co=n;break}Co=t.return}}function Jo(e){for(;null!==Co;){var t=Co;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Mo(4,t)}catch(o){Gc(t,n,o)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(o){Gc(t,a,o)}}var s=t.return;try{_o(t)}catch(o){Gc(t,s,o)}break;case 5:var i=t.return;try{_o(t)}catch(o){Gc(t,i,o)}}}catch(o){Gc(t,t.return,o)}if(t===e){Co=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Co=l;break}Co=t.return}}var Ko,Go=Math.ceil,Yo=H.ReactCurrentDispatcher,Xo=H.ReactCurrentOwner,Zo=H.ReactCurrentBatchConfig,ec=0,tc=null,nc=null,rc=0,ac=0,sc=Ya(0),ic=0,lc=null,oc=0,cc=0,uc=0,dc=null,fc=null,pc=0,mc=1/0,hc=null,yc=!1,gc=null,bc=null,vc=!1,xc=null,wc=0,kc=0,Sc=null,Cc=-1,Ec=0;function Nc(){return 6&ec?Ct():-1!==Cc?Cc:Cc=Ct()}function jc(e){return 1&e.mode?2&ec&&0!==rc?rc&-rc:null!==$s.transition?(0===Ec&&(Ec=$t()),Ec):0!==(e=Bt)?e:e=void 0===(e=window.event)?16:Cn(e.type):1}function Tc(e,t,n,r){if(50<kc)throw kc=0,Sc=null,Error(q(185));Vt(e,n,r),2&ec&&e===tc||(e===tc&&(!(2&ec)&&(cc|=n),4===ic&&Oc(e,rc)),Mc(e,r),1===n&&0===ec&&!(1&t.mode)&&(mc=Ct()+500,fs&&hs()))}function Mc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-Ot(s),l=1<<i,o=a[i];-1===o?0!==(l&n)&&0===(l&r)||(a[i]=Wt(l,t)):o<=t&&(e.expiredLanes|=l),s&=~l}}(e,t);var r=zt(e,e===tc?rc:0);if(0===r)null!==n&&wt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&wt(n),1===t)0===e.tag?function(e){fs=!0,ms(e)}(Fc.bind(null,e)):ms(Fc.bind(null,e)),Oa(function(){!(6&ec)&&hs()}),n=null;else{switch(Ht(r)){case 1:n=Nt;break;case 4:n=jt;break;case 16:default:n=Tt;break;case 536870912:n=_t}n=tu(n,_c.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _c(e,t){if(Cc=-1,Ec=0,6&ec)throw Error(q(327));var n=e.callbackNode;if(Jc()&&e.callbackNode!==n)return null;var r=zt(e,e===tc?rc:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=$c(e,r);else{t=r;var a=ec;ec|=2;var s=Wc();for(tc===e&&rc===t||(hc=null,mc=Ct()+500,Dc(e,t));;)try{Vc();break}catch(l){zc(e,l)}Zs(),Yo.current=s,ec=a,null!==nc?t=0:(tc=null,rc=0,t=ic)}if(0!==t){if(2===t&&(0!==(a=At(e))&&(r=a,t=Lc(e,a))),1===t)throw n=lc,Dc(e,0),Oc(e,r),Mc(e,Ct()),n;if(6===t)Oc(e,r);else{if(a=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!Fr(s(),a))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)||(t=$c(e,r),2===t&&(s=At(e),0!==s&&(r=s,t=Lc(e,s))),1!==t)))throw n=lc,Dc(e,0),Oc(e,r),Mc(e,Ct()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:case 5:Hc(e,fc,hc);break;case 3:if(Oc(e,r),(130023424&r)===r&&10<(t=pc+500-Ct())){if(0!==zt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){Nc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=_a(Hc.bind(null,e,fc,hc),t);break}Hc(e,fc,hc);break;case 4:if(Oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var i=31-Ot(r);s=1<<i,(i=t[i])>a&&(a=i),r&=~s}if(r=a,10<(r=(120>(r=Ct()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Go(r/1960))-r)){e.timeoutHandle=_a(Hc.bind(null,e,fc,hc),r);break}Hc(e,fc,hc);break;default:throw Error(q(329))}}}return Mc(e,Ct()),e.callbackNode===n?_c.bind(null,e):null}function Lc(e,t){var n=dc;return e.current.memoizedState.isDehydrated&&(Dc(e,t).flags|=256),2!==(e=$c(e,t))&&(t=fc,fc=n,null!==t&&qc(t)),e}function qc(e){null===fc?fc=e:fc.push.apply(fc,e)}function Oc(e,t){for(t&=~uc,t&=~cc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ot(t),r=1<<n;e[n]=-1,t&=~r}}function Fc(e){if(6&ec)throw Error(q(327));Jc();var t=zt(e,0);if(!(1&t))return Mc(e,Ct()),null;var n=$c(e,t);if(0!==e.tag&&2===n){var r=At(e);0!==r&&(t=r,n=Lc(e,r))}if(1===n)throw n=lc,Dc(e,0),Oc(e,t),Mc(e,Ct()),n;if(6===n)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hc(e,fc,hc),Mc(e,Ct()),null}function Rc(e,t){var n=ec;ec|=1;try{return e(t)}finally{0===(ec=n)&&(mc=Ct()+500,fs&&hs())}}function Pc(e){null!==xc&&0===xc.tag&&!(6&ec)&&Jc();var t=ec;ec|=1;var n=Zo.transition,r=Bt;try{if(Zo.transition=null,Bt=1,e)return e()}finally{Bt=r,Zo.transition=n,!(6&(ec=t))&&hs()}}function Ic(){ac=sc.current,Xa(sc)}function Dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,La(n)),null!==nc)for(n=nc.return;null!==n;){var r=n;switch(Ts(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&is();break;case 3:Si(),Xa(ns),Xa(ts),Mi();break;case 5:Ei(r);break;case 4:Si();break;case 13:case 19:Xa(Ni);break;case 10:ei(r.type._context);break;case 22:case 23:Ic()}n=n.return}if(tc=e,nc=e=su(e.current,null),rc=ac=t,ic=0,lc=null,uc=cc=oc=0,fc=dc=null,null!==ai){for(t=0;t<ai.length;t++)if(null!==(r=(n=ai[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}ai=null}return e}function zc(e,t){for(;;){var n=nc;try{if(Zs(),_i.current=Cl,Pi){for(var r=Oi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}Pi=!1}if(qi=0,Ri=Fi=Oi=null,Ii=!1,Di=0,Xo.current=null,null===n||null===n.return){ic=1,lc=t,nc=null;break}e:{var s=e,i=n.return,l=n,o=t;if(t=rc,l.flags|=32768,null!==o&&"object"==typeof o&&"function"==typeof o.then){var c=o,u=l,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Al(i);if(null!==p){p.flags&=-257,$l(p,i,l,0,t),1&p.mode&&Wl(s,c,t),o=c;var m=(t=p).updateQueue;if(null===m){var h=new Set;h.add(o),t.updateQueue=h}else m.add(o);break e}if(!(1&t)){Wl(s,c,t),Ac();break e}o=Error(q(426))}else if(Ls&&1&l.mode){var y=Al(i);if(null!==y){!(65536&y.flags)&&(y.flags|=256),$l(y,i,l,0,t),As(Rl(o,l));break e}}s=o=Rl(o,l),4!==ic&&(ic=2),null===dc?dc=[s]:dc.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,mi(s,Dl(0,o,t));break e;case 1:l=o;var g=s.type,b=s.stateNode;if(!(128&s.flags||"function"!=typeof g.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==bc&&bc.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,mi(s,zl(s,l,t));break e}}s=s.return}while(null!==s)}Bc(n)}catch(v){t=v,nc===n&&null!==n&&(nc=n=n.return);continue}break}}function Wc(){var e=Yo.current;return Yo.current=Cl,null===e?Cl:e}function Ac(){0!==ic&&3!==ic&&2!==ic||(ic=4),null===tc||!(268435455&oc)&&!(268435455&cc)||Oc(tc,rc)}function $c(e,t){var n=ec;ec|=2;var r=Wc();for(tc===e&&rc===t||(hc=null,Dc(e,t));;)try{Qc();break}catch(a){zc(e,a)}if(Zs(),ec=n,Yo.current=r,null!==nc)throw Error(q(261));return tc=null,rc=0,ic}function Qc(){for(;null!==nc;)Uc(nc)}function Vc(){for(;null!==nc&&!kt();)Uc(nc)}function Uc(e){var t=Ko(e.alternate,e,ac);e.memoizedProps=e.pendingProps,null===t?Bc(e):nc=t,Xo.current=null}function Bc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=xo(n,t)))return n.flags&=32767,void(nc=n);if(null===e)return ic=6,void(nc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=vo(n,t,ac)))return void(nc=n);if(null!==(t=t.sibling))return void(nc=t);nc=t=e}while(null!==t);0===ic&&(ic=5)}function Hc(e,t,n){var r=Bt,a=Zo.transition;try{Zo.transition=null,Bt=1,function(e,t,n,r){do{Jc()}while(null!==xc);if(6&ec)throw Error(q(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ot(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,s),e===tc&&(nc=tc=null,rc=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||vc||(vc=!0,tu(Tt,function(){return Jc(),null})),s=!!(15990&n.flags),!!(15990&n.subtreeFlags)||s){s=Zo.transition,Zo.transition=null;var i=Bt;Bt=1;var l=ec;ec|=4,Xo.current=null,function(e,t){if(ja=bn,Wr(e=zr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var i=0,l=-1,o=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==a&&3!==d.nodeType||(l=i+a),d!==s||0!==r&&3!==d.nodeType||(o=i+r),3===d.nodeType&&(i+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===a&&(l=i),f===s&&++u===r&&(o=i),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===o?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ta={focusedElem:e,selectionRange:n},bn=!1,Co=t;null!==Co;)if(e=(t=Co).child,1028&t.subtreeFlags&&null!==e)e.return=t,Co=e;else for(;null!==Co;){t=Co;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var h=m.memoizedProps,y=m.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?h:Tl(t.type,h),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(q(163))}}catch(x){Gc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Co=e;break}Co=t.return}m=jo,jo=!1}(e,n),$o(n,e),Ar(Ta),bn=!!ja,Ta=ja=null,e.current=n,Vo(n),St(),ec=l,Bt=i,Zo.transition=s}else e.current=n;if(vc&&(vc=!1,xc=e,wc=a),s=e.pendingLanes,0===s&&(bc=null),function(e){if(qt&&"function"==typeof qt.onCommitFiberRoot)try{qt.onCommitFiberRoot(Lt,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),Mc(e,Ct()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(yc)throw yc=!1,e=gc,gc=null,e;!!(1&wc)&&0!==e.tag&&Jc(),s=e.pendingLanes,1&s?e===Sc?kc++:(kc=0,Sc=e):kc=0,hs()}(e,t,n,r)}finally{Zo.transition=a,Bt=r}return null}function Jc(){if(null!==xc){var e=Ht(wc),t=Zo.transition,n=Bt;try{if(Zo.transition=null,Bt=16>e?16:e,null===xc)var r=!1;else{if(e=xc,xc=null,wc=0,6&ec)throw Error(q(331));var a=ec;for(ec|=4,Co=e.current;null!==Co;){var s=Co,i=s.child;if(16&Co.flags){var l=s.deletions;if(null!==l){for(var o=0;o<l.length;o++){var c=l[o];for(Co=c;null!==Co;){var u=Co;switch(u.tag){case 0:case 11:case 15:To(8,u,s)}var d=u.child;if(null!==d)d.return=u,Co=d;else for(;null!==Co;){var f=(u=Co).sibling,p=u.return;if(Lo(u),u===c){Co=null;break}if(null!==f){f.return=p,Co=f;break}Co=p}}}var m=s.alternate;if(null!==m){var h=m.child;if(null!==h){m.child=null;do{var y=h.sibling;h.sibling=null,h=y}while(null!==h)}}Co=s}}if(2064&s.subtreeFlags&&null!==i)i.return=s,Co=i;else e:for(;null!==Co;){if(2048&(s=Co).flags)switch(s.tag){case 0:case 11:case 15:To(9,s,s.return)}var g=s.sibling;if(null!==g){g.return=s.return,Co=g;break e}Co=s.return}}var b=e.current;for(Co=b;null!==Co;){var v=(i=Co).child;if(2064&i.subtreeFlags&&null!==v)v.return=i,Co=v;else e:for(i=b;null!==Co;){if(2048&(l=Co).flags)try{switch(l.tag){case 0:case 11:case 15:Mo(9,l)}}catch(w){Gc(l,l.return,w)}if(l===i){Co=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Co=x;break e}Co=l.return}}if(ec=a,hs(),qt&&"function"==typeof qt.onPostCommitFiberRoot)try{qt.onPostCommitFiberRoot(Lt,e)}catch(w){}r=!0}return r}finally{Bt=n,Zo.transition=t}}return!1}function Kc(e,t,n){e=fi(e,t=Dl(0,t=Rl(n,t),1),1),t=Nc(),null!==e&&(Vt(e,1,t),Mc(e,t))}function Gc(e,t,n){if(3===e.tag)Kc(e,e,n);else for(;null!==t;){if(3===t.tag){Kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===bc||!bc.has(r))){t=fi(t,e=zl(t,e=Rl(n,e),1),1),e=Nc(),null!==t&&(Vt(t,1,e),Mc(t,e));break}}t=t.return}}function Yc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Nc(),e.pingedLanes|=e.suspendedLanes&n,tc===e&&(rc&n)===n&&(4===ic||3===ic&&(130023424&rc)===rc&&500>Ct()-pc?Dc(e,0):uc|=n),Mc(e,t)}function Xc(e,t){0===t&&(1&e.mode?(t=It,!(130023424&(It<<=1))&&(It=4194304)):t=1);var n=Nc();null!==(e=li(e,t))&&(Vt(e,t,n),Mc(e,n))}function Zc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Xc(e,n)}function eu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}null!==r&&r.delete(t),Xc(e,n)}function tu(e,t){return xt(e,t)}function nu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ru(e,t,n,r){return new nu(e,t,n,r)}function au(e){return!(!(e=e.prototype)||!e.isReactComponent)}function su(e,t){var n=e.alternate;return null===n?((n=ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function iu(e,t,n,r,a,s){var i=2;if(r=e,"function"==typeof e)au(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case G:return lu(n.children,a,s,t);case Y:i=8,a|=8;break;case X:return(e=ru(12,n,t,2|a)).elementType=X,e.lanes=s,e;case ne:return(e=ru(13,n,t,a)).elementType=ne,e.lanes=s,e;case re:return(e=ru(19,n,t,a)).elementType=re,e.lanes=s,e;case ie:return ou(n,a,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Z:i=10;break e;case ee:i=9;break e;case te:i=11;break e;case ae:i=14;break e;case se:i=16,r=null;break e}throw Error(q(130,null==e?e:typeof e,""))}return(t=ru(i,n,t,a)).elementType=e,t.type=r,t.lanes=s,t}function lu(e,t,n,r){return(e=ru(7,e,r,t)).lanes=n,e}function ou(e,t,n,r){return(e=ru(22,e,r,t)).elementType=ie,e.lanes=n,e.stateNode={isHidden:!1},e}function cu(e,t,n){return(e=ru(6,e,null,t)).lanes=n,e}function uu(e,t,n){return(t=ru(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function du(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qt(0),this.expirationTimes=Qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function fu(e,t,n,r,a,s,i,l,o){return e=new du(e,t,n,l,o),1===t?(t=1,!0===s&&(t|=8)):t=0,s=ru(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ci(s),e}function pu(e){if(!e)return es;e:{if(ht(e=e._reactInternals)!==e||1!==e.tag)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ss(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(q(171))}if(1===e.tag){var n=e.type;if(ss(n))return os(e,n,t)}return t}function mu(e,t,n,r,a,s,i,l,o){return(e=fu(n,r,!0,e,0,s,0,l,o)).context=pu(null),n=e.current,(s=di(r=Nc(),a=jc(n))).callback=null!=t?t:null,fi(n,s,a),e.current.lanes=a,Vt(e,a,r),Mc(e,r),e}function hu(e,t,n,r){var a=t.current,s=Nc(),i=jc(a);return n=pu(n),null===t.context?t.context=n:t.pendingContext=n,(t=di(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=fi(a,t,i))&&(Tc(e,a,i,s),pi(e,a,i)),i}function yu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function bu(e,t){gu(e,t),(e=e.alternate)&&gu(e,t)}Ko=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ns.current)Vl=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return Vl=!1,function(e,t,n){switch(t.tag){case 3:eo(t),Ws();break;case 5:Ci(t);break;case 1:ss(t.type)&&cs(t);break;case 4:ki(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Za(Ks,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Za(Ni,1&Ni.current),t.flags|=128,null):0!==(n&t.child.childLanes)?oo(e,t,n):(Za(Ni,1&Ni.current),null!==(e=yo(e,t,n))?e.sibling:null);Za(Ni,1&Ni.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return mo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Za(Ni,Ni.current),r)break;return null;case 22:case 23:return t.lanes=0,Kl(e,t,n)}return yo(e,t,n)}(e,t,n);Vl=!!(131072&e.flags)}else Vl=!1,Ls&&1048576&t.flags&&Ns(t,vs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ho(e,t),e=t.pendingProps;var a=as(t,ts.current);ni(t,n),a=$i(null,t,r,e,a,n);var s=Qi();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ss(r)?(s=!0,cs(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ci(t),a.updater=_l,t.stateNode=a,a._reactInternals=t,Fl(t,r,e,n),t=Zl(null,t,r,!0,s,n)):(t.tag=0,Ls&&s&&js(t),Ul(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ho(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"==typeof e)return au(e)?1:0;if(null!=e){if((e=e.$$typeof)===te)return 11;if(e===ae)return 14}return 2}(r),e=Tl(r,e),a){case 0:t=Yl(null,t,r,e,n);break e;case 1:t=Xl(null,t,r,e,n);break e;case 11:t=Bl(null,t,r,e,n);break e;case 14:t=Hl(null,t,r,Tl(r.type,e),n);break e}throw Error(q(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Yl(e,t,r,a=t.elementType===r?a:Tl(r,a),n);case 1:return r=t.type,a=t.pendingProps,Xl(e,t,r,a=t.elementType===r?a:Tl(r,a),n);case 3:e:{if(eo(t),null===e)throw Error(q(387));r=t.pendingProps,a=(s=t.memoizedState).element,ui(e,t),hi(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=to(e,t,r,n,a=Rl(Error(q(423)),t));break e}if(r!==a){t=to(e,t,r,n,a=Rl(Error(q(424)),t));break e}for(_s=Pa(t.stateNode.containerInfo.firstChild),Ms=t,Ls=!0,qs=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ws(),r===a){t=yo(e,t,n);break e}Ul(e,t,r,n)}t=t.child}return t;case 5:return Ci(t),null===e&&Ps(t),r=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,i=a.children,Ma(r,a)?i=null:null!==s&&Ma(r,s)&&(t.flags|=32),Gl(e,t),Ul(e,t,i,n),t.child;case 6:return null===e&&Ps(t),null;case 13:return oo(e,t,n);case 4:return ki(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Hs(t,null,r,n):Ul(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Bl(e,t,r,a=t.elementType===r?a:Tl(r,a),n);case 7:return Ul(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ul(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value,Za(Ks,r._currentValue),r._currentValue=i,null!==s)if(Fr(s.value,i)){if(s.children===a.children&&!ns.current){t=yo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){i=s.child;for(var o=l.firstContext;null!==o;){if(o.context===r){if(1===s.tag){(o=di(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?o.next=o:(o.next=u.next,u.next=o),c.pending=o}}s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),ti(s.return,n,t),l.lanes|=n;break}o=o.next}}else if(10===s.tag)i=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(i=s.return))throw Error(q(341));i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),ti(i,n,t),i=s.sibling}else i=s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}Ul(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,ni(t,n),r=r(a=ri(a)),t.flags|=1,Ul(e,t,r,n),t.child;case 14:return a=Tl(r=t.type,t.pendingProps),Hl(e,t,r,a=Tl(r.type,a),n);case 15:return Jl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Tl(r,a),ho(e,t),t.tag=1,ss(r)?(e=!0,cs(t)):e=!1,ni(t,n),ql(t,r,a),Fl(t,r,a,n),Zl(null,t,r,!0,e,n);case 19:return mo(e,t,n);case 22:return Kl(e,t,n)}throw Error(q(156,t.tag))};var vu="function"==typeof reportError?reportError:function(e){};function xu(e){this._internalRoot=e}function wu(e){this._internalRoot=e}function ku(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Su(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Cu(){}function Eu(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"==typeof a){var l=a;a=function(){var e=yu(i);l.call(e)}}hu(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"==typeof r){var s=r;r=function(){var e=yu(i);s.call(e)}}var i=mu(t,r,e,0,null,!1,0,"",Cu);return e._reactRootContainer=i,e[Aa]=i.current,ha(8===e.nodeType?e.parentNode:e),Pc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof r){var l=r;r=function(){var e=yu(o);l.call(e)}}var o=fu(e,0,!1,null,0,!1,0,"",Cu);return e._reactRootContainer=o,e[Aa]=o.current,ha(8===e.nodeType?e.parentNode:e),Pc(function(){hu(t,o,n,r)}),o}(n,t,e,a,r);return yu(i)}wu.prototype.render=xu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(q(409));hu(e,t,null,null)},wu.prototype.unmount=xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Pc(function(){hu(null,e,null,null)}),t[Aa]=null}},wu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ln.length&&0!==t&&t<ln[n].priority;n++);ln.splice(n,0,e),0===n&&dn(e)}},Jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Dt(t.pendingLanes);0!==n&&(Ut(t,1|n),Mc(t,Ct()),!(6&ec)&&(mc=Ct()+500,hs()))}break;case 13:Pc(function(){var t=li(e,1);if(null!==t){var n=Nc();Tc(t,e,1,n)}}),bu(e,1)}},Kt=function(e){if(13===e.tag){var t=li(e,134217728);if(null!==t)Tc(t,e,134217728,Nc());bu(e,134217728)}},Gt=function(e){if(13===e.tag){var t=jc(e),n=li(e,t);if(null!==n)Tc(n,e,t,Nc());bu(e,t)}},Yt=function(){return Bt},Xt=function(e,t){var n=Bt;try{return Bt=e,t()}finally{Bt=n}},Ke=function(e,t,n){switch(t){case"input":if(Ee(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Ja(r);if(!a)throw Error(q(90));xe(r),Ee(r,a)}}}break;case"textarea":qe(e,n);break;case"select":null!=(t=n.value)&&Me(e,!!n.multiple,t,!1)}},tt=Rc,nt=Pc;var Nu={usingClientEntryPoint:!1,Events:[Ba,Ha,Ja,Ze,et,Rc]},ju={findFiberByHostInstance:Ua,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tu={bundleType:ju.bundleType,version:ju.version,rendererPackageName:ju.rendererPackageName,rendererConfig:ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=bt(e))?null:e.stateNode},findFiberByHostInstance:ju.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{Lt=Mu.inject(Tu),qt=Mu}catch(Ie){}}N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nu,N.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ku(t))throw Error(q(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:K,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},N.createRoot=function(e,t){if(!ku(e))throw Error(q(299));var n=!1,r="",a=vu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=fu(e,1,!1,null,0,n,0,r,a),e[Aa]=t.current,ha(8===e.nodeType?e.parentNode:e),new xu(t)},N.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(q(188));throw e=Object.keys(e).join(","),Error(q(268,e))}return e=null===(e=bt(t))?null:e.stateNode},N.flushSync=function(e){return Pc(e)},N.hydrate=function(e,t,n){if(!Su(t))throw Error(q(200));return Eu(null,e,t,!0,n)},N.hydrateRoot=function(e,t,n){if(!ku(e))throw Error(q(405));var r=null!=n&&n.hydratedSources||null,a=!1,s="",i=vu;if(null!=n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=mu(t,null,e,1,null!=n?n:null,a,0,s,i),e[Aa]=t.current,ha(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new wu(t)},N.render=function(e,t,n){if(!Su(t))throw Error(q(200));return Eu(null,e,t,!1,n)},N.unmountComponentAtNode=function(e){if(!Su(e))throw Error(q(40));return!!e._reactRootContainer&&(Pc(function(){Eu(null,null,e,!1,function(){e._reactRootContainer=null,e[Aa]=null})}),!0)},N.unstable_batchedUpdates=Rc,N.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Su(n))throw Error(q(200));if(null==e||void 0===e._reactInternals)throw Error(q(38));return Eu(e,t,n,!1,r)},N.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),E.exports=N;var _u=E.exports;C.createRoot=_u.createRoot,C.hydrateRoot=_u.hydrateRoot;class Lu{constructor(e){this.withClause=e}getWithClause(){try{const e=this.withClause.trim().startsWith("WITH ")?`${this.withClause} SELECT 1`:`WITH ${this.withClause} SELECT 1`,t=i.parse(e);return t.toSimpleQuery().withClause||null}catch(e){return null}}getString(e){if(this.getWithClause()){const t=this.withClause.trim().startsWith("WITH ")?`${this.withClause} SELECT 1`:`WITH ${this.withClause} SELECT 1`,n=i.parse(t);return e.format(n).formattedSql}return this.withClause}get displayString(){return this.withClause}toString(){return this.withClause}hasCte(e){var t;const n=this.getWithClause();return(null==(t=null==n?void 0:n.tables)?void 0:t.some(t=>{var n,r;return(null==(r=null==(n=t.aliasExpression)?void 0:n.table)?void 0:r.name)===e}))||!1}getCteNames(){var e;const t=this.getWithClause();return(null==(e=null==t?void 0:t.tables)?void 0:e.map(e=>{var t,n;return null==(n=null==(t=e.aliasExpression)?void 0:t.table)?void 0:n.name}).filter(e=>void 0!==e))||[]}clone(){return new Lu(this.withClause)}toJSON(){return{withClause:this.withClause}}}class qu{constructor(){t(this,"formatter"),this.formatter=new l({withClauseStyle:"full-oneline"})}compose(e,t){if(!t||""===t.trim())return e;const n=i.parse(e).toSimpleQuery(),r=this.prepareForWithClauseParser(t),a=o.parse(r);if(n.withClause){const e=n.withClause.tables||[],t=a.tables||[];n.withClause.tables=[...t,...e]}else n.withClause=a;const s=this.formatter.format(n);return"string"==typeof s?s:s.formattedSql}prepareForWithClauseParser(e){let t=e.trim();return t.replace(/^\s*--.*$/gm,"").trim().toLowerCase().startsWith("with")||(t=`WITH ${t}`),t}countCtes(e){var t;if(!e||""===e.trim())return 0;const n=this.prepareForWithClauseParser(e);return(null==(t=o.parse(n).tables)?void 0:t.length)||0}}class Ou{constructor(e,n,r,a=[],s,i,l){t(this,"_queryResult",null),t(this,"editorContent"),this.type=e,this.name=n,this.sqlWithoutCte=r,this.dependents=a,this.columns=s,this.originalSql=i,this._formatter=l,this.editorContent=r}dependsOn(e){return this.dependents.some(t=>t.name===e)}get hasUnsavedChanges(){return this.editorContent!==this.sqlWithoutCte}updateEditorContent(e){this.editorContent=e}save(){this.sqlWithoutCte=this.editorContent}addDependency(e){this.dependents.some(t=>t.name===e.name)||this.dependents.push(e)}removeDependency(e){this.dependents=this.dependents.filter(t=>t.name!==e)}getDependentNames(){return this.dependents.map(e=>e.name)}async getFullSql(e,t,n=!1,r=!1){return(await this.getDynamicSql(e,t,n,r)).formattedSql}async getDynamicSql(e,t,n=!1,a=!1){var s;try{let d=a?this.editorContent:this.sqlWithoutCte;if(e||this.dependents.length>0){const t=[];if(e)if(e instanceof Lu){const n=e.toString();n.trim()&&t.push(n.trim())}else"string"==typeof e&&e.trim()&&t.push(e.trim());const n=this.collectAllDependencies();for(const e of n){const n=(null==(s=e.columns)?void 0:s.length)?`(${e.columns.join(", ")})`:"",r=`${e.name}${n} AS (\n${e.sqlWithoutCte}\n)`;t.push(r)}if(t.length>0){const e=new qu,n=t.join(",\n");d=e.compose(d,n)}}const{SelectQueryParser:f}=await r(async()=>{const{SelectQueryParser:e}=await import("./rawsql-Bg5WWB2o.js");return{SelectQueryParser:e}},[]);let p=f.parse(d);if(t){const e=t.getFilterConditions();if(e&&Object.keys(e).length>0){if(Object.values(e).some(e=>"object"==typeof e&&null!==e?Object.keys(e).length>0:null!=e&&""!==e)){const t=new c;try{p=new c(()=>[]).buildFilteredQuery(d,e)}catch(i){try{p=t.buildFilteredQuery(d,e)}catch(o){try{t.ignoreNonExistentColumns=!0,p=t.buildFilteredQuery(d,e)}catch(u){i instanceof Error&&i.message;throw i}}}}}}const m=new l({preset:"postgres",parameterStyle:n?"indexed":"named",keywordCase:"lower",identifierEscape:{start:'"',end:'"'}}),{formattedSql:h,params:y}=m.format(p);return{query:p,formattedSql:h,params:Array.isArray(y)?y:Object.values(y||{})}}catch(d){if(d instanceof Error)throw new Error(`Failed to generate dynamic SQL: ${d.message}\nStack: ${d.stack}`);throw new Error("Failed to generate dynamic SQL")}}collectAllDependencies(){const e=new Set,t=[],n=r=>{if(!e.has(r.name)){e.add(r.name);for(const e of r.dependents)n(e);"cte"===r.type&&t.push(r)}};for(const r of this.dependents)n(r);return t}toJSON(){return{type:this.type,name:this.name,sqlWithoutCte:this.sqlWithoutCte,dependents:this.dependents.map(e=>e.name),...this.columns&&{columns:[...this.columns]},...this.originalSql&&{originalSql:this.originalSql}}}static fromJSON(e,t){return new Ou(e.type,e.name,e.sqlWithoutCte,[],e.columns,e.originalSql,t)}clone(){return new Ou(this.type,this.name,this.sqlWithoutCte,[...this.dependents],this.columns?[...this.columns]:void 0,this.originalSql,this._formatter)}setDependents(e){this.dependents=e}async validateSchema(e=!1){try{const t=await this.getFullSql(void 0,void 0,!1,e),{SelectQueryParser:n,SchemaCollector:a}=await r(async()=>{const{SelectQueryParser:e,SchemaCollector:t}=await import("./rawsql-Bg5WWB2o.js");return{SelectQueryParser:e,SchemaCollector:t}},[]),s=n.analyze(t);if(!s.success){if(void 0!==s.errorPosition){const e=s.errorPosition,n=Math.max(0,e-20),r=Math.min(t.length,e+20);t.substring(n,r),t.charAt(e);return{success:!1,error:"Parse error"}}return{success:!1,error:s.error?`Parse error: ${s.error}`:"Parse error"}}const i=(new a).analyze(s.query);if(!i.success){return{success:!1,error:`Schema Analysis Error: ${i.error||"Schema analysis failed"}`}}if(i.unresolvedColumns.length>0){return{success:!1,error:`Unresolved columns: ${i.unresolvedColumns.join(", ")}`}}return{success:!0}}catch(t){const e=t instanceof Error?t.message:"Unknown analysis error";return this.createUserFriendlyErrorMessage(e)}}createUserFriendlyErrorMessage(e){return{success:!1,error:"Parse error"}}setQueryResult(e){this._queryResult=e}getQueryResult(){return this._queryResult}hasQueryResult(){return null!==this._queryResult}clearQueryResult(){this._queryResult=null}get queryResult(){return this._queryResult}}class Fu{constructor(e="undefined"){this.conditions=e}getFilterConditions(){if("undefined"!==this.conditions)try{return JSON.parse(this.conditions)}catch(e){return{}}}setFilterConditions(e){if(void 0!==e)try{this.conditions=JSON.stringify(e,null,2)}catch(t){this.conditions="undefined"}else this.conditions="undefined"}static generateTemplate(e){try{e.forEach((e,t)=>{});const t=e.find(e=>"main"===e.type&&e.originalSql);if(!t||!t.originalSql)return Fu.getDefaultTemplate();const n=i.parse(t.originalSql),r=new u(null,!1,d.ColumnNameOnly,{upstream:!0}).collect(n),a={};for(const e of r){const t=e.name;t.includes("id")||t.includes("Id")?a[t]={}:t.includes("name")||t.includes("title")||t.includes("description")?a[t]={ilike:"%a%"}:(t.includes("date")||t.includes("time")||t.includes("created")||t.includes("updated"),a[t]={})}return JSON.stringify(a,null,2)}catch(t){return Fu.getDefaultTemplate()}}static getDefaultTemplate(){return JSON.stringify({user_id:{},name:{ilike:"%a%"}},null,2)}initializeFromModels(e){try{this.conditions=Fu.generateTemplate(e)}catch(t){this.conditions=Fu.getDefaultTemplate()}}reset(){this.conditions=Fu.getDefaultTemplate()}isValid(){try{return JSON.parse(this.conditions),!0}catch{return!1}}getFormattedString(){try{const e=JSON.parse(this.conditions);return JSON.stringify(e,null,2)}catch{return this.conditions}}clone(){return new Fu(this.conditions)}toJSON(){return{conditions:this.conditions}}static fromJSON(e){return new Fu(e.conditions||"{}")}get displayString(){return this.conditions}set displayString(e){this.conditions=e}toString(){return this.conditions}}const Ru={identifierEscape:{start:"",end:""},parameterSymbol:":",parameterStyle:"named",indentSize:4,indentChar:" ",newline:"\n",keywordCase:"lower",commaBreak:"before",andBreak:"before",exportComment:!0};class Pu{constructor(e=JSON.stringify(Ru,null,2)){this.config=e}getSqlFormatter(){try{const e=JSON.parse(this.config);return new l(e)}catch(e){return new l(Ru)}}setFormatterConfig(e){try{this.config=JSON.stringify(e,null,2)}catch(t){this.config=JSON.stringify(Ru,null,2)}}reset(){this.config=JSON.stringify(Ru,null,2)}isValid(){try{return JSON.parse(this.config),!0}catch{return!1}}getFormattedString(){try{const e=JSON.parse(this.config);return JSON.stringify(e,null,2)}catch{return this.config}}clone(){return new Pu(this.config)}toJSON(){return{config:this.config}}static fromJSON(e){return new Pu(e.config||JSON.stringify(Ru,null,2))}get displayString(){return this.config}set displayString(e){this.config=e}toString(){return this.config}static getDefaultTemplate(){return JSON.stringify(Ru,null,2)}initializeDefault(){this.config=Pu.getDefaultTemplate()}}class Iu{static configure(e,t){this.configs.set(e,t)}static log(e,t,n,...r){const a=this.configs.get(e);if(!(null==a?void 0:a.enabled))return;const s={error:0,warn:1,info:2,debug:3},i=s[a.level];if(s[t]<=i){t}}static error(e,t,...n){this.log(e,"error",t,...n)}static warn(e,t,...n){this.log(e,"warn",t,...n)}static info(e,t,...n){this.log(e,"info",t,...n)}static debug(e,t,...n){this.log(e,"debug",t,...n)}}t(Iu,"configs",new Map),Iu.configure("MainContentViewModel",{enabled:!0,level:"warn"}),Iu.configure("WorkspaceEntity",{enabled:!0,level:"error"}),Iu.configure("SqlModelsList",{enabled:!1,level:"error"}),Iu.configure("LeftSidebar",{enabled:!0,level:"info"}),Iu.configure("Layout",{enabled:!1,level:"error"}),Iu.configure("MainContentMvvm",{enabled:!1,level:"error"}),Iu.configure("MonacoEditor",{enabled:!1,level:"error"});class Du{constructor(e,n,r,a=[],s=new Lu(""),i=new Pu,l=new Fu,o={},c=(new Date).toISOString(),u=(new Date).toISOString()){t(this,"_openedObjects",[]),t(this,"_activeObjectId",""),t(this,"_layoutState",{leftSidebarVisible:!0,rightSidebarVisible:!0,resultsVisible:!1,leftSidebarCollapsed:{workspace:!1,sqlModels:!1,actions:!0,system:!0}}),t(this,"_validationResults",new Map),this.id=e,this.name=n,this.originalFilePath=r,this.sqlModels=a,this.testValues=s,this.formatter=i,this.filterConditions=l,this.modelFilterConditions=o,this.created=c,this.lastModified=u}get openedObjects(){return this._openedObjects}get activeObjectId(){return this._activeObjectId}get activeObject(){return this._openedObjects.find(e=>e.id===this._activeObjectId)||null}openObject(e){const t=this._openedObjects.findIndex(t=>t.id===e.id);-1!==t?this._openedObjects[t]=e:this._openedObjects.push(e),this._activeObjectId=e.id,this.updateModified()}closeObject(e){this._openedObjects=this._openedObjects.filter(t=>t.id!==e),this._activeObjectId===e&&this._openedObjects.length>0?this._activeObjectId=this._openedObjects[0].id:0===this._openedObjects.length&&(this._activeObjectId=""),this.updateModified()}setActiveObject(e){this._openedObjects.find(t=>t.id===e)&&(this._activeObjectId=e,this.updateModified())}setActiveObjectId(e){this._activeObjectId=e,this.updateModified()}setOpenedObjects(e){this._openedObjects=[...e],this.updateModified()}updateObjectContent(e,t){const n=this._openedObjects.find(t=>t.id===e);n&&(n.content=t,n.isDirty=!0,this.updateModified())}clearAllObjects(){this._openedObjects=[],this._activeObjectId="",this.updateModified()}get layoutState(){return{...this._layoutState}}setLeftSidebarVisible(e){this._layoutState.leftSidebarVisible=e,this.updateModified()}setRightSidebarVisible(e){this._layoutState.rightSidebarVisible=e,this.updateModified()}setResultsVisible(e){this._layoutState.resultsVisible=e,this.updateModified()}updateLayoutState(e){this._layoutState={...this._layoutState,...e},this.updateModified()}setSidebarSectionCollapsed(e,t){this._layoutState.leftSidebarCollapsed[e]=t,this.updateModified()}getValidationResult(e){Iu.debug("WorkspaceEntity",`getValidationResult called for: ${e}`),Iu.debug("WorkspaceEntity",`_validationResults map size: ${this._validationResults.size}`),Iu.debug("WorkspaceEntity",`_validationResults keys: ${Array.from(this._validationResults.keys()).join(", ")}`);const t=this._validationResults.get(e)||null;return Iu.debug("WorkspaceEntity",`getValidationResult result: ${JSON.stringify(t)}`),t}setValidationResult(e,t){this._validationResults.set(e,{...t,timestamp:new Date}),this.updateModified()}clearValidationResults(){this._validationResults.clear(),this.updateModified()}async validateAllSchemas(e=!1){Iu.info("WorkspaceEntity",`validateAllSchemas started, useEditorContent: ${e}`);const t=this.sqlModels.filter(e=>"main"===e.type||"cte"===e.type);for(const r of t){Iu.debug("WorkspaceEntity",`Validating schema for: ${r.name}, type: ${r.type}`);try{const t=await r.validateSchema(e);this.setValidationResult(r.name,t),Iu.debug("WorkspaceEntity",`Validation result for ${r.name}: ${JSON.stringify(t)}`)}catch(n){Iu.error("WorkspaceEntity",`Error validating ${r.name}: ${n}`),this.setValidationResult(r.name,{success:!1,error:n instanceof Error?n.message:"Validation failed"})}}Iu.info("WorkspaceEntity","validateAllSchemas completed")}openValuesTab(){const e=this.testValues.toString();this.openObject({id:"values",title:"Values & Test Data",type:"values",content:e,isDirty:!1})}openFormatterTab(){const e=this.formatter.displayString;this.openObject({id:"formatter",title:"SQL Formatter Config",type:"formatter",content:e,isDirty:!1})}openConditionTab(){const e=this.filterConditions.displayString;this.openObject({id:"condition",title:"Filter Conditions",type:"condition",content:e,isDirty:!1})}openSqlModelTab(e){this.openObject({id:e.name,title:e.name,type:e.type,content:e.sqlWithoutCte,isDirty:!1,modelEntity:e})}static createFromFile(e,t,n){const r=new Du(Du.generateId(),e,t,[],new Lu(""),new Pu,new Fu,{});for(const a of n)r.addSqlModel(a);return r.filterConditions.initializeFromModels(n),r}addSqlModel(e){const t=this.sqlModels.findIndex(t=>t.name===e.name&&t.type===e.type);t>=0?this.sqlModels[t]=e:this.sqlModels.push(e),this.updateModified()}removeSqlModel(e,t){const n=this.sqlModels.length;return this.sqlModels=this.sqlModels.filter(n=>!(n.name===e&&n.type===t)),this.sqlModels.length<n&&(this.updateModified(),!0)}getSqlModel(e,t){return this.sqlModels.find(n=>n.name===e&&n.type===t)||null}getMainModels(){return this.sqlModels.filter(e=>"main"===e.type)}getCteModels(){return this.sqlModels.filter(e=>"cte"===e.type)}getFilteredModels(){let e=[...this.sqlModels];if(this.modelFilterConditions.showMainOnly?e=e.filter(e=>"main"===e.type):this.modelFilterConditions.showCtesOnly&&(e=e.filter(e=>"cte"===e.type)),this.modelFilterConditions.nameFilter){const t=this.modelFilterConditions.nameFilter.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}return void 0!==this.modelFilterConditions.minDependencies&&(e=e.filter(e=>e.dependents.length>=this.modelFilterConditions.minDependencies)),void 0!==this.modelFilterConditions.minColumns&&(e=e.filter(e=>{var t;return((null==(t=e.columns)?void 0:t.length)||0)>=this.modelFilterConditions.minColumns})),this.modelFilterConditions.dependsOn&&this.modelFilterConditions.dependsOn.length>0&&(e=e.filter(e=>this.modelFilterConditions.dependsOn.some(t=>e.dependents.some(e=>e.name===t)))),e}updateTestValues(e){this.testValues=e,this.updateModified()}updateFormatter(e){this.formatter=e,this.updateModified()}updateFilterConditions(e){this.filterConditions=e,this.updateModified()}updateModelFilterConditions(e){this.modelFilterConditions={...this.modelFilterConditions,...e},this.updateModified()}clearFilterConditions(){this.filterConditions.reset(),this.modelFilterConditions={},this.updateModified()}getStatistics(){const e=this.getMainModels().length,t=this.getCteModels().length,n=this.sqlModels.reduce((e,t)=>{var n;return e+((null==(n=t.columns)?void 0:n.length)||0)},0),r=this.calculateMaxDependencyDepth();return{totalModels:this.sqlModels.length,mainQueries:e,ctes:t,maxDependencyDepth:r,totalColumns:n}}calculateMaxDependencyDepth(){const e=new Map(this.sqlModels.map(e=>[e.name,e])),t=new Map,n=(r,a=new Set)=>{if(t.has(r))return t.get(r);if(a.has(r))return 0;a.add(r);const s=e.get(r);if(!s||0===s.dependents.length)return t.set(r,0),0;const i=1+Math.max(...s.dependents.filter(t=>e.has(t.name)).map(e=>n(e.name,new Set(a))));return t.set(r,i),i};let r=0;for(const a of this.sqlModels)r=Math.max(r,n(a.name));return r}async generateFinalSql(){const e=this.sqlModels.find(e=>"main"===e.type);if(!e)throw new Error("No main SQL model found in workspace");try{const t=await e.getDynamicSql(void 0,void 0,!1,!1),n=this.formatter.getSqlFormatter(),{formattedSql:r}=n.format(t.query);return r}catch(t){throw new Error(`Failed to generate Final SQL: ${t instanceof Error?t.message:"Unknown error"}`)}}clone(){return new Du(this.id,this.name,this.originalFilePath,this.sqlModels.map(e=>e.clone()),this.testValues.clone(),this.formatter.clone(),this.filterConditions.clone(),{...this.modelFilterConditions},this.created,this.lastModified)}toJSON(){return{id:this.id,name:this.name,originalFilePath:this.originalFilePath,sqlModels:this.sqlModels.map(e=>e.toJSON()),testValues:this.testValues.toJSON(),formatter:this.formatter.toJSON(),filterConditions:this.filterConditions.toJSON(),modelFilterConditions:this.modelFilterConditions,openedObjects:this._openedObjects,activeObjectId:this._activeObjectId,layoutState:this._layoutState,created:this.created,lastModified:this.lastModified}}toWorkspaceInterface(){const e={};for(const r of this.getCteModels())e[r.name]={name:r.name,query:r.sqlWithoutCte,description:void 0,dependencies:r.getDependentNames(),columns:(r.columns||[]).map(e=>({name:e,type:"unknown",nullable:!0}))};const t=this.getMainModels()[0],n=(null==t?void 0:t.originalSql)||(null==t?void 0:t.sqlWithoutCte)||"";return{id:this.id,name:this.name,originalQuery:n,originalFilePath:this.originalFilePath||void 0,decomposedQuery:n,privateCtes:e,created:this.created,lastModified:this.lastModified}}static fromJSON(e){const t=e.testValues,n=new Du(e.id,e.name,e.originalFilePath,[],new Lu((null==t?void 0:t.withClause)||""),Pu.fromJSON(e.formatter||{}),Fu.fromJSON(e.filterConditions||{}),e.modelFilterConditions||{},e.created,e.lastModified);if(e.sqlModels&&Array.isArray(e.sqlModels)){const t=new Map,r=new Map;for(const a of e.sqlModels){const e=Ou.fromJSON(a,n.formatter.getSqlFormatter());t.set(e.name,e),r.set(e.name,a.dependents||[]),n.addSqlModel(e)}for(const[e,n]of r){const r=t.get(e);if(r){const e=n.map(e=>t.get(e)).filter(e=>void 0!==e);r.setDependents(e)}}}return e.openedObjects&&Array.isArray(e.openedObjects)&&(n._openedObjects=e.openedObjects.map(e=>({...e,modelEntity:e.modelEntity?n.sqlModels.find(t=>t.name===e.modelEntity.name):void 0}))),e.activeObjectId&&(n._activeObjectId=e.activeObjectId),e.layoutState&&(n._layoutState={...n._layoutState,...e.layoutState}),n}updateModified(){this.lastModified=(new Date).toISOString()}static generateId(){return`ws_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}class zu{constructor(e,t){this.parser=e,this._dependencyAnalyzer=t,this._dependencyAnalyzer}async decomposeSql(e,t,n){const r=await this.parser.extractCTEs(e);if(0===r.length){const r=await this.parser.extractMainQuery(e);let a=r;if(n)try{const e=n.getSqlFormatter(),t=i.parse(r);a=e.format(t).formattedSql}catch(f){}return[new Ou("main",t,a,[],void 0,e,null==n?void 0:n.getSqlFormatter())]}const a=new Map;for(const p of r){let e=p.query;if(n)try{const t=n.getSqlFormatter(),r=i.parse(p.query);e=t.format(r).formattedSql}catch(f){}const t=new Ou("cte",p.name,e,[],p.getColumnNames(),void 0,null==n?void 0:n.getSqlFormatter());a.set(p.name,t)}const s=await this.parser.extractMainQuery(e);let l=s;if(n)try{const e=n.getSqlFormatter(),t=i.parse(s);l=e.format(t).formattedSql}catch(f){}const o=new Ou("main",t,l,[],void 0,e,null==n?void 0:n.getSqlFormatter());a.set(t,o);const c={};r.forEach(e=>{c[e.name]=e});for(const i of r){const e=a.get(i.name);for(const t of i.dependencies){const n=a.get(t);n&&e.addDependency(n)}}const u=await this.parser.extractDependencies(s),d=new Set(r.map(e=>e.name));for(const i of u)if(d.has(i)){const e=a.get(i);e&&o.addDependency(e)}return Array.from(a.values())}async reconstructSql(e,t){const n=e.find(e=>"main"===e.type&&e.name===t);if(!n)throw new Error(`Main model "${t}" not found`);return n.getFullSql()}getExecutionOrder(e){const t=e.filter(e=>"cte"===e.type),n=new Set,r=[],a=e=>{n.has(e.name)||(n.add(e.name),e.dependents.forEach(e=>{"cte"===e.type&&a(e)}),r.push(e.name))};return t.forEach(e=>a(e)),r}}class Wu{constructor(e,t,n=[],r=[],a){this.name=e,this.query=t,this.dependencies=n,this.columns=r,this.description=a,this.validateName()}validateName(){if(!/^[a-zA-Z][a-zA-Z0-9_]*$/.test(this.name))throw new Error(`Invalid CTE name: ${this.name}. Must start with letter and contain only letters, numbers, and underscores.`)}static create(e){return new Wu(e.name,e.query,[],[],e.description)}updateQuery(e){this.query=e,this.dependencies=[]}addDependency(e){this.dependencies.includes(e)||this.dependencies.push(e)}removeDependency(e){this.dependencies=this.dependencies.filter(t=>t!==e)}setDependencies(e){this.dependencies=[...e]}hasDependency(e){return this.dependencies.includes(e)}setColumns(e){this.columns=[...e]}getColumnNames(){return this.columns.map(e=>e.name)}updateDescription(e){this.description=e}clone(){return new Wu(this.name,this.query,[...this.dependencies],[...this.columns],this.description)}}class Au{async extractCTEs(e){var t,n,r,a,s;try{const l=i.parse(e).toSimpleQuery(),o=[];if(null==(t=l.withClause)?void 0:t.tables){const e=new f;e.analyzeDependencies(l);for(const t of l.withClause.tables){const i=null==(r=null==(n=t.aliasExpression)?void 0:n.table)?void 0:r.name;if(!i)continue;const l=this.extractCTEQueryString(t),c=e.getDependencies(i)||[],u=(null==(s=null==(a=t.aliasExpression)?void 0:a.columns)?void 0:s.map(e=>e.name))||[],d=new Wu(i,l,c,u.map(e=>({name:e,type:"unknown"})));o.push(d)}}return o}catch(l){throw new Error(`CTE extraction failed: ${l instanceof Error?l.message:"Unknown error"}`)}}async extractMainQuery(e){try{const t=i.parse(e).toSimpleQuery();return this.reconstructMainQuery(e,t)}catch(t){return this.extractMainQueryManually(e)}}async extractDependencies(e){const t=new Set;try{const r=i.parse(e),a=r.toSimpleQuery();try{const e=new f;e.analyzeDependencies(a);const t=e.getMainQueryDependencies();if(t&&t.length>0)return t}catch(n){}const s=r;void 0!==s.left&&void 0!==s.right&&void 0!==s.operator?this.extractDependenciesFromBinaryQuery(s,t):this.extractDependenciesFromSimpleQuery(a,t)}catch(r){(e.match(/\b(?:FROM|JOIN)\s+([a-zA-Z_][a-zA-Z0-9_]*)/gi)||[]).forEach(e=>{const n=e.replace(/^(?:FROM|JOIN)\s+/i,"").trim();n&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(n)&&t.add(n)})}return Array.from(t)}extractDependenciesFromBinaryQuery(e,t){if(e.left)if(this.isBinarySelectQuery(e.left))this.extractDependenciesFromBinaryQuery(e.left,t);else{const n=e.left.toSimpleQuery();this.extractDependenciesFromSimpleQuery(n,t)}if(e.right)if(this.isBinarySelectQuery(e.right))this.extractDependenciesFromBinaryQuery(e.right,t);else{const n=e.right.toSimpleQuery();this.extractDependenciesFromSimpleQuery(n,t)}}isBinarySelectQuery(e){return"left"in e&&"right"in e&&"operator"in e}extractDependenciesFromSimpleQuery(e,t){var n,r;if(this.extractFromSource(null==(n=e.fromClause)?void 0:n.source,t),null==(r=e.fromClause)?void 0:r.joins)for(const a of e.fromClause.joins)this.extractFromSource(a.source,t)}extractCTEQueryString(e){if(!e.query)throw new Error("CTE object does not have a query property");try{const t=new l;return t.format(e.query).formattedSql}catch(t){throw t}}reconstructMainQuery(e,t){if(!t.withClause)return e;if(!e.match(/^WITH\s+(?:RECURSIVE\s+)?/i))return e;const n=e.match(/\)\s*(SELECT|INSERT|UPDATE|DELETE)/is);if(n&&void 0!==n.index){const t=n.index+n[0].indexOf(n[1]);return e.substring(t).trim()}return e}extractMainQueryManually(e){if(!(e=e.trim()).match(/^WITH\s+/i))return e;let t=0,n=!1,r="",a=-1,s=!1;for(let i=0;i<e.length;i++){const l=e[i],o=i>0?e[i-1]:"";"'"!==l&&'"'!==l||"\\"===o?n||("("===l?(t++,s=!0):")"===l&&(t--,0===t&&s&&(a=i))):n?l===r&&(n=!1):(n=!0,r=l)}if(-1!==a){return e.substring(a+1).trim().replace(/^,?\s*/,"")}return e}extractFromSource(e,t){var n,r,a;e&&((null==(r=null==(n=e.datasource)?void 0:n.table)?void 0:r.name)&&t.add(e.datasource.table.name),null==(a=e.datasource)||a.query)}}class $u{resolveDependencies(e,t){const n=t[e];if(!n)throw new Error(`CTE not found: ${e}`);const r=new Set,a=new Set,s=[],i=e=>{if(r.has(e))return;if(a.has(e))throw new Error("Circular dependency detected");a.add(e);const n=t[e];if(n&&n.dependencies)for(const r of n.dependencies)t[r]&&i(r);a.delete(e),r.add(e),s.push(e)};if(i(e),1===s.length&&s[0]===e)return n.query;return`WITH ${s.map(e=>`${e} AS (\n    ${t[e].query.replace(/\n/g,"\n    ")}\n)`).join(",\n")}\nSELECT * FROM ${e}`}validateNoCycles(e){try{const t=new Set,n=new Set,r=a=>{if(t.has(a))return;if(n.has(a))throw new Error("Circular dependency detected");n.add(a);const s=e[a];if(s&&s.dependencies)for(const t of s.dependencies)e[t]&&r(t);n.delete(a),t.add(a)};for(const a of Object.keys(e))t.has(a)||r(a);return!0}catch(t){return!1}}getExecutionOrder(e){const t=new Set,n=new Set,r=[],a=s=>{if(t.has(s))return;if(n.has(s))throw new Error("Circular dependency detected");n.add(s);const i=e[s];if(i&&i.dependencies)for(const t of i.dependencies)e[t]&&a(t);n.delete(s),t.add(s),r.push(s)};for(const s of Object.keys(e))t.has(s)||a(s);return r}findDependents(e,t){const n=[];for(const[r,a]of Object.entries(t))a.dependencies.includes(e)&&n.push(r);return n}getDependencyGraph(e){const t={};for(const[n,r]of Object.entries(e))t[n]=[...r.dependencies];return t}}class Qu{constructor(){t(this,"resolver"),this.resolver=new $u}findDependents(e,t){const n={};for(const[r,a]of Object.entries(t))n[r]={name:a.name,query:a.query,dependencies:a.dependencies,columns:a.columns,description:a.description};return this.resolver.findDependents(e,n)}getDependencyGraph(e){const t={};for(const[n,r]of Object.entries(e))t[n]={name:r.name,query:r.query,dependencies:r.dependencies,columns:r.columns,description:r.description};return this.resolver.getDependencyGraph(t)}}class Vu{constructor(e,n){t(this,"decomposer"),this.name=e,this.sql=n;const r=new Au,a=new Qu;this.decomposer=new zu(r,a)}canExecute(){return this.name.trim().length>0&&this.sql.trim().length>0}async execute(){const e=this.name.trim(),t=this.sql.trim();if(!e)throw new Error("Workspace name is required");if(!t)throw new Error("SQL query is required");try{const n=await this.decomposer.decomposeSql(t,`${e}.sql`,new Pu),r=new Du(Du.generateId(),e,`${e}.sql`,n,new Lu(""),new Pu,new Fu,{});r.filterConditions.initializeFromModels(n);const a=n.find(e=>"main"===e.type);return a&&r.openSqlModelTab(a),r}catch(n){if(n instanceof Error)throw new Error(`SQL parsing failed: ${n.message}`);throw new Error("Failed to create workspace")}}}class Uu{constructor(){t(this,"_listeners",[])}subscribe(e){return this._listeners.push(e),()=>{const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}notifyChange(e,t){this._listeners.forEach(n=>n(e,t))}dispose(){this._listeners.length=0}}class Bu extends Uu{constructor(){super(...arguments),t(this,"_name",""),t(this,"_sql",""),t(this,"_isLoading",!1),t(this,"_error",null),t(this,"onWorkspaceCreated")}get name(){return this._name}set name(e){this._name!==e&&(this._name=e,this.notifyChange("name",e))}get sql(){return this._sql}set sql(e){this._sql!==e&&(this._sql=e,this.notifyChange("sql",e))}get isLoading(){return this._isLoading}set isLoading(e){this._isLoading!==e&&(this._isLoading=e,this.notifyChange("isLoading",e))}get error(){return this._error}set error(e){this._error!==e&&(this._error=e,this.notifyChange("error",e))}get canExecute(){return!this._isLoading&&this._name.trim().length>0&&this._sql.trim().length>0}async executeCreateWorkspace(){var e;if(this.canExecute){this.isLoading=!0,this.error=null;try{const t=this.createCommand(),n=await t.execute();null==(e=this.onWorkspaceCreated)||e.call(this,n),this.resetForm()}catch(t){this.error=t instanceof Error?t.message:"Unknown error occurred"}finally{this.isLoading=!1}}}clearError(){this.error=null}dispose(){super.dispose()}createCommand(){return new Vu(this._name,this._sql)}resetForm(){this.name="",this.sql="",this.error=null}}function Hu(e){const[,t]=n.useState({}),r=n.useRef(null);return n.useEffect(()=>(r.current=e.subscribe((e,n)=>{t({})}),()=>{r.current&&r.current()}),[e]),e}const Ju=({isOpen:e,onClose:t,onWorkspaceCreated:r})=>{const a=n.useRef(null);a.current||(a.current=new Bu);const s=Hu(a.current);n.useEffect(()=>{s&&(s.onWorkspaceCreated=e=>{null==r||r(e),t()})},[s,r,t]),n.useEffect(()=>()=>{a.current&&a.current.dispose()},[]);return e?S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:S.jsxs("div",{className:"bg-dark-secondary border border-dark-border-primary rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] flex flex-col",children:[S.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-border-primary",children:[S.jsx("h2",{className:"text-lg font-semibold text-dark-text-white",children:"Create New Workspace"}),S.jsx("button",{onClick:t,className:"text-dark-text-secondary hover:text-dark-text-primary",disabled:s.isLoading,children:""})]}),S.jsxs("form",{onSubmit:async e=>{e.preventDefault(),await s.executeCreateWorkspace()},className:"flex-1 flex flex-col overflow-hidden",children:[S.jsxs("div",{className:"p-4 space-y-4",children:[s.error&&S.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 rounded p-3 text-red-400 text-sm",children:[s.error,S.jsx("button",{onClick:()=>s.clearError(),className:"ml-2 text-red-300 hover:text-red-200",children:""})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"workspace-name",className:"block text-sm font-medium text-dark-text-white mb-2",children:"Workspace Name"}),S.jsx("input",{id:"workspace-name",type:"text",value:s.name,onChange:e=>s.name=e.target.value,placeholder:"Enter workspace name...",className:"w-full px-3 py-2 bg-dark-primary border border-dark-border-primary rounded text-dark-text-primary placeholder-dark-text-muted focus:outline-none focus:border-primary-600 transition-colors duration-200 autofill-dark",disabled:s.isLoading,required:!0})]}),S.jsxs("div",{className:"flex-1 flex flex-col",children:[S.jsx("label",{htmlFor:"sql-query",className:"block text-sm font-medium text-dark-text-white mb-2",children:"SQL Query"}),S.jsx("textarea",{id:"sql-query",value:s.sql,onChange:e=>s.sql=e.target.value,placeholder:"Paste your SQL query with CTEs here...",className:"w-full h-64 px-3 py-2 bg-dark-primary border border-dark-border-primary rounded text-dark-text-primary placeholder-dark-text-muted font-mono text-sm resize-none focus:outline-none focus:border-primary-600 transition-colors duration-200",disabled:s.isLoading,required:!0})]})]}),S.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-dark-border-primary",children:[S.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-dark-text-primary hover:bg-dark-hover rounded transition-colors",disabled:s.isLoading,children:"Cancel"}),S.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!s.canExecute,children:s.isLoading?"Creating...":"Create Workspace"})]})]})]})}):null};class Ku{constructor(e,t,n){this.workspaceRepository=e,this.sqlParser=t,this.cteResolver=n}async createWorkspace(e){try{await this.sqlParser.parseQuery(e.sql);await this.sqlParser.extractCTEs(e.sql);const t=await this.sqlParser.formatQuery(e.sql,{withClauseStyle:"full-oneline",keywordCase:"lower",indentSize:4}),n=new Du(Du.generateId(),e.name,e.originalFilePath||null,[]),r=await this.workspaceRepository.save(n);if(!r.success)return{success:!1,error:r.error||"Failed to save workspace"};const a=n.toWorkspaceInterface();return a.originalQuery=e.sql,a.decomposedQuery=t,e.originalFilePath&&(a.originalFilePath=e.originalFilePath),{success:!0,data:a,message:"Workspace created successfully"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to create workspace"}}}async loadWorkspace(){try{const e=await this.workspaceRepository.findById("current");if(!e.success||!e.data)return{success:!0,data:null};return{success:!0,data:e.data.toWorkspaceInterface()}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to load workspace"}}}async updateCTE(e){try{const t=await this.workspaceRepository.findById("current");if(!t.success||!t.data)return{success:!1,error:"No active workspace found"};const n=t.data,r=await this.workspaceRepository.save(n);if(!r.success)return{success:!1,error:r.error||"Failed to save workspace"};return{success:!0,data:n.toWorkspaceInterface(),message:`CTE ${e.cteName} updated successfully`}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to update CTE"}}}async generateExecutableCTE(e){try{const t=await this.workspaceRepository.findById("current");if(!t.success||!t.data)return{success:!1,error:"No active workspace found"};const n=t.data.toWorkspaceInterface();if(!n.privateCtes[e])return{success:!1,error:`CTE not found: ${e}`};return{success:!0,data:this.cteResolver.resolveDependencies(e,n.privateCtes)}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to generate executable CTE"}}}async validateWorkspace(){try{const t=await this.workspaceRepository.findById("current");if(!t.success||!t.data)return{success:!1,error:"No active workspace found"};const n=t.data.toWorkspaceInterface(),r=[];try{this.cteResolver.validateNoCycles(n.privateCtes)||r.push("Circular dependency detected in CTEs")}catch(e){r.push(`Dependency validation error: ${e instanceof Error?e.message:"Unknown error"}`)}for(const[a,s]of Object.entries(n.privateCtes))try{await this.sqlParser.parseQuery(s.query)}catch(e){r.push(`Invalid SQL syntax in CTE '${a}': ${e instanceof Error?e.message:"Unknown error"}`)}return{success:!0,data:{isValid:0===r.length,errors:r}}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to validate workspace"}}}async clearWorkspace(){try{return await this.workspaceRepository.clear(),{success:!0,message:"Workspace cleared successfully"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to clear workspace"}}}}const Gu="zosql_workspaces",Yu="zosql_workspace_index",Xu="zosql_workspace_metadata";class Zu{async save(e){try{const t=e.toJSON(),n=`${Gu}_${e.id}`;return localStorage.setItem(n,JSON.stringify(t)),await this.updateIndex(e),{success:!0,data:e}}catch(t){return{success:!1,error:`LocalStorage save failed: ${t instanceof Error?t.message:"Failed to save workspace"}`}}}async findById(e){if(!e.trim())return{success:!1,error:"Workspace ID is required"};try{const t=`${Gu}_${e}`,n=localStorage.getItem(t);if(!n)return{success:!1,error:`Workspace with ID '${e}' not found`};const r=JSON.parse(n);return{success:!0,data:Du.fromJSON(r)}}catch(t){return{success:!1,error:`LocalStorage load failed: ${t instanceof Error?t.message:"Failed to load workspace"}`}}}async findByName(e){if(!e.trim())return{success:!1,error:"Workspace name is required"};try{const t=this.getIndex(),n=Object.keys(t).find(n=>t[n].name.toLowerCase()===e.toLowerCase());return n?await this.findById(n):{success:!1,error:`Workspace with name '${e}' not found`}}catch(t){return{success:!1,error:`Name lookup failed: ${t instanceof Error?t.message:"Failed to find workspace by name"}`}}}async findByCriteria(e){try{const t=this.getIndex(),n=[];for(const[l,o]of Object.entries(t))this.matchesCriteria(o,e)&&n.push(l);const r=e.offset||0,a=e.limit?r+e.limit:n.length,s=n.slice(r,a),i=[];for(const e of s){const t=await this.findById(e);t.success&&t.data&&i.push(t.data)}return{success:!0,data:i}}catch(t){return{success:!1,error:`Search failed: ${t instanceof Error?t.message:"Failed to search workspaces"}`}}}async findAll(e){return await this.findByCriteria({limit:e})}async update(e){return await this.exists(e.id)?await this.save(e):{success:!1,error:`Workspace with ID '${e.id}' not found for update`}}async delete(e){if(!e.trim())return{success:!1,error:"Workspace ID is required for deletion"};try{const t=`${Gu}_${e}`;return null!==localStorage.getItem(t)?(localStorage.removeItem(t),await this.removeFromIndex(e),{success:!0}):{success:!1,error:`Workspace with ID '${e}' not found for deletion`}}catch(t){return{success:!1,error:`Delete failed: ${t instanceof Error?t.message:"Failed to delete workspace"}`}}}async exists(e){if(!e.trim())return!1;const t=`${Gu}_${e}`;return null!==localStorage.getItem(t)}async count(e){var t;if(!e){const e=this.getIndex();return Object.keys(e).length}const n=await this.findByCriteria(e);return n.success&&(null==(t=n.data)?void 0:t.length)||0}async clear(){try{const e=this.getIndex(),t=Object.keys(e);for(const n of t){const e=`${Gu}_${n}`;localStorage.removeItem(e)}return localStorage.removeItem(Yu),localStorage.removeItem(Xu),{success:!0}}catch(e){return{success:!1,error:`Clear failed: ${e instanceof Error?e.message:"Failed to clear workspaces"}`}}}getIndex(){try{const e=localStorage.getItem(Yu);return e?JSON.parse(e):{}}catch(e){return{}}}async updateIndex(e){try{const t=this.getIndex();t[e.id]={name:e.name,createdAt:e.created,lastModified:(new Date).toISOString(),tags:[]},localStorage.setItem(Yu,JSON.stringify(t))}catch(t){}}async removeFromIndex(e){try{const t=this.getIndex();delete t[e],localStorage.setItem(Yu,JSON.stringify(t))}catch(t){}}matchesCriteria(e,t){if(t.name&&!e.name.toLowerCase().includes(t.name.toLowerCase()))return!1;const n=new Date(e.createdAt),r=new Date(e.lastModified);if(t.createdAfter&&n<t.createdAfter)return!1;if(t.createdBefore&&n>t.createdBefore)return!1;if(t.lastModifiedAfter&&r<t.lastModifiedAfter)return!1;if(t.tags&&t.tags.length>0){if(!t.tags.some(t=>e.tags.includes(t)))return!1}return!0}}class ed{async parseQuery(e){try{const t=i.parse(e);return{type:"simple",withClause:t.toSimpleQuery().withClause?{tables:[]}:void 0,ctes:[]}}catch(t){throw new Error(`SQL parsing failed: ${t instanceof Error?t.message:"Unknown error"}`)}}async extractCTEs(e){var t,n;try{const r=i.parse(e).toSimpleQuery(),a=[];if(r.withClause&&r.withClause.tables)for(const e of r.withClause.tables){const r=(null==(n=null==(t=e.aliasExpression)?void 0:t.table)?void 0:n.name)||"unknown",s=await this.extractCTEQuery(e),i=await this.extractCTEDependencies(e),l=new Wu(r,s,i,[],`Extracted CTE: ${r}`);a.push(l)}return a}catch(r){throw new Error(`CTE extraction failed: ${r instanceof Error?r.message:"Unknown error"}`)}}async formatQuery(e,t={}){try{const n=i.parse(e),r={indent:t.indentSize?" ".repeat(t.indentSize):"  ",keywordCase:t.uppercase?"upper":"lower",linesBetweenQueries:t.linesBetweenQueries||1},a=new l(r);return a.format(n).formattedSql}catch(n){throw new Error(`SQL formatting failed: ${n instanceof Error?n.message:"Unknown error"}`)}}async extractCTEQuery(e){if(!e||!e.query)return"";try{return"function"==typeof e.query.toSqlString?e.query.toSqlString():""}catch(t){return`-- CTE extraction failed: ${t instanceof Error?t.message:"Unknown error"}`}}async extractCTEDependencies(e){const t=[];if(!e||!e.query)return t;try{const n=await this.extractCTEQuery(e);if(n){const e=n.match(/\b(?:FROM|JOIN)\s+([a-zA-Z][a-zA-Z0-9_]*)/gi);e&&e.forEach(e=>{const n=e.replace(/^(?:FROM|JOIN)\s+/i,"").trim();n&&/^[a-zA-Z][a-zA-Z0-9_]*$/.test(n)&&t.push(n)})}}catch(n){}return[...new Set(t)]}}const td=n.createContext(void 0),nd=()=>{const e=n.useContext(td);if(!e)throw new Error("useWorkspace must be used within a WorkspaceProvider");return e},rd=({children:e})=>{const[t,r]=n.useState(null),[a,s]=n.useState(!1),[i,l]=n.useState(null),o=new Ku(new Zu,new ed,new $u),c=e=>{if(!e.success)throw new Error(e.error||"Unknown error");return e.data},u=async()=>{s(!0),l(null);try{const e=await o.loadWorkspace(),t=c(e);r(t)}catch(e){const t=e instanceof Error?e.message:"Failed to load workspace";l(t)}finally{s(!1)}};n.useEffect(()=>{u()},[]);const d={workspace:t,isLoading:a,error:i,createWorkspace:async e=>{s(!0),l(null);try{const t=await o.createWorkspace(e),n=c(t);r(n)}catch(t){const e=t instanceof Error?t.message:"Failed to create workspace";throw l(e),t}finally{s(!1)}},loadWorkspace:u,updateCTE:async(e,t,n)=>{l(null);try{const r=await o.updateCTE({cteName:e,query:t,description:n});c(r),await u()}catch(r){const e=r instanceof Error?r.message:"Failed to update CTE";throw l(e),r}},generateExecutableCTE:async e=>{l(null);try{const t=await o.generateExecutableCTE(e);return c(t)}catch(t){const e=t instanceof Error?t.message:"Failed to generate executable CTE";throw l(e),t}},clearWorkspace:async()=>{l(null);try{const e=await o.clearWorkspace();c(e),r(null)}catch(e){const t=e instanceof Error?e.message:"Failed to clear workspace";throw l(t),e}},validateWorkspace:async()=>{l(null);try{const e=await o.validateWorkspace();return c(e)}catch(e){const t=e instanceof Error?e.message:"Failed to validate workspace";throw l(t),e}}};return S.jsx(td.Provider,{value:d,children:e})},ad=({isOpen:e,onClose:t,onFileOpen:r,onWorkspaceOpen:a})=>{const[s,i]=n.useState(null),[l,o]=n.useState(""),[c,u]=n.useState(""),[d,f]=n.useState(!1),[p,m]=n.useState(!1),h=n.useRef(null),{createWorkspace:y}=nd(),g=e=>{const t=e.name.toLowerCase();if(!t.endsWith(".sql")&&!t.endsWith(".json"))return void alert("Please select a .sql or .json file");i(e),u(e.name.replace(/\.(sql|json)$/,""));const n=new FileReader;n.onload=e=>{var t;const n=null==(t=e.target)?void 0:t.result;o(n)},n.readAsText(e)},b=()=>{i(null),o(""),u(""),m(!1),h.current&&(h.current.value="")},v=()=>{b(),t()};return e?S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:S.jsxs("div",{className:"bg-dark-secondary border border-dark-border-primary rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] flex flex-col",children:[S.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-border-primary",children:[S.jsx("h2",{className:"text-lg font-semibold text-dark-text-white",children:"Open File"}),S.jsx("button",{onClick:v,className:"text-dark-text-secondary hover:text-dark-text-primary",disabled:d,children:""})]}),S.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),s&&l.trim()&&c.trim()){f(!0);try{const e=s.name.toLowerCase();if(e.endsWith(".json"))try{const e=JSON.parse(l);a?await a(e):alert("Workspace open handler not available")}catch(n){return void alert("Invalid JSON file format")}else e.endsWith(".sql")&&(r?await r(s):await y({name:c.trim(),sql:l.trim(),originalFilePath:s.name}));i(null),o(""),u(""),t()}catch(d){alert("Failed to process file: "+(d instanceof Error?d.message:"Unknown error"))}finally{f(!1)}}},className:"flex-1 flex flex-col overflow-hidden",children:[S.jsxs("div",{className:"p-4 space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-dark-text-white mb-2",children:"Select SQL or Workspace File"}),s?S.jsx("div",{className:"w-full p-3 border border-dark-border-primary rounded-lg bg-dark-primary",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-lg",children:""}),S.jsxs("div",{children:[S.jsx("div",{className:"text-sm font-medium text-dark-text-white",children:s.name}),S.jsxs("div",{className:"text-xs text-dark-text-secondary",children:[(s.size/1024).toFixed(1)," KB"]})]})]}),S.jsx("button",{type:"button",onClick:b,className:"text-dark-text-secondary hover:text-dark-text-primary text-sm",disabled:d,children:"Change"})]})}):S.jsx("div",{className:`\n                    w-full h-32 border-2 border-dashed rounded-lg flex flex-col items-center justify-center cursor-pointer transition-colors\n                    ${p?"border-primary-600 bg-primary-600 bg-opacity-10":"border-dark-border-primary hover:border-dark-border-accent"}\n                  `,onDragOver:e=>{e.preventDefault(),m(!0)},onDragLeave:e=>{e.preventDefault(),m(!1)},onDrop:e=>{e.preventDefault(),m(!1);const t=e.dataTransfer.files;t.length>0&&g(t[0])},onClick:()=>{var e;return null==(e=h.current)?void 0:e.click()},children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-2xl mb-2",children:""}),S.jsx("div",{className:"text-sm text-dark-text-primary",children:"Drop file here or click to browse"}),S.jsx("div",{className:"text-xs text-dark-text-secondary mt-1",children:"Supports .sql and .json files"})]})}),S.jsx("input",{ref:h,type:"file",accept:".sql,.json",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];n&&g(n)},className:"hidden",disabled:d})]}),s&&S.jsxs("div",{children:[S.jsx("label",{htmlFor:"workspace-name",className:"block text-sm font-medium text-dark-text-white mb-2",children:"Workspace Name"}),S.jsx("input",{id:"workspace-name",type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"Enter workspace name...",className:"w-full px-3 py-2 bg-dark-primary border border-dark-border-primary rounded text-dark-text-primary placeholder-dark-text-muted focus:outline-none focus:border-primary-600",disabled:d,required:!0})]}),l&&S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-dark-text-white mb-2",children:"File Preview"}),S.jsx("div",{className:"w-full h-48 bg-dark-primary border border-dark-border-primary rounded overflow-hidden",children:S.jsxs("pre",{className:"w-full h-full p-3 text-xs text-dark-text-primary font-mono overflow-auto",children:[l.substring(0,2e3),l.length>2e3&&"\n... (truncated)"]})}),S.jsxs("div",{className:"text-xs text-dark-text-secondary mt-1",children:[l.split("\n").length," lines, ",l.length," characters"]})]})]}),S.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-dark-border-primary",children:[S.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-dark-text-primary hover:bg-dark-hover rounded transition-colors",disabled:d,children:"Cancel"}),S.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:d||!s||!c.trim(),children:d?"Opening...":"Open File"})]})]})]})}):null},sd=n.createContext(void 0),id=({children:e})=>{const[t,r]=n.useState(null),a={insertAtCursor:e=>{if(!t)return;const n=t.getSelection()||{startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1};t.executeEdits("insert-values",[{range:n,text:e,forceMoveMarkers:!0}]);const r=e.split("\n"),a=n.startLineNumber+r.length-1,s=1===r.length?n.startColumn+r[0].length:r[r.length-1].length+1;t.setPosition({lineNumber:a,column:s}),t.focus()},replaceContent:e=>{t&&(t.setValue(e),t.focus())},getCurrentContent:()=>t?t.getValue():"",setEditorRef:r};return S.jsx(sd.Provider,{value:a,children:e})};let ld=!1;const od=({value:e,onChange:t,language:r="sql",readOnly:s=!1,height:i="100%",onMount:l,isMainEditor:o=!1,options:c={},onKeyDown:u,workspace:d,refreshTrigger:f=0,searchTerm:p})=>{const m=n.useRef(null),h=n.useRef(null),{setEditorRef:y}=(()=>{const e=n.useContext(sd);if(!e)throw new Error("useEditor must be used within an EditorProvider");return e})();n.useEffect(()=>()=>{},[r,o]);const g=()=>{if(!d)return 2;try{const e=JSON.parse(d.formatter.config),t=(null==e?void 0:e.indentSize)||2;return"number"==typeof t?t:2}catch(e){return 2}};n.useEffect(()=>{if("sql"===r&&m.current&&h.current){const e=m.current.getModel();if(e){"sql"!==e.getLanguageId()&&h.current.editor.setModelLanguage(e,"sql")}}},[r]);const b=d?g():4,v=null==d?void 0:d.id;n.useEffect(()=>{m.current&&"sql"===r&&d&&(Iu.debug("MonacoEditor","Updating Monaco editor indent settings, indentSize:",b),m.current.updateOptions({tabSize:b,insertSpaces:!0}),Iu.debug("MonacoEditor","Updated Monaco editor with tabSize:",b))},[v,r,b]),n.useEffect(()=>{if(m.current){m.current.getValue()!==e&&m.current.setValue(e)}},[e]),n.useEffect(()=>{if(p&&m.current){const t=m.current;try{const e=t.getContribution("editor.contrib.findController");e&&(e.closeFindWidget(),setTimeout(()=>{var n;null==(n=t.getAction("actions.find"))||n.run(),setTimeout(()=>{var t,n;try{const r=e.getState();r&&(null==(t=r.change)||t.call(r,{searchString:p,isRegex:!1,matchCase:!1,wholeWord:!1},!1),null==(n=e.moveToNextMatch)||n.call(e))}catch(r){}},50)},50))}catch(e){}}},[p]);const x={theme:"zosql-dark",fontSize:14,fontFamily:"Consolas, Monaco, Courier New, monospace",lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,readOnly:s,minimap:{enabled:!1},folding:!0,lineDecorationsWidth:10,lineNumbersMinChars:3,glyphMargin:!1,automaticLayout:!0,tabSize:g(),insertSpaces:!0,wordWrap:"off",contextmenu:!0,mouseWheelZoom:!0,smoothScrolling:!0,cursorSmoothCaretAnimation:"on",renderLineHighlight:"line",selectionHighlight:!0,occurrencesHighlight:"singleFile",suggest:{showKeywords:!0,showSnippets:!0,showFunctions:!0},quickSuggestions:{other:!0,comments:!1,strings:!1},parameterHints:{enabled:!0},acceptSuggestionOnCommitCharacter:!0,acceptSuggestionOnEnter:"on",accessibilitySupport:"auto",...c};return S.jsx("div",{className:"h-full w-full",children:S.jsx(a,{height:i,language:r,value:e,onChange:e=>{void 0!==e&&t(e)},onMount:(e,t)=>{if(m.current=e,h.current=t,o&&y(e),ld||(t.editor.defineTheme("zosql-dark",{base:"vs-dark",inherit:!0,rules:[{token:"keyword",foreground:"569cd6"},{token:"keyword.uppercase",foreground:"569cd6"},{token:"string",foreground:"ce9178"},{token:"comment",foreground:"6a9955"},{token:"number",foreground:"b5cea8"},{token:"operator",foreground:"d4d4d4"},{token:"delimiter",foreground:"d4d4d4"}],colors:{"editor.background":"#1e1e1e","editor.foreground":"#cccccc","editor.lineHighlightBackground":"#2d2d30","editor.selectionBackground":"#264f78","editor.inactiveSelectionBackground":"#3a3d41","editorCursor.foreground":"#ffffff","editorWhitespace.foreground":"#404040","editorLineNumber.foreground":"#858585","editorLineNumber.activeForeground":"#c6c6c6"}}),ld=!0),t.editor.setTheme("zosql-dark"),"sql"===r){t.languages.setLanguageConfiguration("sql",{comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["(",")"],["[","]"]],autoClosingPairs:[{open:"(",close:")"},{open:"[",close:"]"},{open:"'",close:"'"},{open:'"',close:'"'}],surroundingPairs:[{open:"(",close:")"},{open:"[",close:"]"},{open:"'",close:"'"},{open:'"',close:'"'}]}),t.languages.setMonarchTokensProvider("sql",{keywords:["SELECT","FROM","WHERE","JOIN","INNER","LEFT","RIGHT","FULL","OUTER","ON","AS","WITH","CTE","UNION","INTERSECT","EXCEPT","ORDER","BY","GROUP","HAVING","INSERT","UPDATE","DELETE","CREATE","DROP","ALTER","TABLE","VIEW","INDEX","DATABASE","SCHEMA","AND","OR","NOT","IN","EXISTS","BETWEEN","LIKE","IS","NULL","DISTINCT","COUNT","SUM","AVG","MIN","MAX","CASE","WHEN","THEN","ELSE","END","ROW_NUMBER","PARTITION","CURRENT_DATE","CURRENT_TIMESTAMP","INTERVAL","OVER","select","from","where","join","inner","left","right","full","outer","on","as","with","cte","union","intersect","except","order","by","group","having","insert","update","delete","create","drop","alter","table","view","index","database","schema","and","or","not","in","exists","between","like","is","null","distinct","count","sum","avg","min","max","case","when","then","else","end","row_number","partition","current_date","current_timestamp","interval","over"],operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!~?:&|+\-*/^%]+/,tokenizer:{root:[[/[a-zA-Z_$][\w$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[;,.]/,"delimiter"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/'/,{token:"string.quote",bracket:"@open",next:"@string"}],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@dblstring"}]],comment:[[/[^/*]+/,"comment"],[/\/\*/,"comment","@push"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],string:[[/[^\\']+/,"string"],[/\\./,"string.escape.invalid"],[/'/,{token:"string.quote",bracket:"@close",next:"@pop"}]],dblstring:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/--.*$/,"comment"]]}});const n=e.getModel();if(n){"sql"!==n.getLanguageId()&&t.editor.setModelLanguage(n,"sql")}}u&&(e.addAction({id:"execute-query",label:"Execute Query",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.Enter],run:()=>{const e=document.querySelector('button[title="Run Query (Ctrl+Enter)"]');if(e&&!e.disabled)e.click();else{const e=new KeyboardEvent("keydown",{ctrlKey:!0,key:"Enter"});u(e)}}}),e.addAction({id:"format-sql",label:"Format SQL",keybindings:[t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.KeyF],run:()=>{const e=Array.from(document.querySelectorAll("button")).find(e=>{var t;return"Format"===(null==(t=e.textContent)?void 0:t.trim())});if(e&&!e.disabled)e.click();else{const e=new KeyboardEvent("keydown",{ctrlKey:!0,shiftKey:!0,key:"F"});u(e)}}}),e.onKeyDown(e=>{if(e.ctrlKey&&"Enter"===e.code)return;if(e.ctrlKey&&e.shiftKey&&"KeyF"===e.code)return;const t=new KeyboardEvent("keydown",{ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,key:"Enter"===e.code?"Enter":e.browserEvent.key});u(t)})),l&&l(e,t)},options:x})})},cd=({isOpen:e,onClose:t,finalSql:r,isLoading:a=!1,error:s})=>{const[i,l]=n.useState(!1);n.useEffect(()=>{e&&l(!1)},[e]),n.useEffect(()=>{const n=n=>{"Escape"===n.key&&e&&t()};if(e)return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e,t]);return e?S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:S.jsxs("div",{className:"bg-dark-secondary border border-dark-border-primary rounded-lg shadow-xl w-4/5 h-4/5 max-w-6xl max-h-[90vh] flex flex-col",children:[S.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-border-primary",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("h2",{className:"text-lg font-semibold text-dark-text-white",children:"Final SQL"}),S.jsx("span",{className:"text-xs text-dark-text-secondary bg-dark-tertiary px-2 py-1 rounded",children:"Production Ready"})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(r),l(!0),setTimeout(()=>l(!1),2e3)}catch(e){}},disabled:a||!!s,className:"px-3 py-1.5 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:i?" Copied!":"Copy"}),S.jsx("button",{onClick:()=>{const e=new Blob([r],{type:"text/sql"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="final-query.sql",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)},disabled:a||!!s,className:"px-3 py-1.5 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Download"}),S.jsx("button",{onClick:t,className:"px-3 py-1.5 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm",children:"Close"})]})]}),S.jsx("div",{className:"flex-1 p-4",children:S.jsx("div",{className:"h-full border border-dark-border-primary rounded bg-dark-primary",children:a?S.jsx("div",{className:"h-full flex items-center justify-center",children:S.jsx("div",{className:"text-dark-text-secondary",children:"Generating Final SQL..."})}):s?S.jsx("div",{className:"h-full flex items-center justify-center",children:S.jsxs("div",{className:"text-red-400 text-center",children:[S.jsx("div",{className:"mb-2",children:"Failed to generate Final SQL"}),S.jsx("div",{className:"text-sm text-dark-text-secondary",children:s})]})}):S.jsx(od,{value:r,onChange:()=>{},language:"sql",readOnly:!0,options:{minimap:{enabled:!0},scrollBeyondLastLine:!1,wordWrap:"on",lineNumbers:"on",folding:!0,readOnly:!0,contextmenu:!0,selectOnLineNumbers:!0}})})}),S.jsx("div",{className:"p-4 border-t border-dark-border-primary",children:S.jsxs("div",{className:"text-xs text-dark-text-secondary",children:[S.jsx("div",{className:"mb-1",children:S.jsx("strong",{children:"Final SQL contains:"})}),S.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[S.jsx("li",{children:"WITH clause composition (dependencies included)"}),S.jsx("li",{children:"Formatted according to workspace formatter settings"}),S.jsx("li",{children:"VALUES clause excluded (test data removed)"}),S.jsx("li",{children:"Filter conditions excluded (development-time only)"})]})]})})]})}):null},ud=({onToggleLeftSidebar:e,onToggleRightSidebar:t,leftSidebarVisible:r,rightSidebarVisible:a,onFileOpen:s,onWorkspaceCreated:i,onWorkspaceSave:l,onViewFinalSql:o,currentWorkspace:c})=>{const[u,d]=n.useState(!1),[f,p]=n.useState(!1),[m,h]=n.useState(!1),[y,g]=n.useState({sql:"",error:"",isLoading:!1});return n.useEffect(()=>{const e=e=>{e.ctrlKey&&e.shiftKey&&"W"===e.key&&(e.preventDefault(),c&&l&&l())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c,l]),S.jsxs("header",{className:"bg-dark-tertiary border-b border-dark-border-primary px-4 py-3 flex items-center justify-between h-header",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("button",{onClick:e,className:"px-2 py-1 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm",title:"Toggle Left Sidebar",children:r?"":""}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("h1",{className:"text-lg font-bold text-dark-text-white",children:"zosql"}),S.jsx("span",{className:"text-xs text-dark-text-secondary",children:"v2.0"})]})]}),S.jsx("div",{className:"flex items-center gap-4"}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsxs("div",{className:"flex items-center bg-dark-hover rounded",children:[S.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1 bg-primary-600 text-white rounded-l hover:bg-primary-700 transition-colors text-sm font-medium",title:"New Workspace",children:"New"}),S.jsx("button",{onClick:()=>p(!0),className:"px-3 py-1 bg-primary-600 text-white rounded-r hover:bg-primary-700 transition-colors text-sm font-medium border-l border-primary-700",title:"Open SQL File",children:"Open"})]}),S.jsx("button",{onClick:l,disabled:!c,className:"px-3 py-1 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:"Save Workspace as JSON (Ctrl+Shift+W)",children:"Save Workspace"}),S.jsx("button",{onClick:async()=>{if(c&&o){g({sql:"",error:"",isLoading:!0}),h(!0);try{const e=await o();g({sql:e.sql,error:e.error||"",isLoading:!1})}catch(e){g({sql:"",error:e instanceof Error?e.message:"Unknown error occurred",isLoading:!1})}}},disabled:!c,className:"px-3 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",title:"View Final SQL (Production Ready)",children:"View Final SQL"}),S.jsx("div",{className:"w-px h-6 bg-dark-border-primary mx-2"}),S.jsx("button",{onClick:t,className:"px-2 py-1 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm",title:"Toggle Right Sidebar",children:a?"":""})]}),S.jsx(Ju,{isOpen:u,onClose:()=>d(!1),onWorkspaceCreated:i}),S.jsx(ad,{isOpen:f,onClose:()=>p(!1),onFileOpen:s,onWorkspaceOpen:async e=>{if(i)try{const t=Du.fromJSON(e);i(t)}catch(t){}}}),S.jsx(cd,{isOpen:m,onClose:()=>h(!1),finalSql:y.sql,isLoading:y.isLoading,error:y.error})]})},dd=({models:e,onModelClick:t,selectedModelName:r,onOpenValuesTab:a,isValuesTabActive:s=!1,workspace:i})=>{Iu.debug("SqlModelsList",`render - selectedModelName: ${r}, isValuesTabActive: ${s}`),Iu.debug("SqlModelsList",`workspace validation results available: ${!!(null==i?void 0:i.getValidationResult)}`);const l=n.useMemo(()=>({selectedModelName:r,isValuesTabActive:s}),[r,s]),o=e=>{const t=(e=>{if(!i)return Iu.debug("SqlModelsList","getValidationStatus: no workspace"),null;const t=i.getValidationResult(e);return Iu.debug("SqlModelsList",`getValidationStatus for ${e}: ${JSON.stringify(t)}`),t})(e);return t?t.success?(Iu.debug("SqlModelsList",`Rendering success icon for ${e}`),S.jsx("span",{className:"text-xs text-green-400",title:"Static analysis passed",children:""})):(Iu.debug("SqlModelsList",`Rendering error icon for ${e}`),S.jsx("span",{className:"text-xs text-red-400",title:`Static analysis failed: ${t.error}`,children:""})):null};if(!e||0===e.length)return S.jsx("div",{className:"text-sm text-dark-text-primary opacity-75",children:"No SQL models loaded"});const c=e.filter(e=>"main"===e.type),u=e.filter(e=>"cte"===e.type);return S.jsxs("div",{className:"space-y-4",children:[c.length>0&&S.jsxs("div",{children:[S.jsx("h4",{className:"text-xs font-medium text-dark-text-secondary uppercase mb-2",children:"Main Query"}),S.jsx("div",{className:"space-y-1",children:c.map(e=>{const n=!l.isValuesTabActive&&l.selectedModelName===e.name;return Iu.debug("SqlModelsList",`Root model ${e.name} isSelected: ${n}, selectedModelName: ${l.selectedModelName}, isValuesTabActive: ${l.isValuesTabActive}`),S.jsx("div",{onClick:()=>null==t?void 0:t(e),className:`\n                    p-2 cursor-pointer relative\n                    ${n?"bg-dark-hover text-dark-text-white border-l-2 border-primary-600":"hover:bg-dark-hover text-dark-text-primary"}\n                  `,children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-xs",children:""}),S.jsx("span",{className:"text-sm font-medium",children:"*root"}),o(e.name)]}),e.dependents.length>0&&S.jsxs("span",{className:"text-xs "+(n?"text-primary-400":"text-dark-text-secondary"),children:[e.dependents.length," deps"]})]})},e.name)})}),S.jsx("div",{className:"mt-2",children:S.jsx("div",{onClick:()=>null==a?void 0:a(),className:`\n                p-2 cursor-pointer relative\n                ${s?"bg-dark-hover text-dark-text-white border-l-2 border-primary-600":"hover:bg-dark-hover text-dark-text-primary"}\n              `,children:S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-xs",children:""}),S.jsx("span",{className:"text-sm font-medium",children:"*data"})]})})})]}),u.length>0&&S.jsxs("div",{children:[S.jsxs("h4",{className:"text-xs font-medium text-dark-text-secondary uppercase mb-2",children:["CTEs (",u.length,")"]}),S.jsx("div",{className:"space-y-1",children:u.map(e=>{const n=!l.isValuesTabActive&&l.selectedModelName===e.name;return Iu.debug("SqlModelsList",`CTE model ${e.name} isSelected: ${n}, selectedModelName: ${l.selectedModelName}, isValuesTabActive: ${l.isValuesTabActive}`),S.jsxs("div",{onClick:()=>null==t?void 0:t(e),className:`\n                    p-2 cursor-pointer relative\n                    ${n?"bg-dark-hover text-dark-text-white border-l-2 border-primary-600":"hover:bg-dark-hover text-dark-text-primary"}\n                  `,children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-xs",children:""}),S.jsx("span",{className:"text-sm font-medium",children:e.name}),o(e.name)]}),S.jsxs("div",{className:"flex items-center gap-2",children:[e.columns&&e.columns.length>0&&S.jsxs("span",{className:"text-xs "+(n?"text-primary-400":"text-dark-text-secondary"),children:[e.columns.length," cols"]}),e.dependents.length>0&&S.jsxs("span",{className:"text-xs "+(n?"text-primary-400":"text-dark-text-secondary"),children:[e.dependents.length," deps"]})]})]}),e.columns&&e.columns.length>0&&S.jsxs("div",{className:"text-xs mt-1 "+(n?"text-dark-text-primary opacity-90":"text-dark-text-primary opacity-75"),children:["Columns: ",e.columns.join(", ")]})]},e.name)})})]}),u.length>0&&S.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-border-primary",children:[S.jsx("h4",{className:"text-xs font-medium text-dark-text-secondary uppercase mb-2",children:"Dependency Summary"}),S.jsxs("div",{className:"text-xs text-dark-text-primary opacity-75 space-y-1",children:[S.jsxs("div",{children:["Total models: ",e.length]}),S.jsxs("div",{children:["Main query: ",c.length]}),S.jsxs("div",{children:["CTEs: ",u.length]}),u.length>0&&S.jsxs("div",{children:["Max depth: ",fd(e)]})]})]})]})};function fd(e){const t=new Map(e.map(e=>[e.name,e])),n=new Map;function r(e,a=new Set){if(n.has(e))return n.get(e);if(a.has(e))return 0;a.add(e);const s=t.get(e);if(!s||0===s.dependents.length)return n.set(e,0),0;const i=1+Math.max(...s.dependents.filter(e=>t.has(e.name)).map(e=>r(e.name,new Set(a))));return n.set(e,i),i}let a=0;for(const s of e)a=Math.max(a,r(s.name));return a}const pd=({onOpenValuesTab:e,sqlModels:t=[],onModelClick:r,selectedModelName:a,onDecomposeQuery:s,isDecomposing:i,workspace:l,activeTabId:o,showErrorWithDetails:c,showSuccess:u,mainContentRef:d})=>{const{isLoading:f}=nd(),[p,m]=n.useState(!1),[h,y]=n.useState({workspace:!1,sqlModels:!1,actions:!0,system:!0}),[,g]=n.useState({}),[b,v]=n.useState(0),x=(e,t)=>{var n;if(null==(n=null==l?void 0:l.layoutState)?void 0:n.leftSidebarCollapsed){return l.layoutState.leftSidebarCollapsed[e]??t}return h[e]??t},w=!x("workspace",!1),k=!x("sqlModels",!1),C=!x("actions",!0),E=!x("system",!0),N=e=>{var t;const n=x(e,"workspace"!==e&&"sqlModels"!==e);(null==(t=null==l?void 0:l.layoutState)?void 0:t.leftSidebarCollapsed)?(l.setSidebarSectionCollapsed(e,!n),g({})):y(t=>({...t,[e]:!n}))},j=({title:e,isExpanded:t,onToggle:n})=>S.jsxs("h3",{className:"text-sm font-medium text-dark-text-white mb-3 border-b border-dark-border-primary pb-2 cursor-pointer flex items-center justify-between hover:text-primary-400 transition-colors",onClick:n,children:[S.jsx("span",{children:e}),S.jsx("span",{className:"text-xs transition-transform "+(t?"rotate-90":""),children:""})]});return S.jsxs("aside",{className:"w-sidebar bg-dark-secondary border-r border-dark-border-primary p-3 overflow-y-auto flex-shrink-0",children:[S.jsxs("div",{className:"mb-6",children:[S.jsx(j,{title:"Workspace",isExpanded:w,onToggle:()=>N("workspace")}),w&&S.jsxs(S.Fragment,{children:[f&&S.jsx("div",{className:"text-sm text-dark-text-secondary",children:"Loading workspace..."}),!f&&!l&&0===t.length&&S.jsx("div",{className:"text-sm text-dark-text-primary opacity-75",children:"No workspace loaded"}),l&&S.jsxs("div",{className:"space-y-2 text-sm",children:[S.jsxs("div",{className:"text-dark-text-primary",children:[S.jsx("span",{className:"text-dark-text-secondary",children:"Name:"})," ",l.name]}),S.jsxs("div",{className:"text-dark-text-primary",children:[S.jsx("span",{className:"text-dark-text-secondary",children:"CTEs:"})," ",t.filter(e=>"cte"===e.type).length]}),S.jsxs("div",{className:"text-dark-text-primary",children:[S.jsx("span",{className:"text-dark-text-secondary",children:"Models:"})," ",t.length]}),S.jsxs("div",{className:"text-dark-text-primary",children:[S.jsx("span",{className:"text-dark-text-secondary",children:"Modified:"})," ",new Date(l.lastModified).toLocaleDateString()]})]}),!l&&t.length>0&&S.jsxs("div",{className:"space-y-2 text-sm",children:[S.jsxs("div",{className:"text-dark-text-primary",children:[S.jsx("span",{className:"text-dark-text-secondary",children:"CTEs:"})," ",t.filter(e=>"cte"===e.type).length]}),S.jsxs("div",{className:"text-dark-text-primary",children:[S.jsx("span",{className:"text-dark-text-secondary",children:"Models:"})," ",t.length]}),S.jsx("div",{className:"text-dark-text-primary opacity-75",children:"File opened (no workspace saved)"})]})]})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx(j,{title:"SQL Models",isExpanded:k,onToggle:()=>N("sqlModels")}),k&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mb-3",children:S.jsxs("button",{onClick:async()=>{if(l&&(null==d?void 0:d.current)){m(!0);try{Iu.info("LeftSidebar","Delegating static analysis to MainContentViewModel"),await d.current.runStaticAnalysis(),Iu.info("LeftSidebar","Static analysis delegation completed"),g({}),v(e=>{const t=e+1;return Iu.debug("LeftSidebar",`SqlModelsList key updated: ${e} -> ${t}`),t})}catch(e){if(Iu.error("LeftSidebar",`Static analysis delegation failed: ${e}`),c){const t=e instanceof Error?e.message:"Static analysis delegation error",n=e instanceof Error?e.stack:void 0;c("Static analysis process failed",t,n)}}finally{m(!1)}}},className:"w-full px-3 py-2 rounded transition-colors text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed "+(p?"bg-yellow-600 text-white":"bg-dark-hover text-dark-text-primary hover:bg-dark-active"),disabled:p||!l,title:"Static analysis of schema and CTE dependencies for all SQL models",children:[S.jsx("span",{children:p?"":""}),p?"Analyzing...":"Static Analyze"]})}),S.jsx(dd,{models:t,onModelClick:r,selectedModelName:a,onOpenValuesTab:e,isValuesTabActive:"values"===o,workspace:l||void 0},b)]})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx(j,{title:"Actions",isExpanded:C,onToggle:()=>N("actions")}),C&&S.jsx("div",{className:"space-y-2",children:S.jsxs("button",{onClick:s,className:"w-full px-3 py-2 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!0,title:"Decompose current query into CTEs (temporarily disabled)",children:[S.jsx("span",{children:""}),"Decompose"]})})]}),S.jsxs("div",{children:[S.jsx(j,{title:"System",isExpanded:E,onToggle:()=>N("system")}),E&&S.jsxs("div",{className:"space-y-1 text-xs text-dark-text-secondary",children:[S.jsx("div",{children:" LocalStorage Available"}),S.jsx("div",{children:" rawsql-ts Parser Ready"}),S.jsx("div",{children:" Monaco Editor Loaded"})]})]})]})};function md(e){if(!e||"object"!=typeof e)return!1;const t=e;return"function"==typeof t.setQueryResult&&"function"==typeof t.getQueryResult&&"function"==typeof t.hasQueryResult&&"function"==typeof t.clearQueryResult}function hd(e){if(function(e){if(!e||"object"!=typeof e)return!1;const t=e;return"string"==typeof t.status&&["pending","executing","completed","failed","cancelled"].includes(t.status)&&"object"==typeof t.context&&null!==t.context&&"object"==typeof t.stats&&null!==t.stats&&Array.isArray(t.errors)&&Array.isArray(t.warnings)&&"string"==typeof t.sql}(e))return e;const t=(null==e?void 0:e.query)||(null==e?void 0:e.sql)||"",n=Array.isArray(null==e?void 0:e.data)?e.data:[],r=null==e?void 0:e.error;return r?function(e,t,n={}){const r=new Date;return{status:"failed",context:{startTime:r,endTime:r,duration:0,executionId:yd(),...n},stats:{rowsAffected:0,rowsReturned:0,executionTimeMs:0},errors:[t],warnings:[],sql:e}}(t,{code:r.code||"UNKNOWN_ERROR",message:r.message||"Unknown error occurred",severity:"error"}):function(e,t,n,r={}){const a=new Date;return{status:"completed",context:{startTime:a,endTime:a,duration:r.executionTimeMs||0,executionId:yd()},columns:n,rows:t,stats:{rowsAffected:0,rowsReturned:t.length,executionTimeMs:0,...r},errors:[],warnings:[],sql:e,formattedSql:e}}(t,n,[])}function yd(){return`exec_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}class gd{constructor(e){t(this,"result"),this.result={sql:e,context:{startTime:new Date,executionId:yd()},errors:[],warnings:[]}}setStatus(e){return this.result.status=e,this}setRows(e){return this.result.rows=e,this}setColumns(e){return this.result.columns=e,this}setStats(e){var t;return this.result.stats={rowsAffected:0,rowsReturned:(null==(t=this.result.rows)?void 0:t.length)||0,executionTimeMs:0,...e},this}addError(e){return this.result.errors=[...this.result.errors||[],e],this}addWarning(e){return this.result.warnings=[...this.result.warnings||[],e],this}setEndTime(e=new Date){return this.result.context&&(this.result.context={...this.result.context,endTime:e,duration:e.getTime()-this.result.context.startTime.getTime()}),this}build(){var e,t;const n=this.result.status||"completed",r=this.result.stats||{rowsAffected:0,rowsReturned:(null==(e=this.result.rows)?void 0:e.length)||0,executionTimeMs:(null==(t=this.result.context)?void 0:t.duration)||0};return{status:n,context:this.result.context,columns:this.result.columns,rows:this.result.rows,stats:r,errors:this.result.errors||[],warnings:this.result.warnings||[],sql:this.result.sql,formattedSql:this.result.formattedSql}}}function bd(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const vd=({result:e,isVisible:t,onClose:n})=>{var r,a,s;if(!t)return null;return S.jsxs("div",{className:"border-t border-dark-border-primary bg-dark-secondary flex flex-col",style:{minHeight:"300px",height:"40vh"},children:[S.jsxs("div",{className:"bg-dark-tertiary border-b border-dark-border-primary px-4 py-2 flex items-center justify-between flex-shrink-0",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("span",{className:"text-sm font-medium text-dark-text-white",children:"Query Results"}),"completed"===(null==e?void 0:e.status)&&S.jsxs("span",{className:"flex items-center gap-1 text-xs text-success",children:[S.jsx("span",{children:""}),S.jsx("span",{children:"Success"})]}),"failed"===(null==e?void 0:e.status)&&S.jsxs("span",{className:"flex items-center gap-1 text-xs text-error",children:[S.jsx("span",{children:""}),S.jsx("span",{children:"Error"})]})]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"flex items-center gap-4 text-xs text-dark-text-secondary",children:"completed"===(null==e?void 0:e.status)&&S.jsxs(S.Fragment,{children:[S.jsxs("span",{children:["Rows: ",(null==(r=e.stats)?void 0:r.rowsReturned)??(null==(a=e.rows)?void 0:a.length)??0]}),S.jsxs("span",{children:["Time: ",(null==(s=e.stats)?void 0:s.executionTimeMs)??0,"ms"]})]})}),S.jsx("button",{onClick:n,className:"text-dark-text-secondary hover:text-dark-text-primary",title:"Hide Results",children:""})]})]}),S.jsx("div",{className:"flex-1 overflow-hidden",children:(null==e?void 0:e.errors)&&e.errors.length>0?(()=>{if(!(null==e?void 0:e.errors)||0===e.errors.length)return null;const t=e.errors[0].message;return S.jsxs("div",{className:"p-4 bg-error bg-opacity-10 border border-error border-opacity-30 rounded m-4",children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsx("h4",{className:"text-error font-medium",children:"Query Error"}),S.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t||"").then(()=>{}).catch(e=>{})},className:"text-xs px-2 py-1 bg-dark-tertiary hover:bg-dark-hover text-dark-text-primary rounded border border-dark-border-primary transition-colors",title:"Copy error message",children:"Copy Error"})]}),S.jsx("textarea",{readOnly:!0,value:t,className:"w-full text-sm text-dark-text-primary font-mono bg-dark-primary border border-dark-border-primary rounded p-3 resize-none",style:{minHeight:"200px",height:"auto"},rows:t.split("\n").length+1,onClick:e=>{e.currentTarget.select()}})]})})():(()=>{if(!e||"failed"===e.status||!e.rows||0===e.rows.length)return S.jsx("div",{className:"text-center text-dark-text-muted py-8",children:"completed"===(null==e?void 0:e.status)?"No data returned from query":"Query execution failed"});if(0!==(t=e.rows).length&&!t.every(bd))return S.jsx("div",{className:"text-center text-dark-text-muted py-8",children:"Invalid data format returned from query"});var t;const n=e.rows.length>0?Object.keys(e.rows[0]):[];return S.jsx("div",{className:"overflow-auto",children:S.jsxs("table",{className:"text-sm table-auto",children:[S.jsx("thead",{className:"bg-dark-tertiary sticky top-0",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-2 py-2 text-left border-r border-dark-border-primary text-dark-text-secondary whitespace-nowrap",children:"#"}),n.map((e,t)=>S.jsx("th",{className:"px-3 py-2 text-left text-dark-text-white font-medium whitespace-nowrap "+(t<n.length-1?"border-r border-dark-border-primary":""),children:e},e))]})}),S.jsx("tbody",{children:e.rows.map((e,t)=>S.jsxs("tr",{className:"border-b border-dark-border-primary hover:bg-dark-hover "+(t%2==0?"bg-dark-primary":"bg-dark-secondary"),children:[S.jsx("td",{className:"px-2 py-2 text-dark-text-secondary border-r border-dark-border-primary whitespace-nowrap",children:t+1}),n.map((t,r)=>S.jsx("td",{className:"px-3 py-2 text-dark-text-primary "+(r<n.length-1?"border-r border-dark-border-primary":""),children:S.jsx("div",{className:"min-w-0",title:String(e[t]),children:null===e[t]?S.jsx("span",{className:"text-dark-text-muted italic",children:"NULL"}):""===e[t]?S.jsx("span",{className:"text-dark-text-muted italic",children:"(empty)"}):String(e[t])})},t))]},t))})]})})})()})]})};class xd{constructor(e){this.description=e}canExecute(){return!0}}class wd extends xd{constructor(e){super("Execute SQL Query"),this.context=e}canExecute(){return this.context.tabContent.trim().length>0}async execute(){var e,t,n;const r=performance.now();let a=null;try{if(this.context.sqlModel){if("cte"===this.context.tabType&&"cte"===this.context.sqlModel.type?(this.context.sqlModel.updateEditorContent(this.context.tabContent),this.context.sqlModel.save()):(this.context.sqlModel.updateEditorContent(this.context.tabContent),"main"===this.context.tabType&&this.context.sqlModel.save()),!a){const t=this.getTestValues(),n=null==(e=this.context.workspace)?void 0:e.filterConditions;if(n){n.getFilterConditions()}a=await this.context.sqlModel.getDynamicSql(t,n,!0)}}else if("main"===this.context.tabType&&this.context.workspace){const e=this.context.workspace.sqlModels.find(e=>"main"===e.type);if(e){e.sqlWithoutCte=this.context.tabContent;const t=this.context.workspace.testValues,n=this.context.workspace.filterConditions;if(n){n.getFilterConditions()}a=await e.getDynamicSql(t,n,!0)}}if(!a)throw new Error("Unable to generate SQL with proper CTE composition. Please ensure all dependencies are available.");const s=await this.executeSqlWithPGlite(a.formattedSql,a.params),i=Math.round(performance.now()-r),l={success:!0,data:s.rows,executionTime:i,rowCount:(null==(t=s.rows)?void 0:t.length)||0,executedSql:a.formattedSql};if(this.context.sqlModel&&md(this.context.sqlModel)){const e=new gd(a.formattedSql).setStatus("completed").setRows(s.rows||[]).setStats({rowsAffected:0,rowsReturned:(null==(n=s.rows)?void 0:n.length)||0,executionTimeMs:i}).build();this.context.sqlModel.setQueryResult(e)}return l}catch(s){const e=Math.round(performance.now()-r),t=s instanceof Error?s.message:"SQL execution failed",n=(null==a?void 0:a.formattedSql)||this.context.tabContent;return{success:!1,error:`${t}\n\nExecuted SQL:\n${n}`,executionTime:e,executedSql:n}}}getTestValues(){var e;if(null==(e=this.context.workspace)?void 0:e.testValues)return this.context.workspace.testValues}async executeSqlWithPGlite(e,t=[]){const{PGlite:n}=await r(async()=>{const{PGlite:e}=await import("./pglite-IPxksoss.js").then(e=>e.i);return{PGlite:e}},__vite__mapDeps([0,1,2])),a=new n;return t.length>0?await a.query(e,t):await a.query(e)}}class kd extends xd{constructor(e){super("Format SQL Query"),this.context=e}canExecute(){return this.context.sql.trim().length>0}async execute(){try{const e=i.parse(this.context.sql),t=this.context.formatter.getSqlFormatter().format(e);return"string"==typeof t?t:t.formattedSql}catch(e){return this.context.sql}}}const Sd=new class{async execute(e){if(!e.canExecute())throw new Error(`Command cannot be executed: ${e.description||"Unknown command"}`);const t=performance.now();try{const n=await e.execute();Math.round(performance.now()-t);return n}catch(n){Math.round(performance.now()-t);throw n}}async executeWithResult(e){const t=performance.now();try{if(!e.canExecute())return{success:!1,error:`Command cannot be executed: ${e.description||"Unknown command"}`,executionTime:0};const n=await e.execute();return{success:!0,data:n,executionTime:Math.round(performance.now()-t)}}catch(n){const e=Math.round(performance.now()-t);return{success:!1,error:n instanceof Error?n.message:"Command execution failed",executionTime:e}}}};class Cd{constructor(e){this.sqlParser=e}async generatePrompt(e,t){if(!e||!e.trim())throw new Error("No SQL query provided");if(!t.useSchemaCollector)return this.generateBasicPrompt(e);try{return await this.generateSchemaAwarePrompt(e)}catch(n){let e="Failed to analyze SQL schema. Schema collector is enabled but analysis failed";n instanceof Error&&(e+=`: ${n.message}`);const t=new Error(e);throw n instanceof Error&&(t.stack=n.stack),t}}generateBasicPrompt(e){return`I want to run this SQL without database dependencies.\nPlease provide only WITH clauses that define the required tables as mock tables using VALUES statements.\n\nExample response:\nwith users(user_id, user_name) as (values (1, 'alice'), (2, 'bob'))\n\n\`\`\`sql\n${e}\n\`\`\``}async generateSchemaAwarePrompt(e){if(!this.sqlParser)throw new Error("SQL parser not available for schema analysis");const t=await this.sqlParser.extractSchema(e);if(0===t.length)return this.generateBasicPrompt(e);return`I want to run this SQL without database dependencies.\nPlease provide only WITH clauses that define the required tables as mock tables using VALUES statements.\nThe schema information being used is as follows:\n\`\`\`schema\n${JSON.stringify(t,null,2)}\n\`\`\`\n\nExample response:\nwith users(user_id, user_name) as (values (1, 'alice'), (2, 'bob'))\n\n\`\`\`sql\n${e}\n\`\`\``}}class Ed{async extractSchema(e){try{const t=i.parse(e).toSimpleQuery(),n=(new p).collect(t);return n.map(e=>{const t=e.name,n=e.columns||[];return n.length>0?`${t}(${n.join(", ")})`:t})}catch(t){throw new Error(`Failed to extract schema from SQL: ${t instanceof Error?t.message:String(t)}`)}}}class Nd extends Uu{constructor(){super(...arguments),t(this,"_tabs",[]),t(this,"_activeTabId",""),t(this,"_isExecuting",!1),t(this,"_queryResult",null),t(this,"_resultsVisible",!1),t(this,"_workspace",null),t(this,"_tabModelMap",new Map),t(this,"_useSchemaCollector",!0),t(this,"_onSqlExecuted")}get tabs(){return this._tabs}set tabs(e){this._tabs=e,this.notifyChange("tabs",e)}get activeTabId(){return this._activeTabId}set activeTabId(e){this._activeTabId!==e&&(this._activeTabId=e,this.notifyChange("activeTabId",e),this.notifyChange("activeTab",this.activeTab),this.notifyChange("canExecute",this.canExecute),this.notifyChange("queryResult",this.queryResult),this.syncTabsToWorkspace())}get activeTab(){return this._tabs.find(e=>e.id===this._activeTabId)||null}get isExecuting(){return this._isExecuting}set isExecuting(e){this._isExecuting!==e&&(this._isExecuting=e,this.notifyChange("isExecuting",e),this.notifyChange("canExecute",this.canExecute))}get queryResult(){var e;if(this.activeTab){const e=this.tabModelMap.get(this.activeTab.id);if(Iu.debug("MainContentViewModel",`Getting query result for tab: ${this.activeTab.id}, model: ${!!e}`),e&&"getQueryResult"in e&&"function"==typeof e.getQueryResult){const t=e.getQueryResult();if(Iu.debug("MainContentViewModel",`Model has result: ${!!t} for tab: ${this.activeTab.id}`),t)return t}}return Iu.debug("MainContentViewModel",`Using fallback global result for tab: ${null==(e=this.activeTab)?void 0:e.id}`),this._queryResult}set queryResult(e){this._queryResult=e,this.notifyChange("queryResult",e)}get resultsVisible(){return this._resultsVisible}set resultsVisible(e){this._resultsVisible!==e&&(this._resultsVisible=e,this.notifyChange("resultsVisible",e))}get workspace(){return this._workspace}set workspace(e){this._workspace=e,this.notifyChange("workspace",e)}get tabModelMap(){return this._tabModelMap}set tabModelMap(e){this._tabModelMap=e,this.notifyChange("tabModelMap",e)}get canExecute(){return!this.isExecuting&&null!==this.activeTab&&this.activeTab.content.trim().length>0}get canFormat(){return null!==this.activeTab&&this.activeTab.content.trim().length>0}get canSave(){return null!==this.activeTab&&this.activeTab.isDirty}get useSchemaCollector(){return this._useSchemaCollector}set useSchemaCollector(e){this._useSchemaCollector!==e&&(this._useSchemaCollector=e,this.notifyChange("useSchemaCollector",e))}setOnSqlExecuted(e){this._onSqlExecuted=e}async executeQuery(){if(this.canExecute&&this.activeTab){this.isExecuting=!0,this.resultsVisible=!0;try{const t={workspace:this.workspace,sqlModel:this.tabModelMap.get(this.activeTab.id)||null,tabContent:this.activeTab.content,tabType:this.activeTab.type},n=new wd(t),r=await Sd.execute(n);this.queryResult=hd(r);const a=null==r?void 0:r.executedSql;if(this._onSqlExecuted&&"string"==typeof a)try{this._onSqlExecuted(a)}catch(e){this.activeTab&&this._onSqlExecuted(this.activeTab.content)}const s=this.tabModelMap.get(this.activeTab.id);s&&"setQueryResult"in s&&"function"==typeof s.setQueryResult&&(s.setQueryResult(r),this.notifyChange("queryResult",this.queryResult))}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred",n={success:!1,error:t,executionTime:0};this.queryResult=hd(n);const r=this.tabModelMap.get(this.activeTab.id);r&&"setQueryResult"in r&&"function"==typeof r.setQueryResult&&(r.setQueryResult(n),this.notifyChange("queryResult",this.queryResult)),this.notifyChange("errorWithDetails",{message:"Run failed",details:t,stack:e instanceof Error?e.stack:void 0})}finally{this.isExecuting=!1}}}async formatQuery(){if(this.canFormat&&this.activeTab&&this.workspace)try{const e=new kd({sql:this.activeTab.content,formatter:this.workspace.formatter}),t=await Sd.execute(e);this.updateTabContent(this.activeTab.id,t)}catch(e){this.notifyChange("errorWithDetails",{message:"Format failed",details:e instanceof Error?e.message:"Unknown formatting error",stack:e instanceof Error?e.stack:void 0})}}toggleResultsVisibility(){this.resultsVisible=!this.resultsVisible}closeResults(){this.resultsVisible=!1}async runStaticAnalysis(){if(Iu.info("MainContentViewModel","runStaticAnalysis called"),!this.workspace)return Iu.warn("MainContentViewModel","No workspace available for static analysis"),void this.notifyChange("error","No workspace loaded");try{Iu.info("MainContentViewModel","Running static analysis for all models");const e=this.workspace.sqlModels.filter(e=>"main"===e.type||"cte"===e.type);Iu.debug("MainContentViewModel",`Models to validate: ${e.length}`);for(const s of e)Iu.debug("MainContentViewModel",`- ${s.name}: editorContent(${s.editorContent.length}), sqlWithoutCte(${s.sqlWithoutCte.length}), hasUnsavedChanges: ${s.hasUnsavedChanges}`);const t=performance.now();await this.workspace.validateAllSchemas(!0);const n=performance.now(),r=Math.round(n-t),a=e.filter(e=>{const t=this.workspace.getValidationResult(e.name);return t&&t.success}).length;a===e.length?this.notifyChange("success",`Static analysis completed: ${a}/${e.length} models passed`):this.notifyChange("error",`Static analysis completed: ${a}/${e.length} models passed`),this.notifyChange("analysisUpdated",Date.now()),this.notifyChange("workspace",this.workspace),Iu.info("MainContentViewModel",`Static analysis completed in ${r}ms`)}catch(e){Iu.error("MainContentViewModel",`Static analysis failed: ${e}`),this.notifyChange("errorWithDetails",{message:"Static analysis failed",details:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0})}}async copyPrompt(){if(this.activeTab&&"values"===this.activeTab.type&&this.workspace)try{const e=this.workspace.sqlModels.find(e=>"main"===e.type);if(!e)return this.notifyChange("copyPromptError","Copy Prompt failed"),void this.notifyChange("errorWithDetails",{message:"Copy Prompt failed",details:"No main SQL model found. Please ensure a workspace is loaded with a main query.",stack:void 0});const t=await e.getFullSql(void 0,void 0,!1),n=new Ed,r=new Cd(n),a=await r.generatePrompt(t,{useSchemaCollector:this._useSchemaCollector});await navigator.clipboard.writeText(a),this.notifyChange("copyPromptSuccess","Copy Prompt succeeded")}catch(e){let t="Failed to copy prompt";e instanceof Error?(t=e.message,"cause"in e&&e.cause&&(t+=` (Caused by: ${e.cause})`)):t=`Failed to copy prompt: ${String(e)}`,this.notifyChange("copyPromptError","Copy Prompt failed"),this.notifyChange("errorWithDetails",{message:"Copy Prompt failed",details:t,stack:e instanceof Error?e.stack:void 0})}}updateTabContent(e,t){const n=this._tabs.findIndex(t=>t.id===e);if(-1!==n){if(this._tabs[n].content!==t){const e=[...this._tabs];e[n]={...e[n],content:t,isDirty:!0},this.tabs=e}}}saveTab(e){const t=this._tabs.find(t=>t.id===e);if(!t||!t.isDirty)return;this.syncTabContentToWorkspace(t,t.content);const n=this._tabs.findIndex(t=>t.id===e);if(-1!==n){const e=[...this._tabs];e[n]={...e[n],isDirty:!1},this.tabs=e}}closeTab(e){const t=this._tabs.filter(t=>t.id!==e);this.tabs=t;const n=this._tabModelMap.get(e);n&&"clearQueryResult"in n&&"function"==typeof n.clearQueryResult&&n.clearQueryResult(),this._tabModelMap.delete(e),this.notifyChange("tabModelMap",this._tabModelMap),this.activeTabId===e&&t.length>0&&(this.activeTabId=t[0].id),this.syncTabsToWorkspace()}addTab(e){if(this._tabs.find(t=>t.id===e.id))return this.activeTabId=e.id,void this.syncTabsToWorkspace();this.tabs=[...this._tabs,e],this.activeTabId=e.id,this.syncTabsToWorkspace()}setTabModel(e,t){this._tabModelMap.set(e,t),this.notifyChange("tabModelMap",this._tabModelMap)}syncTabsToWorkspace(){if(!this.workspace)return;const e=this._tabs.map(e=>({id:e.id,title:e.title,type:e.type,content:e.content,isDirty:e.isDirty,modelEntity:this._tabModelMap.get(e.id)}));this.workspace.setOpenedObjects(e),this.workspace.setActiveObjectId(this._activeTabId);try{localStorage.setItem("zosql_workspace_v3",JSON.stringify(this.workspace.toJSON()))}catch(t){}}syncTabContentToWorkspace(e,t){if(this.workspace)switch(e.type){case"main":{const e=this.workspace.sqlModels.find(e=>"main"===e.type);e&&(e.editorContent=t,e.save());break}case"cte":{const n=this.workspace.sqlModels.find(t=>"cte"===t.type&&t.name===e.id);n&&(n.editorContent=t,n.save());break}case"values":try{const e=new Lu(t);this.workspace.testValues=e}catch(n){}break;case"formatter":try{const e=JSON.parse(t);this.workspace.formatter.setFormatterConfig(e)}catch(n){this.workspace.formatter.config=t}break;case"condition":this.workspace.filterConditions.displayString=t}}}let jd=null;const Td=n.forwardRef(({workspace:e,onWorkspaceChange:t,onActiveTabChange:r,onSqlExecuted:a,showSuccess:s,showError:i,showErrorWithDetails:l,onAnalysisUpdated:o},c)=>{var u;const d=n.useRef(null),f=n.useRef(null),[p,m]=n.useState(void 0),[h,y]=n.useState(0);d.current||(jd||(Iu.info("MainContentMvvm","Creating new MainContentViewModel instance"),jd=new Nd),d.current=jd);const g=Hu(d.current),b=null==e?void 0:e.id;n.useEffect(()=>{if(e){g.workspace=e;g.tabs.find(e=>"main.sql"===e.id&&"SELECT user_id, name FROM users;"===e.content)&&(Iu.debug("MainContentMvvm","Workspace loaded, clearing demo tab to allow proper restoration"),g.tabs=[],g.activeTabId="",v.current=!1)}},[b,g]),n.useEffect(()=>{a&&g.setOnSqlExecuted(a)},[a,g]),n.useEffect(()=>{const e=e=>{e.ctrlKey&&"s"===e.key?(e.preventDefault(),e.stopPropagation(),g.canSave&&g.saveTab(g.activeTabId)):e.ctrlKey&&"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),g.executeQuery()):e.ctrlKey&&e.shiftKey&&"A"===e.key&&(e.preventDefault(),e.stopPropagation(),g.runStaticAnalysis())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[g]);const v=n.useRef(!1);n.useEffect(()=>{const t=setTimeout(()=>{Iu.debug("MainContentMvvm","MainContentMvvm delayed init: tabs.length=",g.tabs.length,"workspace=",!!e,"attempted=",v.current),v.current||(0!==g.tabs.length||e||(Iu.debug("MainContentMvvm","Adding default demo tab (no workspace after delay)"),g.addTab({id:"main.sql",title:"main.sql",type:"main",content:"SELECT user_id, name FROM users;",isDirty:!1}),v.current=!0),0===g.tabs.length&&e&&(Iu.debug("MainContentMvvm","Workspace exists but no tabs - letting Layout.tsx handle restoration"),v.current=!0))},100);return()=>clearTimeout(t)},[b,g]),n.useEffect(()=>{if(null==r||r(g.activeTabId),g.activeTabId&&f.current){const e=f.current,t=e.querySelector(`[data-tab-id="${g.activeTabId}"]`);if(t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();if(r.left<n.left||r.right>n.right){const n=t.offsetLeft-e.clientWidth/2+t.clientWidth/2;e.scrollTo({left:Math.max(0,n),behavior:"smooth"})}}}},[g.activeTabId,r]),n.useEffect(()=>{const e=(e,t)=>{if(Iu.debug("MainContentMvvm","Property change received:",e,t),"copyPromptSuccess"===e)"string"==typeof t&&(null==s||s(t));else if("copyPromptError"===e)"string"==typeof t&&(null==i||i(t));else if("errorWithDetails"===e){if(l&&t&&"object"==typeof t&&null!==t){const e=t,n="string"==typeof e.message?e.message:"Unknown error",r="string"==typeof e.details?e.details:void 0,a="string"==typeof e.stack?e.stack:void 0;l(n,r,a)}}else"success"===e?"string"==typeof t&&(null==s||s(t)):"error"===e?"string"==typeof t&&(null==i||i(t)):"analysisUpdated"===e?null==o||o():"queryResult"===e&&y(e=>e+1)};if(d.current){return d.current.subscribe(e)}},[s,i,l,o]),n.useEffect(()=>()=>{d.current&&d.current.dispose()},[]),n.useImperativeHandle(c,()=>({openValuesTab:()=>{if(e){const t=g.tabs.find(e=>"values"===e.type);if(t)return void(g.activeTabId=t.id);g.addTab({id:"values",title:"values",type:"values",content:e.testValues.withClause,isDirty:!1})}},openFormatterTab:()=>{if(e){const t=g.tabs.find(e=>"formatter"===e.type);if(t)return void(g.activeTabId=t.id);g.addTab({id:"formatter",title:"formatter",type:"formatter",content:JSON.stringify(e.formatter.toJSON(),null,2),isDirty:!1})}},openConditionTab:()=>{if(e){const t=g.tabs.find(e=>"condition"===e.type);if(t)return void(g.activeTabId=t.id);g.addTab({id:"condition",title:"condition",type:"condition",content:JSON.stringify(e.filterConditions.toJSON(),null,2),isDirty:!1})}},getCurrentSql:()=>{var e;return(null==(e=g.activeTab)?void 0:e.content)||""},openSqlModel:(e,t,n,r)=>{const a=g.tabs.find(t=>t.id===e);a?g.activeTabId=a.id:(g.addTab({id:e,title:e,type:n,content:t,isDirty:!1}),r&&(g.setTabModel(e,r),r.updateEditorContent(t)))},setCurrentModelEntity:e=>{g.activeTab&&g.setTabModel(g.activeTab.id,e)},clearAllTabs:()=>{g.tabs=[],g.activeTabId=""},runStaticAnalysis:()=>{g.runStaticAnalysis()},getWorkspace:()=>g.workspace}),[g,e]);const x=e=>{switch(e){case"main":return"";case"cte":return"";case"values":return"";case"formatter":return"";case"condition":return"";default:return""}},w=e=>{switch(e.type){case"main":return"*root";case"values":return"*data";default:return e.title}},k=e=>{const t=e.match(/Unresolved columns: (.+)/);if(t){const e=t[1].split(",").map(e=>e.trim()).filter(e=>e.length>0);e.length>0&&(m(void 0),setTimeout(()=>{const t=e[0];m(t),setTimeout(()=>{m(void 0)},2e3)},50))}};return S.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[S.jsx("div",{ref:f,className:"border-b border-dark-border-primary flex items-center overflow-x-auto relative tab-container flex-shrink-0",style:{backgroundColor:"#1a1a1a"},onWheel:e=>{const t=e.currentTarget;0!==e.deltaY&&(e.preventDefault(),t.scrollLeft+=e.deltaY)},children:S.jsx("div",{className:"flex min-w-max",children:g.tabs.map(e=>S.jsxs("div",{"data-tab-id":e.id,className:`\n                flex items-center gap-2 px-4 py-2 cursor-pointer relative flex-shrink-0 border-r border-dark-border-primary\n                ${g.activeTabId===e.id?"text-dark-text-white z-10":"text-dark-text-primary hover:bg-dark-hover"}\n              `,style:{backgroundColor:g.activeTabId===e.id?"#252526":"#1a1a1a"},onClick:()=>g.activeTabId=e.id,children:[g.activeTabId===e.id&&S.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-600"}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-xs",children:x(e.type)}),S.jsx("span",{className:"text-sm",children:w(e)})]}),e.isDirty&&S.jsx("span",{className:"text-xs text-primary-400",children:""}),g.tabs.length>1&&S.jsx("button",{onClick:t=>{t.stopPropagation(),g.closeTab(e.id)},className:"text-dark-text-secondary hover:text-dark-text-primary ml-1",children:""})]},e.id))})}),S.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[g.activeTab&&"values"===g.activeTab.type?S.jsxs("div",{className:"bg-dark-secondary border-b border-dark-border-primary px-4 py-2",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("div",{className:"flex items-center gap-4",children:S.jsx("div",{className:"flex items-center gap-2",children:S.jsxs("label",{className:"flex items-center gap-2 text-sm text-dark-text-primary cursor-pointer",children:[S.jsx("input",{type:"checkbox",checked:g.useSchemaCollector,onChange:e=>g.useSchemaCollector=e.target.checked,className:"w-4 h-4 text-primary-600 bg-dark-primary border-dark-border-primary rounded focus:ring-primary-500 focus:ring-2"}),"use schema collector"]})})}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>g.copyPrompt(),className:"px-3 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors text-sm",title:"Copy AI prompt to clipboard for generating test data",children:"Copy Prompt"}),S.jsx("button",{onClick:()=>{g.activeTab&&g.saveTab(g.activeTab.id)},disabled:!(null==(u=g.activeTab)?void 0:u.isDirty),className:"px-3 py-1 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:"Save changes to workspace",children:"Save"}),S.jsx("button",{onClick:()=>g.formatQuery(),disabled:!g.canFormat,className:"px-3 py-1 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Format"})]})]}),S.jsx("div",{className:"mt-2 text-xs text-dark-text-secondary",children:'Generate AI prompts to create WITH clauses with mock data for your SQL queries. Enable "use schema collector" for table structure analysis.'})]}):S.jsx("div",{className:"bg-dark-secondary border-b border-dark-border-primary px-4 py-2",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("div",{className:"flex items-center gap-2 text-sm min-h-[24px] flex-1 min-w-0",children:(()=>{if(!g.workspace||!g.activeTab||"main"!==g.activeTab.type&&"cte"!==g.activeTab.type)return null;const e=g.tabModelMap.get(g.activeTab.id);if(!e)return null;const t=g.workspace.getValidationResult(e.name);if(!t||t.success)return null;const n=t.error||"";if(n.includes("Parse error")||n.includes("SQL Parse Error:"))return S.jsx("span",{className:"text-red-400 truncate",title:n,children:"Parse error"});if(n.includes("Analysis error"))return S.jsx("span",{className:"text-red-400 truncate",title:n,children:"Analysis error"});if(n.includes("Unresolved columns:")){const e=n.match(/Unresolved columns: (.+)/);if(e){const t=e[1].trim();return S.jsxs("span",{className:"text-red-400 truncate cursor-pointer hover:text-red-300 hover:underline",title:`Unresolved columns: ${t} - Click to search in editor`,onClick:e=>{k(n)},style:{cursor:"pointer"},children:["Unresolved columns: ",t]})}}const r=n.match(/Column reference\(s\) without table name found in query: (.+)/);if(r){const e=r[1].trim();return S.jsxs("span",{className:"text-red-400 truncate cursor-pointer hover:text-red-300 hover:underline",title:`Unresolved columns: ${e} - Click to search in editor`,onClick:t=>{k(`Unresolved columns: ${e}`)},style:{cursor:"pointer"},children:["Unresolved columns: ",e]})}return n.includes("Schema Analysis Error:")?S.jsx("span",{className:"text-red-400 truncate",title:n,children:"Schema analysis error"}):S.jsx("span",{className:"text-red-400 truncate",title:n,children:n})})()}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>g.executeQuery(),disabled:!g.canExecute,className:"px-3 py-1 bg-success text-white rounded hover:bg-green-600 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:"Run Query (Ctrl+Enter)",children:g.isExecuting?"Running...":"Run"}),S.jsx("button",{onClick:()=>g.saveTab(g.activeTabId),disabled:!g.canSave,className:"px-3 py-1 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:"Save changes to model (Ctrl+S)",children:"Save"}),S.jsx("button",{onClick:()=>g.formatQuery(),disabled:!g.canFormat,className:"px-3 py-1 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Format"}),S.jsx("button",{onClick:()=>g.toggleResultsVisibility(),className:"px-3 py-1 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors text-sm",children:g.resultsVisible?"Hide Results":"Show Results"})]})]})}),S.jsx("div",{className:"flex-1 overflow-hidden",children:g.activeTab&&S.jsxs("div",{className:"values"!==g.activeTab.type&&g.resultsVisible&&g.queryResult?"h-full flex flex-col":"h-full",children:[S.jsx("div",{className:"values"!==g.activeTab.type&&g.resultsVisible&&g.queryResult?"flex-1 bg-dark-primary overflow-hidden":"h-full bg-dark-primary overflow-hidden",style:"values"!==g.activeTab.type&&g.resultsVisible&&g.queryResult?{minHeight:"200px"}:{},children:S.jsx(od,{value:g.activeTab.content,onChange:e=>{g.updateTabContent(g.activeTab.id,e);const t=g.tabModelMap.get(g.activeTab.id);!t||"main"!==g.activeTab.type&&"cte"!==g.activeTab.type||t.updateEditorContent(e)},language:"values"===g.activeTab.type?"sql":"formatter"===g.activeTab.type||"condition"===g.activeTab.type?"json":"sql",height:"100%",isMainEditor:!0,onKeyDown:e=>{e.ctrlKey&&"Enter"===e.key?(e.preventDefault(),g.executeQuery()):e.ctrlKey&&"s"===e.key&&(e.preventDefault(),g.canSave&&g.saveTab(g.activeTabId))},workspace:e,searchTerm:p,options:"values"===g.activeTab.type?{wordWrap:"off",wrappingStrategy:"simple",scrollBeyondLastLine:!1,minimap:{enabled:!1},folding:!0}:"formatter"===g.activeTab.type||"condition"===g.activeTab.type?{wordWrap:"off",formatOnType:!0,formatOnPaste:!0,minimap:{enabled:!1},readOnly:!1}:{wordWrap:"off",minimap:{enabled:!1},folding:!0}},"main-editor-unified")}),"values"!==g.activeTab.type&&g.resultsVisible&&(()=>{const e=g.tabModelMap.get(g.activeTabId),t=e&&md(e)?e.getQueryResult():g.queryResult;return t?S.jsx("div",{className:"flex-shrink-0",children:S.jsx(vd,{result:t,isVisible:g.resultsVisible,onClose:()=>g.closeResults()},`results-${g.activeTabId}-${h}`)}):null})()]})})]})]})}),Md=n.memo(Td,(e,t)=>e.workspace===t.workspace||!(!e.workspace||!t.workspace)&&(e.workspace.name===t.workspace.name&&e.workspace.activeObjectId===t.workspace.activeObjectId&&e.workspace.openedObjects.length===t.workspace.openedObjects.length)),_d=()=>{const[e,t]=n.useState(null),r=n.useCallback((e,n="info")=>{t({message:e,type:n})},[]),a=n.useCallback(()=>{t(null)},[]),s=n.useCallback(e=>{r(e,"success")},[r]),i=n.useCallback(e=>{r(e,"error")},[r]),l=n.useCallback(e=>{r(e,"info")},[r]);return{toast:e,showToast:r,hideToast:a,showSuccess:s,showError:i,showInfo:l}},Ld=({message:e,type:t="info",duration:r=3e3,onClose:a})=>{n.useEffect(()=>{const e=setTimeout(a,r);return()=>clearTimeout(e)},[r,a]);const s={success:"bg-green-600",error:"bg-red-600",info:"bg-blue-600"}[t],i={success:"",error:"",info:""}[t];return S.jsxs("div",{className:`\n        fixed bottom-4 right-4 z-[9999]\n        flex items-center gap-2 px-4 py-3 rounded-lg shadow-lg\n        ${s} text-white\n        animate-slide-in-bottom\n      `,children:[S.jsx("span",{className:"text-lg",children:i}),S.jsx("span",{className:"text-sm font-medium",children:e}),S.jsx("button",{onClick:a,className:"ml-2 text-white/80 hover:text-white",children:""})]})},qd=({workspace:e,lastExecutedSql:t})=>S.jsxs("div",{className:"p-4 h-full flex flex-col",children:[S.jsx("div",{className:"flex items-center justify-between mb-3",children:S.jsx("h4",{className:"text-sm font-medium text-dark-text-white",children:"Last Executed SQL"})}),S.jsx("div",{className:"text-xs text-dark-text-primary opacity-75 mb-2",children:"This shows the most recent SQL query that was executed"}),S.jsx("div",{className:"flex-1 min-h-0",children:S.jsx(od,{value:t||"-- No SQL has been executed yet",onChange:()=>{},language:"sql",height:"100%",readOnly:!0,workspace:e,options:{fontSize:12,wordWrap:"on",formatOnType:!1,formatOnPaste:!1,minimap:{enabled:!1},scrollBeyondLastLine:!1,readOnly:!0,selectOnLineNumbers:!1,lineNumbers:"on"}},"executed-sql-viewer")}),S.jsxs("div",{className:"mt-3 space-y-2",children:[S.jsxs("div",{className:"text-xs text-dark-text-secondary",children:["Status: ",t?S.jsx("span",{className:"text-green-400",children:" SQL Available"}):S.jsx("span",{className:"text-gray-400",children:"No execution yet"})]}),S.jsx("div",{className:"text-xs text-dark-text-primary opacity-75",children:" This SQL reflects what was actually executed, including composed CTEs and filters."})]})]}),Od=({workspace:e,filterConditionsJson:t,refreshTrigger:n,onConditionsChange:r,onRefreshTrigger:a})=>{const{showSuccess:s,showError:i}=_d();return S.jsxs("div",{className:"p-4 h-full flex flex-col",children:[S.jsxs("div",{className:"flex items-center justify-between mb-3",children:[S.jsx("h4",{className:"text-sm font-medium text-dark-text-white",children:"Filter Conditions"}),S.jsx("div",{className:"flex gap-2",children:S.jsx("button",{onClick:()=>{if(e)try{const t=e.filterConditions.displayString;e.filterConditions.initializeFromModels(e.sqlModels);const n=e.filterConditions.displayString;a(),s(t!==n?"Filter conditions regenerated successfully":"Filter conditions regenerated (no changes)")}catch(t){i(`ReGenerate failed: ${t instanceof Error?t.message:"Unknown error"}`)}else i("No workspace available")},className:"px-3 py-1 text-xs bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors",title:"ReGenerate filter conditions from current SQL query",children:"ReGenerate"})})]}),S.jsx("div",{className:"text-xs text-dark-text-primary opacity-75 mb-2",children:"rawsql-ts FilterConditions - Edit values only, structure is auto-generated from SQL"}),S.jsx("div",{className:"flex-1 min-h-0",children:S.jsx(od,{value:t,onChange:r,language:"json",height:"100%",readOnly:!1,workspace:e,onKeyDown:e=>{if(e.ctrlKey&&"Enter"===e.key){e.preventDefault();const t=document.querySelector('button[title="Run Query (Ctrl+Enter)"]');t&&!t.disabled&&t.click()}},options:{fontSize:12,wordWrap:"off",formatOnType:!0,formatOnPaste:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,readOnly:!1}},"condition-editor")}),S.jsxs("div",{className:"mt-3 space-y-2",children:[S.jsx("div",{className:"flex gap-2",children:S.jsx("button",{onClick:()=>{if(e)try{const t=JSON.parse(e.filterConditions.displayString),n=JSON.stringify(t,null,2);e.filterConditions.displayString=n,a()}catch(t){}},className:"px-3 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors text-xs",title:"Format JSON",children:"Format JSON"})}),S.jsxs("div",{className:"text-xs text-dark-text-secondary",children:["JSON validation: ",(null==e?void 0:e.filterConditions.isValid())?S.jsx("span",{className:"text-green-400",children:" Valid"}):S.jsx("span",{className:"text-red-400",children:" Invalid"})]}),S.jsx("div",{className:"text-xs text-dark-text-primary opacity-75",children:" Generated from SQL columns. Edit values (undefined  actual values)."})]})]})},Fd=({workspace:e,sqlFormatterJson:t,refreshTrigger:n,onFormatterChange:r,onRefreshTrigger:a})=>{const{showSuccess:s,showError:i}=_d();return S.jsxs("div",{className:"p-4 h-full flex flex-col",children:[S.jsxs("div",{className:"flex items-center justify-between mb-3",children:[S.jsx("h4",{className:"text-sm font-medium text-dark-text-white",children:"SQL Formatter Config"}),S.jsx("div",{className:"flex gap-2",children:S.jsx("button",{onClick:()=>{if(e)try{e.formatter.reset(),a(),s("Formatter configuration reset to default")}catch(t){i(`Reset failed: ${t instanceof Error?t.message:"Unknown error"}`)}else i("No workspace available")},className:"px-3 py-1 text-xs bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active transition-colors",title:"Reset formatter configuration to default values",children:"Reset"})})]}),S.jsx("div",{className:"text-xs text-dark-text-primary opacity-75 mb-2",children:"rawsql-ts SqlFormatter configuration - Adjust formatting preferences"}),S.jsx("div",{className:"flex-1 min-h-0",children:S.jsx(od,{value:t,onChange:r,language:"json",height:"100%",readOnly:!1,workspace:e,onKeyDown:e=>{if(e.ctrlKey&&e.shiftKey&&"F"===e.key){e.preventDefault();const t=Array.from(document.querySelectorAll("button")).find(e=>{var t;return"Format"===(null==(t=e.textContent)?void 0:t.trim())});t&&!t.disabled&&t.click()}},options:{fontSize:12,wordWrap:"off",formatOnType:!0,formatOnPaste:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,readOnly:!1}},"formatter-editor")}),S.jsxs("div",{className:"mt-3 space-y-2",children:[S.jsx("div",{className:"flex gap-2",children:S.jsx("button",{onClick:()=>{if(e)try{const t=JSON.parse(e.formatter.displayString),n=JSON.stringify(t,null,2);e.formatter.displayString=n,a()}catch(t){}},className:"px-3 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 transition-colors text-xs",title:"Format JSON",children:"Format JSON"})}),S.jsxs("div",{className:"text-xs text-dark-text-secondary",children:["JSON validation: ",(()=>{try{return JSON.parse(t),S.jsx("span",{className:"text-green-400",children:" Valid"})}catch{return S.jsx("span",{className:"text-red-400",children:" Invalid"})}})()]}),S.jsx("div",{className:"text-xs text-dark-text-primary opacity-75",children:" Modify formatting options like keywordCase, indentSize, withClauseStyle, etc."})]})]})},Rd=s.memo(({workspace:e,lastExecutedSql:t})=>{const[r,a]=n.useState("sql"),[s,i]=n.useState(0),[l,o]=n.useState("{}"),[c,u]=n.useState("{}"),{toast:d,hideToast:f}=_d();n.useEffect(()=>{if(e){const t=e.filterConditions.displayString||"{}",n=e.formatter.displayString||"{}";o(e=>t!==e?t:e),u(e=>n!==e?n:e)}},[e,s]);const p=()=>{i(e=>e+1)};return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"w-80 bg-dark-secondary border-l border-dark-border-primary flex flex-col h-full",children:[S.jsxs("div",{className:"flex border-b border-dark-border-primary",style:{backgroundColor:"#1a1a1a"},children:[S.jsx("button",{onClick:()=>a("sql"),className:"flex-1 px-4 py-2 text-xs font-medium transition-colors "+("sql"===r?"text-primary-400 border-b-2 border-primary-400":"text-dark-text-secondary hover:text-dark-text-primary"),style:{backgroundColor:"sql"===r?"#252526":"#1a1a1a"},children:"SQL"}),S.jsx("button",{onClick:()=>a("condition"),className:"flex-1 px-4 py-2 text-xs font-medium transition-colors "+("condition"===r?"text-primary-400 border-b-2 border-primary-400":"text-dark-text-secondary hover:text-dark-text-primary"),style:{backgroundColor:"condition"===r?"#252526":"#1a1a1a"},children:"Condition"}),S.jsx("button",{onClick:()=>a("formatter"),className:"flex-1 px-4 py-2 text-xs font-medium transition-colors "+("formatter"===r?"text-primary-400 border-b-2 border-primary-400":"text-dark-text-secondary hover:text-dark-text-primary"),style:{backgroundColor:"formatter"===r?"#252526":"#1a1a1a"},children:"Formatter"})]}),S.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[S.jsx("div",{className:"absolute inset-0 "+("sql"===r?"block":"hidden"),children:S.jsx(qd,{workspace:e,lastExecutedSql:t})}),S.jsx("div",{className:"absolute inset-0 "+("condition"===r?"block":"hidden"),children:S.jsx(Od,{workspace:e,filterConditionsJson:l,refreshTrigger:s,onConditionsChange:t=>{e&&(e.filterConditions.displayString=t,o(t))},onRefreshTrigger:p})}),S.jsx("div",{className:"absolute inset-0 "+("formatter"===r?"block":"hidden"),children:S.jsx(Fd,{workspace:e,sqlFormatterJson:c,refreshTrigger:s,onFormatterChange:t=>{e&&(e.formatter.displayString=t,u(t))},onRefreshTrigger:p})})]})]}),d&&S.jsx(Ld,{message:d.message,type:d.type,onClose:f})]})},(e,t)=>{var n,r,a,s,i,l,o,c,u,d;const f=null==(n=e.workspace)?void 0:n.id,p=null==(r=t.workspace)?void 0:r.id,m=((null==(s=null==(a=e.workspace)?void 0:a.formatter)?void 0:s.displayString)||"")+((null==(l=null==(i=e.workspace)?void 0:i.filterConditions)?void 0:l.displayString)||""),h=((null==(c=null==(o=t.workspace)?void 0:o.formatter)?void 0:c.displayString)||"")+((null==(d=null==(u=t.workspace)?void 0:u.filterConditions)?void 0:d.displayString)||"");return f===p&&m===h&&e.lastExecutedSql===t.lastExecutedSql}),Pd=({errors:e,onClearError:t,onClearAll:r})=>{const[a,s]=n.useState(!1),[i,l]=n.useState(null),[o,c]=n.useState({x:window.innerWidth-320,y:window.innerHeight-100}),[u,d]=n.useState(!1),[f,p]=n.useState({x:0,y:0});n.useEffect(()=>{e.length>0&&!a&&(s(!0),l(e[e.length-1].id))},[e.length]);if(n.useEffect(()=>{const e=e=>{u&&c({x:e.clientX-f.x,y:e.clientY-f.y})},t=()=>{d(!1)};return u&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[u,f]),0===e.length)return null;const m=e.find(e=>e.id===i);return S.jsxs(S.Fragment,{children:[!a&&S.jsx("div",{className:"fixed z-50 bg-red-600 text-white rounded-full w-12 h-12 flex items-center justify-center cursor-pointer shadow-lg hover:bg-red-700 transition-colors",style:{right:"20px",bottom:"20px"},onClick:()=>s(!0),title:`${e.length} error(s)`,children:S.jsx("span",{className:"text-sm font-bold",children:e.length})}),a&&S.jsxs("div",{className:"fixed z-50 bg-dark-secondary border border-dark-border-primary rounded-lg shadow-2xl",style:{left:`${o.x}px`,top:`${o.y}px`,width:"400px",maxHeight:"500px",display:"flex",flexDirection:"column"},onMouseDown:e=>{e.target.closest(".panel-header")&&(d(!0),p({x:e.clientX-o.x,y:e.clientY-o.y}))},children:[S.jsx("div",{className:"panel-header bg-dark-primary border-b border-dark-border-primary px-4 py-2 rounded-t-lg cursor-move",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("h3",{className:"text-sm font-semibold text-dark-text-primary",children:["Errors (",e.length,")"]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:r,className:"text-xs text-dark-text-secondary hover:text-dark-text-primary",title:"Clear all errors",children:"Clear All"}),S.jsx("button",{onClick:()=>s(!1),className:"text-dark-text-secondary hover:text-dark-text-primary",title:"Minimize",children:"_"}),S.jsx("button",{onClick:()=>{s(!1),r()},className:"text-dark-text-secondary hover:text-dark-text-primary",title:"Close",children:""})]})]})}),S.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[S.jsx("div",{className:"w-1/3 border-r border-dark-border-primary overflow-y-auto",children:e.map(e=>S.jsx("div",{className:"px-3 py-2 cursor-pointer border-b border-dark-border-primary "+(i===e.id?"bg-dark-hover":"hover:bg-dark-hover"),onClick:()=>l(e.id),children:S.jsxs("div",{className:"flex items-start justify-between",children:[S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"text-xs text-dark-text-secondary",children:e.timestamp.toLocaleTimeString()}),S.jsx("div",{className:"text-sm text-red-400 truncate",children:e.message})]}),S.jsx("button",{onClick:n=>{n.stopPropagation(),t(e.id)},className:"text-dark-text-secondary hover:text-dark-text-primary ml-2",children:""})]})},e.id))}),S.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:m?S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"text-xs font-semibold text-dark-text-secondary mb-1",children:"Error Message"}),S.jsx("div",{className:"text-sm text-red-400 break-words",children:m.message})]}),m.details&&S.jsxs("div",{children:[S.jsx("h4",{className:"text-xs font-semibold text-dark-text-secondary mb-1",children:"Details"}),S.jsx("div",{className:"text-xs text-dark-text-primary bg-dark-primary p-2 rounded break-words",children:m.details})]}),m.stack&&S.jsxs("details",{className:"cursor-pointer",children:[S.jsx("summary",{className:"text-xs font-semibold text-dark-text-secondary hover:text-dark-text-primary",children:"Stack Trace"}),S.jsx("pre",{className:"text-xs text-dark-text-primary bg-dark-primary p-2 rounded mt-1 overflow-x-auto",children:m.stack})]}),S.jsx("div",{className:"flex gap-2 mt-4",children:S.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`Error: ${m.message}\n\nDetails: ${m.details||"N/A"}\n\nStack: ${m.stack||"N/A"}`)},className:"text-xs px-2 py-1 bg-dark-hover text-dark-text-primary rounded hover:bg-dark-active",children:"Copy Error"})})]}):S.jsx("div",{className:"text-sm text-dark-text-secondary",children:"Select an error to view details"})})]})]})]})};function Id(e={}){const t=function(e={}){const t="SELECT user_id, name FROM users;",n="-- Define test data CTEs here\n-- Write WITH clauses, SELECT clauses can be omitted (they will be ignored if written)\n-- Example:\nwith users(user_id, name) as (\n  values\n    (1::bigint, 'alice'::text),\n    (2::bigint, 'bob'::text)\n)",{id:r=Du.generateId(),mainSql:a=t,testValues:s=n}=e,i=new Du(r,"demoworkspace","main.sql",[],new Lu(s),new Pu,new Fu,{}),l=new Ou("main","main.sql",a,[],void 0,a);return i.addSqlModel(l),i.filterConditions.initializeFromModels([l]),i.openSqlModelTab(l),i}(e),n=function(e){const t=[];if("demoworkspace"!==e.name&&t.push(`Expected name 'demoworkspace', got '${e.name}'`),"main.sql"!==e.originalFilePath&&t.push(`Expected originalFilePath 'main.sql', got '${e.originalFilePath}'`),1!==e.sqlModels.length)t.push(`Expected 1 SQL model, got ${e.sqlModels.length}`);else{const n=e.sqlModels[0];"main"!==n.type&&t.push(`Expected main model type 'main', got '${n.type}'`),"main.sql"!==n.name&&t.push(`Expected main model name 'main.sql', got '${n.name}'`),n.originalSql&&0!==n.originalSql.length||t.push("Main model originalSql is missing or empty"),n.sqlWithoutCte&&0!==n.sqlWithoutCte.length||t.push("Main model sqlWithoutCte is missing or empty")}if(e.testValues){const n=e.testValues.toString();"undefined"!==n&&""!==n||t.push("TestValuesModel has invalid content"),n.includes("users")||t.push('TestValuesModel does not contain expected "users" table')}else t.push("TestValuesModel is missing");if(e.formatter){const n=e.formatter.displayString;"undefined"!==n&&""!==n||t.push("SqlFormatterEntity has invalid content"),n.includes("identifierEscape")||t.push("SqlFormatterEntity does not contain expected configuration")}else t.push("SqlFormatterEntity is missing");if(e.filterConditions){const r=e.filterConditions.displayString;"undefined"===r&&t.push("FilterConditionsEntity has undefined content - initialization failed"),"{}"===r&&t.push("FilterConditionsEntity has empty content - columns not detected");try{const n=JSON.parse(r);e.sqlModels.length>0&&("SELECT user_id, name FROM users;"===(e.sqlModels[0].originalSql||e.sqlModels[0].sqlWithoutCte)?(n.user_id||t.push("FilterConditions missing user_id column"),n.name||t.push("FilterConditions missing name column")):0===Object.keys(n).length&&t.push("FilterConditions has no columns - SQL analysis may have failed"))}catch(n){t.push(`FilterConditions JSON is invalid: ${n instanceof Error?n.message:"Unknown error"}`)}}else t.push("FilterConditionsEntity is missing");return{isValid:0===t.length,errors:t}}(t);if(!n.isValid)throw new Error(`Demo workspace validation failed:\n${n.errors.join("\n")}`);return t}const Dd=()=>{const[e,t]=n.useState(!0),[r,a]=n.useState(!0),[s,i]=n.useState(),[l,o]=n.useState(null),[c,u]=n.useState(!1),[d,f]=n.useState(""),[p,m]=n.useState(null),[h,y]=n.useState(0),g=n.useRef(!1),b=n.useRef(null),{decomposeSql:v,isDecomposing:x,error:w}=(()=>{const[e,t]=n.useState(!1),[r,a]=n.useState(null),[s,i]=n.useState([]),l=n.useMemo(()=>{const e=new Au,t=new Qu;return new zu(e,t)},[]);return{decomposeSql:n.useCallback(async(e,n,r)=>{t(!0),a(null);try{const t=await l.decomposeSql(e,n,r);return i(t),t}catch(s){const e=s instanceof Error?s.message:"Failed to decompose SQL";throw a(e),new Error(e)}finally{t(!1)}},[l]),reconstructSql:n.useCallback(async(e,t)=>{try{return await l.reconstructSql(e,t)}catch(n){const e=n instanceof Error?n.message:"Failed to reconstruct SQL";throw a(e),new Error(e)}},[l]),isDecomposing:e,error:r,models:s,clearModels:n.useCallback(()=>{i([]),a(null)},[])}})(),{toast:k,showSuccess:C,showError:E,hideToast:N}=_d(),{errors:j,addError:T,clearError:M,clearAllErrors:_}=(()=>{const[e,t]=n.useState([]);return{errors:e,addError:n.useCallback((e,n,r)=>{const a={id:`error-${Date.now()}-${Math.random()}`,timestamp:new Date,message:e,details:n,stack:r,type:"error"};t(e=>[...e,a])},[]),clearError:n.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[]),clearAllErrors:n.useCallback(()=>{t([])},[])}})();return n.useEffect(()=>{(async()=>{if(!c&&!g.current){g.current=!0,u(!0);try{const n=localStorage.getItem("zosql_workspace_v3");if(Iu.debug("Layout","Loading saved workspace from localStorage:",n?"found":"not found"),n){const t=JSON.parse(n);if(Iu.debug("Layout","Saved workspace data:",t),"syokiworkspace"!==t.name&&t.sqlModels&&Array.isArray(t.sqlModels)&&0!==t.sqlModels.length){Iu.info("Layout","Valid workspace found, restoring it");const n=Du.fromJSON(t);if(Iu.debug("Layout","Loaded workspace:",n.name,"testValues:",n.testValues.withClause),o(n),Iu.debug("Layout","Loaded workspace with opened objects:",n.openedObjects.length),n.openedObjects.length>0&&b.current){Iu.debug("Layout","Restoring tabs from workspace opened objects"),b.current.clearAllTabs();for(const e of n.openedObjects)if(Iu.debug("Layout","Restoring tab:",e.id,e.type),"main"===e.type||"cte"===e.type){const t=n.sqlModels.find(t=>t.name===e.id);t&&b.current.openSqlModel(e.id,e.content,e.type,t)}else"values"===e.type?b.current.openValuesTab():"formatter"===e.type?b.current.openFormatterTab():"condition"===e.type&&b.current.openConditionTab();if(n.activeObjectId){Iu.debug("Layout","Setting active tab to:",n.activeObjectId),m(n.activeObjectId);const e=n.openedObjects.find(e=>e.id===n.activeObjectId);!e||"main"!==e.type&&"cte"!==e.type||i(n.activeObjectId)}}else{Iu.info("Layout","No opened objects found in workspace - opening main model as fallback"),b.current&&b.current.clearAllTabs();const e=n.sqlModels.find(e=>"main"===e.type);e&&b.current&&(Iu.debug("Layout","Opening main model as fallback:",e.name),b.current.openSqlModel(e.name,e.editorContent,e.type),i(e.name),m(e.name))}Iu.debug("Layout","Starting automatic static analysis after workspace load");try{await n.validateAllSchemas();const e=n.sqlModels.filter(e=>"main"===e.type||"cte"===e.type).map(e=>({model:e,result:n.getValidationResult(e.name)})).filter(({result:e})=>e&&!e.success);e.length>0?Iu.debug("Layout","Schema validation found issues in",e.length,"models on initial load"):Iu.debug("Layout","All schemas validated successfully on initial load")}catch(e){Iu.debug("Layout","Schema validation failed on initial load:",e)}return void u(!1)}Iu.info("Layout","Old workspace detected (missing core structure), will create new demoworkspace"),localStorage.removeItem("zosql_workspace_v3")}let r;Iu.debug("Layout","Creating new demoworkspace using factory");try{r=Id(),Iu.debug("Layout","Created workspace with testValues:",r.testValues.withClause),Iu.debug("Layout","Initialized FilterConditions:",r.filterConditions.displayString),o(r);const t=r.sqlModels.find(e=>"main"===e.type);t&&(Iu.debug("Layout","Setting initial selectedModelName from new workspace to:",t.name),i(t.name),m(t.name)),Iu.debug("Layout","Created workspace with opened objects:",r.openedObjects.length),Iu.debug("Layout","Starting automatic static analysis after workspace creation");try{await r.validateAllSchemas();const e=r.sqlModels.filter(e=>"main"===e.type||"cte"===e.type).map(e=>({model:e,result:r.getValidationResult(e.name)})).filter(({result:e})=>e&&!e.success);e.length>0?Iu.debug("Layout","Schema validation found issues in",e.length,"models in demo workspace"):Iu.debug("Layout","All schemas validated successfully in demo workspace")}catch(e){Iu.debug("Layout","Schema validation failed for demo workspace:",e)}}catch(t){return Iu.error("Layout","Failed to create demo workspace:",t),void E("Failed to create initial workspace")}try{localStorage.setItem("zosql_workspace_v3",JSON.stringify(r.toJSON())),Iu.debug("Layout","Saved new workspace to localStorage")}catch(t){Iu.warn("Layout","Failed to save initial workspace to localStorage:",t)}}catch(t){Iu.error("Layout","Failed to load or create workspace:",t),E("Failed to load workspace")}finally{u(!1)}}})()},[]),n.useEffect(()=>{w&&E(w)},[w,E]),S.jsxs("div",{className:"h-screen w-screen overflow-hidden flex flex-col",children:[S.jsx(ud,{onToggleLeftSidebar:()=>t(!e),onToggleRightSidebar:()=>a(!r),leftSidebarVisible:e,rightSidebarVisible:r,onFileOpen:async e=>{var t,n;try{null==(t=b.current)||t.clearAllTabs();const s=await function(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=e=>{var r;const a=null==(r=e.target)?void 0:r.result;"string"==typeof a?t(a):n(new Error("Failed to read file as text"))},r.onerror=()=>{n(new Error("Failed to read file"))},r.readAsText(e)})}(e),l=e.name.replace(/\.sql$/i,""),c=new Vu(l,s),u=await Sd.execute(c);o(u);try{localStorage.setItem("zosql_workspace_v3",JSON.stringify(u.toJSON()))}catch(r){Iu.warn("Layout","Failed to save workspace to localStorage:",r)}const d=u.sqlModels.find(e=>"main"===e.type);d&&(Iu.debug("Layout","Setting initial selectedModelName to:",d.name),i(d.name),m(d.name),null==(n=b.current)||n.openSqlModel(d.name,d.sqlWithoutCte,"main",d)),C(`Opened ${e.name} with ${u.sqlModels.length} models`),Iu.debug("Layout","Starting automatic static analysis after file open");try{await u.validateAllSchemas();const e=u.sqlModels.filter(e=>"main"===e.type||"cte"===e.type).map(e=>({model:e,result:u.getValidationResult(e.name)})).filter(({result:e})=>e&&!e.success);if(e.length>0){const t=`Static analysis found issues in ${e.length} model(s)`,n=e.map(({model:e,result:t})=>`${e.name}: ${(null==t?void 0:t.error)||"Unknown error"}`).join("\n");T(t,n)}else Iu.debug("Layout","All schemas analyzed successfully")}catch(a){Iu.debug("Layout","Static analysis failed:",a)}}catch(r){E(r instanceof Error?r.message:"Failed to open file")}},onWorkspaceCreated:e=>{try{let n;const r=e&&"function"!=typeof e.toJSON;e&&"function"==typeof e.toJSON?n=e:(Iu.debug("Layout","Restoring workspace from JSON:",e),b.current&&(Iu.debug("Layout","Clearing all tabs before loading JSON workspace"),b.current.clearAllTabs()),n=Du.fromJSON(e)),o(n);const a=n.sqlModels.find(e=>"main"===e.type);a&&(i(a.name),m(a.name)),r&&n.openedObjects.length>0&&b.current&&(Iu.debug("Layout","Restoring tabs from JSON workspace opened objects"),setTimeout(()=>{if(b.current){for(const e of n.openedObjects)if(Iu.debug("Layout","Restoring JSON tab:",e.id,e.type),"main"===e.type||"cte"===e.type){const t=n.sqlModels.find(t=>t.name===e.id);t&&b.current.openSqlModel(e.id,e.content,e.type,t)}else"values"===e.type?b.current.openValuesTab():"formatter"===e.type?b.current.openFormatterTab():"condition"===e.type&&b.current.openConditionTab();if(n.activeObjectId){Iu.debug("Layout","Setting active tab from JSON to:",n.activeObjectId),m(n.activeObjectId);const e=n.openedObjects.find(e=>e.id===n.activeObjectId);!e||"main"!==e.type&&"cte"!==e.type||i(n.activeObjectId)}}},100));try{localStorage.setItem("zosql_workspace_v3",JSON.stringify(n.toJSON())),C(r?"Workspace loaded successfully":"Workspace created successfully")}catch(t){Iu.warn("Layout","Failed to save workspace to localStorage:",t)}r&&b.current&&(Iu.debug("Layout","Running static analysis for loaded JSON workspace"),setTimeout(()=>{b.current&&b.current.runStaticAnalysis()},100))}catch(t){Iu.error("Layout","Failed to process workspace:",t),E("Failed to load workspace: "+(t instanceof Error?t.message:"Unknown error"))}},onWorkspaceSave:()=>{if(l)try{const e=l.toJSON(),t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=`${e.name||"workspace"}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),C("Workspace saved successfully")}catch(e){Iu.error("Layout","Failed to save workspace:",e),E("Failed to save workspace")}},onViewFinalSql:async()=>{if(!l)return{sql:"",error:"No workspace available"};try{return{sql:await l.generateFinalSql()}}catch(e){return Iu.error("Layout","Failed to generate Final SQL:",e),{sql:"",error:e instanceof Error?e.message:"Unknown error occurred"}}},currentWorkspace:l}),S.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e&&S.jsx(pd,{onOpenValuesTab:()=>{var e;Iu.debug("Layout","onOpenValuesTab called"),Iu.debug("Layout","Current state - selectedModelName:",s,"activeTabId:",p),m("values"),Iu.debug("Layout","State updated - selectedModelName: unchanged, activeTabId: values"),null==(e=b.current)||e.openValuesTab()},sqlModels:(null==l?void 0:l.sqlModels)||[],onModelClick:e=>{var t;Iu.debug("Layout","handleModelClick called for model:",e.name),Iu.debug("Layout","Current state - selectedModelName:",s,"activeTabId:",p),i(e.name),m(e.name),Iu.debug("Layout","State updated - selectedModelName:",e.name,"activeTabId:",e.name),null==(t=b.current)||t.openSqlModel(e.name,e.sqlWithoutCte,e.type,e)},selectedModelName:s,onDecomposeQuery:async()=>{var e;const t=null==(e=b.current)?void 0:e.getCurrentSql();if(t)try{const e="main.sql",n=await v(t,e);C(`Decomposed into ${n.length} SQL models`)}catch(n){E(n instanceof Error?n.message:"Failed to decompose SQL")}else E("No SQL content to decompose")},isDecomposing:x,workspace:l,activeTabId:p,showErrorWithDetails:T,showSuccess:C,mainContentRef:b},h),S.jsx(Md,{ref:b,workspace:l,showSuccess:C,showError:E,showErrorWithDetails:T,onActiveTabChange:e=>{if(Iu.debug("Layout","onActiveTabChange called with tabId:",e,"current activeTabId:",p),p!==e){if(Iu.debug("Layout","Updating activeTabId from",p,"to",e),m(e),e&&l&&"values"!==e){const t=l.sqlModels.find(t=>t.name===e);t?(Iu.debug("Layout","Setting selectedModelName to:",t.name),i(t.name)):Iu.debug("Layout","No model found for tabId:",e)}}else Iu.debug("Layout","activeTabId unchanged, skipping update")},onSqlExecuted:e=>f(e),onAnalysisUpdated:()=>{var e,t;Iu.info("Layout","Analysis updated notification from MainContent");const n=null==(t=null==(e=b.current)?void 0:e.getWorkspace)?void 0:t.call(e);n&&(Iu.info("Layout","Updating Layout currentWorkspace with validation results"),o(n)),y(e=>{const t=e+1;return Iu.debug("Layout",`LeftSidebar key updated: ${e} -> ${t}`),t})}}),r&&S.jsx(Rd,{lastExecutedSql:d,workspace:l})]}),k&&S.jsx(Ld,{message:k.message,type:k.type,onClose:N}),S.jsx(Pd,{errors:j,onClearError:M,onClearAll:_})]})},zd=()=>S.jsx(rd,{children:S.jsx(id,{children:S.jsx("div",{className:"h-screen w-screen overflow-hidden bg-dark-primary text-dark-text-primary",children:S.jsx(Dd,{})})})});C.createRoot(document.getElementById("root")).render(S.jsx(s.StrictMode,{children:S.jsx(zd,{})}));
