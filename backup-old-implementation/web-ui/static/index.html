<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>zosql Browser</title>
  <!-- CSS責務分離: 基盤→レイアウト→コンポーネント→ユーティリティ→テーマ -->
  <link rel="stylesheet" href="/static/css/base.css">
  <link rel="stylesheet" href="/static/css/layout.css">
  
  <!-- コンポーネント別CSS (小さなファイル) -->
  <link rel="stylesheet" href="/static/css/components/buttons.css">
  <link rel="stylesheet" href="/static/css/components/panels.css">
  <link rel="stylesheet" href="/static/css/components/monaco-editor.css">
  <link rel="stylesheet" href="/static/css/components/tab-manager.css">
  <link rel="stylesheet" href="/static/css/components/workspace-panel.css">
  <link rel="stylesheet" href="/static/css/components/cte-tree.css">
  <link rel="stylesheet" href="/static/css/components/toast.css">
  <link rel="stylesheet" href="/static/css/components/results-table.css">
  
  <!-- ユーティリティ・テーマ -->
  <link rel="stylesheet" href="/static/css/utilities-core.css">
  <link rel="stylesheet" href="/static/css/themes/dark-theme.css">
</head>
<body>
  <!-- Shadow DOM版 Header -->
  <header-shadow id="header-shadow" title="zosql Browser" show-logo show-open show-sidebar-toggles></header-shadow>
  
  <div class="main-container">
    <!-- Shadow DOM版 Left Sidebar -->
    <div class="sidebar" id="left-sidebar">
      <workspace-panel-shadow id="workspace-panel-shadow"></workspace-panel-shadow>
      <div class="resize-handle" id="left-resize-handle"></div>
    </div>
    
    <!-- Left-Center Splitter -->
    <div class="splitter" id="left-center-splitter"></div>
    
    <!-- Shadow DOM版 中央パネル -->
    <center-panel-shadow id="center-panel-shadow"></center-panel-shadow>
    
    <!-- Center-Right Splitter -->
    <div class="splitter" id="center-right-splitter"></div>
    
    <!-- Shadow DOM版 Right Panel -->
    <right-panel-shadow id="right-panel-shadow" title="Context Panel" collapsible resizable></right-panel-shadow>
    
  </div>
  
  <!-- Toast notifications container -->
  <div id="toast-container" class="toast-container"></div>
  
  <!-- Monaco Editor loader -->
  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.36.1/min/vs/loader.js"></script>
  <script>
    // Monaco Editor初期化
    require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.36.1/min/vs' } });
    require(['vs/editor/editor.main'], function() {
      console.log('Monaco Editor loaded successfully');
      window.monacoLoaded = true;
      window.dispatchEvent(new Event('monaco-loaded'));
    });
  </script>
  
  <!-- Shadow DOM Components -->
  <script type="module" src="/static/js/components/workspace-panel-shadow.js"></script>
  <script type="module" src="/static/js/components/right-panel-shadow.js"></script>
  <script type="module" src="/static/js/components/header-shadow.js"></script>
  <script type="module" src="/static/js/components/center-panel-shadow.js"></script>
  <script type="module" src="/static/js/components/monaco-editor-shadow.js"></script>
  
  <!-- Application Scripts -->
  <script type="module" src="/static/js/modules/sidebar-manager.js"></script>
  <script type="module" src="/static/js/modules/splitter-manager.js"></script>
  <script type="module" src="/static/js/app.js"></script>
</body>
</html>