export class ShadowComponentBase{constructor(t,e={}){this.shadowRoot=t,this.callbacks=new Map,this.state={},this.config={...this.getDefaultConfig(),...e},this.beforeInit(),this.init()}beforeInit(){}getDefaultConfig(){return{}}getStyles(){return""}renderContent(){return""}afterRender(){}getEventPrefix(){return"component"}getStateKey(){return`${this.constructor.name.toLowerCase()}-state`}afterInit(){}beforeDestroy(){}init(){this.loadState(),this.render(),this.setupEventListeners(),this.afterInit(),console.log(`[${this.constructor.name}] Initialized`)}render(){const t=`\n      ${this.getStyles()}\n      ${this.renderContent()}\n    `;this.shadowRoot.innerHTML=t,this.afterRender()}setupEventListeners(){}addClickHandler(t,e){this.shadowRoot.addEventListener("click",o=>{const s=o.target.closest(t);s&&e.call(this,o,s)})}addChangeHandler(t,e){this.shadowRoot.addEventListener("change",o=>{const s=o.target.closest(t);s&&e.call(this,o,s)})}onCallback(t,e){this.callbacks.set(t,e)}triggerCallback(t,e=null){const o=this.callbacks.get(t);o&&o(e),this.dispatchComponentEvent(t,e)}dispatchComponentEvent(t,e){this.shadowRoot.host.dispatchEvent(new CustomEvent(`${this.getEventPrefix()}-${t}`,{detail:e,bubbles:!0}))}saveState(){const t=this.getStateToPersist();if(t&&Object.keys(t).length>0)try{localStorage.setItem(this.getStateKey(),JSON.stringify(t))}catch(t){console.warn("Failed to save state:",t)}}loadState(){try{const t=localStorage.getItem(this.getStateKey());if(t){const e=JSON.parse(t);this.applyPersistedState(e)}}catch(t){console.warn(`Failed to load ${this.constructor.name} state:`,t)}}getStateToPersist(){return this.state}applyPersistedState(t){Object.assign(this.state,t)}$(t){return this.shadowRoot.querySelector(t)}$$(t){return this.shadowRoot.querySelectorAll(t)}getElementById(t){return this.shadowRoot.getElementById(t)}showToast(t,e="info",o=4e3){try{return"function"==typeof window.showToast?window.showToast(t,e,"",o):"success"===e&&"function"==typeof window.showSuccessToast?window.showSuccessToast(t):"error"===e&&"function"==typeof window.showErrorToast?window.showErrorToast(t):"warning"===e&&"function"==typeof window.showWarningToast?window.showWarningToast(t):"info"===e&&"function"==typeof window.showInfoToast?window.showInfoToast(t):(console.log(`[TOAST ${e.toUpperCase()}] ${t}`),null)}catch(o){return console.error("[ShadowComponentBase] Error showing toast:",o),console.log(`[TOAST ${e.toUpperCase()}] ${t}`),null}}destroy(){this.beforeDestroy(),this.callbacks.clear(),this.state={},console.log(`[${this.constructor.name}] Destroyed`)}}export class ShadowElementBase extends HTMLElement{static get componentClass(){throw new Error("componentClass getter must be implemented")}constructor(){super(),this.attachShadow({mode:"open"}),this.component=null}connectedCallback(){const t=this.constructor.componentClass,e=this.gatherOptions();this.component=new t(this.shadowRoot,e),this.setupComponentCallbacks(),this.exposeComponentAPI()}disconnectedCallback(){this.component&&(this.component.destroy(),this.component=null)}gatherOptions(){return{}}setupComponentCallbacks(){}exposeComponentAPI(){}getAttributeOrDefault(t,e){return this.getAttribute(t)||e}getBooleanAttribute(t){return this.hasAttribute(t)}getNumberAttribute(t,e=0){const o=this.getAttribute(t);return o?parseFloat(o):e}exposeMethod(t){this[t]=(...e)=>this.component?.[t](...e)}exposeMethods(t){t.forEach(t=>this.exposeMethod(t))}}"undefined"!=typeof window&&(window.ShadowComponentBase=ShadowComponentBase,window.ShadowElementBase=ShadowElementBase);