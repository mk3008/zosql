export function initializeUI(){setupSidebarToggle(),setupCollapsibleSections(),setupResizeHandles(),setupSplitView()}function setupSidebarToggle(){const e=document.getElementById("toggle-left-sidebar"),t=document.getElementById("toggle-right-sidebar");e&&e.addEventListener("click",()=>toggleLeftSidebar()),t&&t.addEventListener("click",()=>toggleRightSidebar())}function setupCollapsibleSections(){document.querySelectorAll("h3.collapsible").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-target");t&&toggleSection(t)})})}function setupResizeHandles(){const e=document.getElementById("left-resize-handle");e&&e.addEventListener("mousedown",e=>{startResize(e,"left")});const t=document.getElementById("right-resize-handle");t&&t.addEventListener("mousedown",e=>{startResize(e,"context")});const o=document.getElementById("left-results-resize-handle");console.log("DEBUG: leftResultsHandle found:",!!o),o&&o.addEventListener("mousedown",e=>{console.log("DEBUG: leftResultsHandle mousedown triggered"),startVerticalResize(e,"left")});const n=document.getElementById("right-results-resize-handle");console.log("DEBUG: rightResultsHandle found:",!!n),n&&n.addEventListener("mousedown",e=>{console.log("DEBUG: rightResultsHandle mousedown triggered"),startVerticalResize(e,"right")});const i=document.getElementById("split-resize-handle");i&&i.addEventListener("mousedown",e=>{startSplitResize(e)})}function setupSplitView(){const e=document.getElementById("toggle-split-btn"),t=document.getElementById("close-split-btn");e&&e.addEventListener("click",()=>toggleSplitView()),t&&t.addEventListener("click",()=>closeSplitView())}export function toggleLeftSidebar(){const e=document.getElementById("left-sidebar");e&&(e.classList.toggle("hidden"),setTimeout(()=>{updateMonacoEditorLayout()},100))}export function toggleRightSidebar(){const e=document.getElementById("context-sidebar");e&&(e.classList.toggle("hidden"),setTimeout(()=>{updateMonacoEditorLayout()},100))}function updateMonacoEditorLayout(){const e=document.getElementById("left-monaco-editor");e&&e.component&&e.component.layout();const t=document.getElementById("right-monaco-editor");if(t&&t.component&&t.component.layout(),window.appState&&window.appState.components){const{leftMonacoEditor:e,rightMonacoEditor:t}=window.appState.components;e&&"function"==typeof e.layout&&e.layout(),t&&"function"==typeof t.layout&&t.layout()}}function forceMonacoEditorResize(e){console.log("DEBUG: forceMonacoEditorResize called for panel:",e);const t=document.getElementById(`${e}-monaco-editor`);t&&t.component?(console.log("DEBUG: Found monaco editor component, calling layout()"),setTimeout(()=>{t.component.layout(),console.log("DEBUG: Monaco editor layout() called")},0)):console.log("DEBUG: Monaco editor component not found:",`${e}-monaco-editor`),updateMonacoEditorLayout()}export function toggleSection(e){const t=document.getElementById(e),o=document.getElementById(e.replace("-section","-icon"));if(t&&o){const e="none"!==t.style.display;t.style.display=e?"none":"block",o.textContent=e?"▶":"▼"}}export function toggleSplitView(){const e=document.getElementById("right-editor-panel"),t=document.getElementById("split-resize-handle");e&&t&&("none"!==e.style.display?(e.style.display="none",t.style.display="none",window.appState.isSplitView=!1):(e.style.display="flex",t.style.display="block",window.appState.isSplitView=!0))}export function closeSplitView(){const e=document.getElementById("right-editor-panel"),t=document.getElementById("split-resize-handle");e&&t&&(e.style.display="none",t.style.display="none",window.appState.isSplitView=!1)}function startResize(e,t){e.preventDefault();const o=e.clientX;let n;if("left"===t?n=document.getElementById("left-sidebar"):"context"===t&&(n=document.getElementById("context-sidebar")),!n)return;const i=parseInt(document.defaultView.getComputedStyle(n).width,10);let l;document.body.style.cursor="col-resize",document.body.style.userSelect="none";const s=n.style.transition;function d(e){l&&cancelAnimationFrame(l),l=requestAnimationFrame(()=>{const s=e.clientX;let d;"left"===t?d=i+(s-o):"context"===t&&(d=i-(s-o)),d=Math.max(200,Math.min(600,d)),n.style.width=d+"px",l=null})}n.style.transition="none",document.addEventListener("mousemove",d),document.addEventListener("mouseup",function e(){l&&cancelAnimationFrame(l),n.style.transition=s,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e),setTimeout(()=>updateMonacoEditorLayout(),0)})}function startVerticalResize(e,t){e.preventDefault(),console.log("DEBUG: startVerticalResize called for panel:",t);const o=e.clientY,n=document.getElementById(`${t}-results-container`);if(!n)return void console.log("DEBUG: container not found:",`${t}-results-container`);console.log("DEBUG: container found:",n);const i=parseInt(document.defaultView.getComputedStyle(n).height,10);function l(e){const l=e.clientY,s=i-(l-o);s>=100&&s<=800&&(n.style.height=s+"px",console.log("DEBUG: Setting container height to:",s+"px"),forceMonacoEditorResize(t))}console.log("DEBUG: startHeight:",i),document.addEventListener("mousemove",l),document.addEventListener("mouseup",function e(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",e),console.log("DEBUG: stopResize called, forcing final layout update"),forceMonacoEditorResize(t),setTimeout(()=>{forceMonacoEditorResize(t)},100)})}function startSplitResize(e){e.preventDefault();const t=e.clientX,o=document.getElementById("left-editor-panel"),n=document.getElementById("right-editor-panel");if(!o||!n)return;const i=document.getElementById("editor-split-container").offsetWidth,l=o.offsetWidth;function s(e){const s=e.clientX,d=l+(s-t),c=i-d-5;d>=200&&c>=200&&(o.style.flex=`0 0 ${d}px`,n.style.flex=`0 0 ${c}px`)}document.addEventListener("mousemove",s),document.addEventListener("mouseup",function e(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",e)})}