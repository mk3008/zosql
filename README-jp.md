# zosql

**[ğŸš€ ãƒ©ã‚¤ãƒ–ã‚µã‚¤ãƒˆ](https://mk3008.github.io/zosql)** | **[ğŸ® ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰](https://mk3008.github.io/zosql/#demo)**

> **ãƒ©ã‚¤ãƒ–ã‚µã‚¤ãƒˆ**: ç©ºã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‹ã‚‰é–‹å§‹ã€SQLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰  
> **ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰**: äº‹å‰è¨­å®šã•ã‚ŒãŸã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã¨ã‚¯ã‚¨ãƒªã‚’è©¦ç”¨

## æ¦‚è¦

zosqlã¯ã€SQLæ–‡ã®åˆ†è§£ãƒ»æ§‹æˆã‚’æ”¯æ´ã™ã‚‹SQLãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚è¤‡é›‘ãªCTEï¼ˆCommon Table Expressionï¼‰ã‚’å«ã‚€SQLæ–‡ã‚’åŠ¹ç‡çš„ã«é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆã§ãã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼åŒ–ã•ã‚ŒãŸSQLé–‹ç™ºç’°å¢ƒã‚’æä¾›ã—ã¾ã™ã€‚

## ç‰¹å¾´

- **SQLåˆ†è§£ãƒ»æ§‹æˆ**: è¤‡é›‘ãªSQLæ–‡ã‚’CTEãƒ™ãƒ¼ã‚¹ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã—ã€éƒ¨åˆ†çš„ãªå®Ÿè¡Œãƒ»ãƒ†ã‚¹ãƒˆãŒå¯èƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å®Ÿè¡Œ**: PGliteã‚’ä½¿ç”¨ã—ãŸãƒ–ãƒ©ã‚¦ã‚¶å†…PostgreSQLç’°å¢ƒã§ã®å³åº§ãªã‚¯ã‚¨ãƒªå®Ÿè¡Œ
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚¨ãƒ‡ã‚£ã‚¿**: Monaco Editorã«ã‚ˆã‚‹é«˜åº¦ãªSQLç·¨é›†æ©Ÿèƒ½ï¼ˆã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã€è‡ªå‹•è£œå®Œï¼‰
- **ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¡ä»¶ç®¡ç†**: å‹•çš„ãªWHEREæ¡ä»¶ã®çµ„ã¿åˆã‚ã›ã¨ãƒ†ã‚¹ãƒˆ
- **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†**: CTEå½¢å¼ã§ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿å®šç¾©ã¨ç®¡ç†
- **SQLæ•´å½¢**: çµ±ä¸€ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã§ã®SQLè‡ªå‹•æ•´å½¢

## ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã®ä½¿ã„æ–¹

ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§zosqlã‚’è©¦ã™ã«ã¯ã€**[ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰](https://mk3008.github.io/zosql/#demo)**ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚ã‚µãƒ³ãƒ—ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã‚¯ã‚¨ãƒªãŒäº‹å‰è¨­å®šã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ã€ä»¥ä¸‹ã®æ‰‹é †ã§æ©Ÿèƒ½ã‚’ä½“é¨“ã§ãã¾ã™ï¼š

### 1. ã‚¯ã‚¨ãƒªå®Ÿè¡Œã‚’è©¦ã™

1. ç”»é¢å·¦ä¸Šã® **Run** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ä¸‹éƒ¨ã®Resultç”»é¢ã§ã‚¯ã‚¨ãƒªçµæœã‚’ç¢ºèª
3. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®SQLï¼ˆ`SELECT user_id, name FROM users;`ï¼‰ã®å®Ÿè¡ŒçµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™

### 2. Filter Conditionsã‚’å¤‰æ›´ã™ã‚‹

1. ç”»é¢å³å´ã® **Conditions** ã‚¿ãƒ–ã‚’é–‹ã
2. Filter Conditionsã®å†…å®¹ã‚’ç·¨é›†ï¼ˆä¾‹ï¼š`{"name": {"ilike": "%a%"}}`ï¼‰
3. **Run** ãƒœã‚¿ãƒ³ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨å¾Œã®çµæœã‚’ç¢ºèª

#### Filter Conditionsä»•æ§˜

Filter Conditionsã¯rawsql-tsã®ä»•æ§˜ã‚’ä½¿ç”¨ã—ã€å‹•çš„ãªWHEREå¥ç”Ÿæˆã®ãŸã‚ã®ã•ã¾ã–ã¾ãªæ¼”ç®—å­ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼š

**ç©ºã®æ¡ä»¶ï¼ˆç„¡è¦–ã•ã‚Œã‚‹ï¼‰ï¼š**
```json
{
  "user_id": {},
  "name": {},
  "status": {}
}
```
ç”Ÿæˆã•ã‚Œã‚‹SQL: WHEREå¥ã¯è¿½åŠ ã•ã‚Œã¾ã›ã‚“ï¼ˆç©ºã®æ¡ä»¶ã¯ç„¡è¦–ã•ã‚Œã¾ã™ï¼‰

**åŸºæœ¬æ¼”ç®—å­ï¼š**
```json
{
  "user_id": {"=": 123},
  "age": {">": 18, "<=": 65},
  "status": {"!=": "inactive"}
}
```
ç”Ÿæˆã•ã‚Œã‚‹SQL: `WHERE user_id = $1 AND age > $2 AND age <= $3 AND status != $4`

**ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢ï¼š**
```json
{
  "name": {"ilike": "%john%"},
  "description": {"like": "important%"}
}
```
ç”Ÿæˆã•ã‚Œã‚‹SQL: `WHERE name ILIKE $1 AND description LIKE $2`

**é…åˆ—æ“ä½œï¼š**
```json
{
  "status": {"in": ["active", "pending"]},
  "tags": {"any": ["urgent", "priority"]}
}
```
ç”Ÿæˆã•ã‚Œã‚‹SQL: `WHERE status IN ($1, $2) AND tags = ANY($3)`

**ç¯„å›²æ¡ä»¶ï¼š**
```json
{
  "price": {"min": 10, "max": 100}
}
```
ç”Ÿæˆã•ã‚Œã‚‹SQL: `WHERE price >= $1 AND price <= $2`

**è¤‡é›‘ãªè«–ç†æ¼”ç®—ï¼š**
```json
{
  "premium_or_high_score": {
    "or": [
      {"column": "type", "=": "premium"},
      {"column": "score", ">": 80}
    ]
  }
}
```
ç”Ÿæˆã•ã‚Œã‚‹SQL: `WHERE (type = $1 OR score > $2)`

æ³¨: ã‚­ãƒ¼ `premium_or_high_score` ã¯æ¡ä»¶ã‚°ãƒ«ãƒ¼ãƒ—åã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã€ç”Ÿæˆã•ã‚Œã‚‹SQLã«ã¯ç¾ã‚Œã¾ã›ã‚“ã€‚

**è¤‡æ•°æ¡ä»¶ï¼ˆè‡ªå‹•çš„ã«ANDã§çµåˆï¼‰ï¼š**
```json
{
  "name": {"ilike": "%john%"},
  "age": {">": 18},
  "status": {"in": ["active", "verified"]}
}
```
ç”Ÿæˆã•ã‚Œã‚‹SQL: `WHERE name ILIKE $1 AND age > $2 AND status IN ($3, $4)`

### 3. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹

1. ç”»é¢ä¸Šéƒ¨ã® **data** ã‚¿ãƒ–ã‚’é–‹ã
2. CTEå½¢å¼ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç·¨é›†
   ```sql
   with users(user_id, name) as (
     values
       (1::bigint, 'alice'::text),
       (2::bigint, 'bob'::text),
       (3::bigint, 'adam'::text)
   )
   ```
3. **Run** ãƒœã‚¿ãƒ³ã§æ–°ã—ã„ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§ã®çµæœã‚’ç¢ºèª

## é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
npm run dev

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000 ã«ã‚¢ã‚¯ã‚»ã‚¹
```

### åŸºæœ¬çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1. **SQLãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿**: ãƒ­ãƒ¼ã‚«ãƒ«ã®.sqlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
2. **CTEåˆ†è§£**: è¤‡é›‘ãªSQLãŒè‡ªå‹•çš„ã«CTEãƒ™ãƒ¼ã‚¹ã§åˆ†è§£ã•ã‚Œã‚‹
3. **éƒ¨åˆ†å®Ÿè¡Œ**: å„CTEã‚„æœ€çµ‚çµæœã‚’å€‹åˆ¥ã«å®Ÿè¡Œãƒ»ãƒ†ã‚¹ãƒˆ
4. **æ¡ä»¶èª¿æ•´**: Filter Conditionsã§å‹•çš„WHEREæ¡ä»¶ã‚’ãƒ†ã‚¹ãƒˆ
5. **ãƒ‡ãƒ¼ã‚¿èª¿æ•´**: Test Valuesã§ã•ã¾ã–ã¾ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®Ÿè¡Œ

### å“è³ªãƒã‚§ãƒƒã‚¯

```bash
# å‹ãƒã‚§ãƒƒã‚¯
npm run typecheck

# ãƒªãƒ³ãƒˆ
npm run lint

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test

# çµ±åˆå“è³ªãƒã‚§ãƒƒã‚¯
npm run quality
```

## ä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

### ä¸»è¦ä¾å­˜é–¢ä¿‚

- **[rawsql-ts](https://github.com/hurui200320/rawsql-ts)**: SQLè§£æãƒ»åˆ†è§£ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆMIT Licenseï¼‰
- **[@electric-sql/pglite](https://github.com/electric-sql/pglite)**: ãƒ–ãƒ©ã‚¦ã‚¶å†…PostgreSQLï¼ˆApache License 2.0ï¼‰
- **[Monaco Editor](https://github.com/microsoft/monaco-editor)**: é«˜æ©Ÿèƒ½ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆMIT Licenseï¼‰
- **[React](https://github.com/facebook/react)**: UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆMIT Licenseï¼‰
- **[Tailwind CSS](https://github.com/tailwindlabs/tailwindcss)**: CSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆMIT Licenseï¼‰

### é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆä¾å­˜é–¢ä¿‚

- **[TypeScript](https://github.com/microsoft/TypeScript)**: å‹å®‰å…¨JavaScriptï¼ˆApache License 2.0ï¼‰
- **[Vite](https://github.com/vitejs/vite)**: ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ï¼ˆMIT Licenseï¼‰
- **[Vitest](https://github.com/vitest-dev/vitest)**: ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆMIT Licenseï¼‰
- **[ESLint](https://github.com/eslint/eslint)**: JavaScript/TypeScriptãƒªãƒ³ã‚¿ãƒ¼ï¼ˆMIT Licenseï¼‰

**è©³ç´°ãªãƒ©ã‚¤ã‚»ãƒ³ã‚¹æ¡é …**: å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å®Œå…¨ãªãƒ©ã‚¤ã‚»ãƒ³ã‚¹æ¡é …ã«ã¤ã„ã¦ã¯ [THIRD-PARTY-LICENSES.md](./THIRD-PARTY-LICENSES.md) ã‚’ã”ç¢ºèªãã ã•ã„ã€‚

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯ [LICENSE](./LICENSE) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
